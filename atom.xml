<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh-CN"><title type="text">Ray's Blog</title><subtitle type="html">å¤œæ™šå†é»‘ï¼Œä¹Ÿå‹ä¸è¿‡é›ªçš„ç™½ã€‚Ray,Code,Python,Git,çˆ¬è™«,Hugo,MemE</subtitle><updated>2020-04-11T16:12:00+08:00</updated><id>https://raycoder.me/</id><link rel="alternate" type="text/html" href="https://raycoder.me/"/><link rel="self" type="application/atom+xml" href="https://raycoder.me/atom.xml"/><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><generator uri="https://gohugo.io/" version="0.68.3">Hugo</generator><entry><title type="text">Travis CIè‡ªåŠ¨éƒ¨ç½²Hugoåšå®¢</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/travis-ci-automatically-deploys-hugo-blog/"/><id>https://raycoder.me/p/travis-ci-automatically-deploys-hugo-blog/</id><updated>2020-04-10T20:00:02+08:00</updated><published>2020-04-09T13:16:30+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">Travis CIè‡ªåŠ¨éƒ¨ç½²Hugoåšå®¢è‡³GitHub</summary><content type="html"><![CDATA[<blockquote>
<p><strong>å†™ä½œä¸æ˜“ï¼Œèµ„ç“·ä¸€ä¸‹å‘—ï¼æœ¬æ–‡é¦–å‘äºä¸ªäººåšå®¢ï¼š<a href="https://raycoder.me">https://raycoder.me</a></strong></p>
</blockquote>
<p>è¿‘æ—¥å‘ç°GitHub Pageså›½å†…è®¿é—®é€Ÿåº¦å˜å¿«ï¼Œå‡†å¤‡æ¢å›å»ã€‚å¥ˆä½•æˆ‘åˆæƒ³ä¿ç•™GitHubä¸Šçš„æºç ï¼ŒHugoåˆæ²¡æœ‰<code>hexo d</code>è¿™æ ·çš„ä¸€é”®éƒ¨ç½²æ“ä½œï¼Œåªèƒ½ä½¿ç”¨Travis CIï¼ˆ<code>Continuous Integration</code>ï¼ŒæŒç»­é›†æˆï¼‰æ¥å®ç°ã€‚</p>
<hr>
<h3 id="ä»€ä¹ˆæ˜¯ci">ä»€ä¹ˆæ˜¯CIï¼Ÿ</h3>
<p>CIï¼Œ<code>Continuous Integration</code>ï¼ŒæŒç»­é›†æˆã€‚CIå°±åƒæ˜¯ä¸€ä¸ªç›‘è§†å™¨ï¼Œåœ¨ä½ èµ‹äºˆå®ƒæƒé™åï¼Œå®ƒå°±ä¼šä¸€ç›´ç›¯ç€ä½ ä»“åº“çš„åŠ¨æ€ã€‚å½“ä½ çš„ä»“åº“è§¦å‘æŒ‡å®šæ“ä½œæ—¶ï¼Œå®ƒå°±æŠŠç›¸åº”çš„æŒ‡ä»¤æ‰§è¡Œå®Œã€‚</p>
<hr>
<h3 id="éƒ¨ç½²hugo">éƒ¨ç½²Hugo</h3>
<p>ï¼ˆè¯·å…ˆåœ¨ä½ çš„ä»“åº“åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œå¦‚<code>hugo</code>ï¼Œå†è®¾ç½®å…¶ä¸ºä¸»åˆ†æ”¯ï¼‰</p>
<p>æˆ‘ä»¬å¾—å…ˆè·å–ä¸€ä¸ª<a href="https://github.com/settings/tokens"><code>Personal access token</code></a>ï¼Œç”¨äºç»™Travis CIè®¿é—®ä»“åº“çš„æƒé™ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200409132636.png" alt=""></p>
<p>ç‚¹å‡»ä¹‹åï¼Œåªéœ€è¦å‹¾é€‰<code>repo:status</code>ã€<code> repo_deployment</code>å’Œ<code>public_repo</code>ä¸‰é¡¹å³å¯ï¼Œè¿™æ ·å³ä½¿ä»¤ç‰Œè¢«ç›—ï¼Œä¹Ÿå¯ä»¥æœ€å¤§çš„å‡å°‘æŸå¤±ã€‚Noteå¤„æ˜¯å¯é€‰çš„ï¼Œä¸éœ€è¦å¡«å†™ï¼Œåªæ˜¯èµ·åˆ†è¾¨ä½œç”¨ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200409133232.png" alt=""></p>
<p>ç”Ÿæˆå®Œä¹‹åä¸€å®šè¦ä¿å­˜ä»¤ç‰Œï¼Œè¿™ä¸ªä»¤ç‰Œåªä¼šå‡ºç°ä¸€æ¬¡ã€‚</p>
<p>éšåè®©æˆ‘ä»¬æ‰“å¼€<a href="https://travis-ci.com">Travis CIå®˜ç½‘</a>ï¼Œä½¿ç”¨GitHubç™»å½•ã€‚</p>
<p>é€‰æ‹©ä½ çš„åšå®¢ä»“åº“ã€‚</p>
<p>ç‚¹å‡»<code>Settings</code>ï¼Œåœ¨<code>Environment Variables</code>ä¸­æ·»åŠ åˆšåˆšçš„ä»¤ç‰Œï¼Œ<code>NAME</code>ä¸º<code>ACCESS_TOKEN</code>ï¼Œ<code>VALUE</code>ä¸ºä½ çš„ä»¤ç‰Œã€‚<code>Branch</code>é€‰<code>All branches</code>ã€‚</p>
<hr>
<h3 id="travisé’©å­">Travisé’©å­</h3>
<p>Travis æœ‰ä¸åŒçš„é˜¶æ®µ,ä»–æä¾›äº†7ä¸ªé’©å­ã€‚</p>
<ul>
<li>before_installï¼šinstall é˜¶æ®µä¹‹å‰æ‰§è¡Œ</li>
<li>before_scriptï¼šscript é˜¶æ®µä¹‹å‰æ‰§è¡Œ</li>
<li>after_failureï¼šscript é˜¶æ®µå¤±è´¥æ—¶æ‰§è¡Œ</li>
<li>after_successï¼šscript é˜¶æ®µæˆåŠŸæ—¶æ‰§è¡Œ</li>
<li>before_deployï¼šdeploy æ­¥éª¤ä¹‹å‰æ‰§è¡Œ</li>
<li>after_deployï¼šdeploy æ­¥éª¤ä¹‹åæ‰§è¡Œ</li>
<li>after_scriptï¼šscript é˜¶æ®µä¹‹åæ‰§è¡Œ</li>
</ul>
<h3 id="ç”Ÿå‘½å‘¨æœŸ">ç”Ÿå‘½å‘¨æœŸ</h3>
<ol>
<li>before_install</li>
<li>install</li>
<li>before_script</li>
<li>script</li>
<li>aftersuccess or afterfailure</li>
<li>[OPTIONAL] before_deploy</li>
<li>[OPTIONAL] deploy</li>
<li>[OPTIONAL] after_deploy</li>
<li>after_script</li>
</ol>
<p>åœ¨åšå®¢æ ¹ç›®å½•ä¸‹æ–°å»º<code>.travis.yml</code>ï¼Œå†…å®¹å¦‚ä¸‹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="k">language</span><span class="p">:</span><span class="w"> </span>node_js<span class="w"> </span><span class="c">#è¯­è¨€æ˜¯NodeJS</span><span class="w">
</span><span class="w"></span><span class="k">node_js</span><span class="p">:</span><span class="w"> </span><span class="m">13.12.0</span><span class="w"> </span><span class="c">#Nodeç‰ˆæœ¬ï¼Œæˆ‘æ˜¯ç”¨äº†ä¸€äº›npmæ¨¡å—</span><span class="w">
</span><span class="w"></span><span class="k">install</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- wget<span class="w"> </span>https<span class="p">:</span>//github.com/gohugoio/hugo/releases/download/v0<span class="m">.68.3</span>/hugo_extended_0<span class="m">.68</span>.3_Linux-64bit.deb<span class="w"> </span><span class="c">#wgetHugoçš„å®‰è£…åŒ…ï¼Œå¯ä»¥ä¿®æ”¹</span><span class="w">
</span><span class="w">    </span>- sudo<span class="w"> </span>dpkg<span class="w"> </span>-i<span class="w"> </span>hugo<span class="cp">*.deb</span><span class="w">
</span><span class="w">    </span>- hugo<span class="w"> </span>version<span class="w">
</span><span class="w">    </span>- rm<span class="w"> </span>-rf<span class="w"> </span>public<span class="w">
</span><span class="w">    </span>- npm<span class="w"> </span>install<span class="w"> </span><span class="c">#å®‰è£…ä¾èµ–ï¼Œè¦package.jsonï¼Œæ²¡éœ€æ±‚çš„å¯ä»¥çœç•¥</span><span class="w">
</span><span class="w">    
</span><span class="w"></span><span class="k">script</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- npm<span class="w"> </span>run<span class="w"> </span>build<span class="w"> </span><span class="c">#æˆ‘è¿™é‡Œåœ¨package.jsoné…ç½®äº†ä¸€ç³»åˆ—ç”Ÿæˆæ“ä½œï¼Œå¯ä»¥è‡ªå·±æ›¿æ¢</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">after_success</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>user.name<span class="w"> </span><span class="s2">&#34;FFRaycoder&#34;</span><span class="w"> </span><span class="c">#ç”¨æˆ·å</span><span class="w">
</span><span class="w">    </span>- git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>user.email<span class="w"> </span><span class="s2">&#34;ray@raycoder.me&#34;</span><span class="w"> </span><span class="c">#ç”¨æˆ·é‚®ç®±</span><span class="w">
</span><span class="w">    </span>- git<span class="w"> </span>clone<span class="w"> </span>https<span class="p">:</span>//${ACCESS_TOKEN}@github.com/FFRaycoder/ffraycoder.github.io.git<span class="w"> </span>container<span class="w"> </span><span class="c">#æ¢æˆä½ çš„ä»“åº“</span><span class="w">
</span><span class="w">    </span>- rm<span class="w"> </span>-rf<span class="w"> </span>container/*<span class="w">
</span><span class="w">    </span>- cp<span class="w"> </span>-r<span class="w"> </span>public/*<span class="w"> </span>container<span class="w"> 
</span><span class="w">    </span>- cd<span class="w"> </span>container<span class="w">
</span><span class="w">    </span>- git<span class="w"> </span>add<span class="w"> </span>.<span class="w">
</span><span class="w">    </span>- git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s1">&#39;Travis update blog&#39;</span><span class="w">
</span><span class="w">    </span>- git<span class="w"> </span>push<span class="w"> </span>-u<span class="w"> </span>origin<span class="w"> </span>master<span class="w"> </span>-f<span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p><code>package.json</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;blog&#34;</span><span class="p">,</span>
  <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.0.0&#34;</span><span class="p">,</span>
  <span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;Ray&#39;s Blog&#34;</span><span class="p">,</span>
  <span class="nt">&#34;main&#34;</span><span class="p">:</span> <span class="s2">&#34;index.js&#34;</span><span class="p">,</span>
  <span class="nt">&#34;scripts&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;test&#34;</span><span class="p">:</span> <span class="s2">&#34;echo \&#34;Error: no test specified\&#34; &amp;&amp; exit 1&#34;</span><span class="p">,</span>
    <span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="s2">&#34;git config --global core.quotePath false &amp;&amp; hugo --gc --minify --cleanDestinationDir &amp;&amp; ./node_modules/gulp/bin/gulp.js build&#34;</span><span class="p">,</span>
    <span class="nt">&#34;index&#34;</span><span class="p">:</span> <span class="s2">&#34;hugo-lunr&#34;</span><span class="p">,</span>
    <span class="nt">&#34;algolia&#34;</span><span class="p">:</span> <span class="s2">&#34;atomic-algolia&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;engines&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;node&#34;</span><span class="p">:</span> <span class="s2">&#34;12.x&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;repository&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;git&#34;</span><span class="p">,</span>
    <span class="nt">&#34;url&#34;</span><span class="p">:</span> <span class="s2">&#34;git+https://github.com/FFRaycoder/blog.git&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;keywords&#34;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&#34;blog&#34;</span><span class="p">,</span>
    <span class="s2">&#34;hugo&#34;</span><span class="p">,</span>
    <span class="s2">&#34;hugo-theme-meme&#34;</span>
  <span class="p">],</span>
  <span class="nt">&#34;author&#34;</span><span class="p">:</span> <span class="s2">&#34;reuixiy&#34;</span><span class="p">,</span>
  <span class="nt">&#34;license&#34;</span><span class="p">:</span> <span class="s2">&#34;CC-BY-NC-SA-4.0&#34;</span><span class="p">,</span>
  <span class="nt">&#34;bugs&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;url&#34;</span><span class="p">:</span> <span class="s2">&#34;https://github.com/FFRaycoder/blog/issues&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;homepage&#34;</span><span class="p">:</span> <span class="s2">&#34;https://github.com/FFRaycoder/blog&#34;</span><span class="p">,</span>
  <span class="nt">&#34;devDependencies&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;gulp&#34;</span><span class="p">:</span> <span class="s2">&#34;^4.0.2&#34;</span><span class="p">,</span>
    <span class="nt">&#34;gulp-uglify&#34;</span><span class="p">:</span> <span class="s2">&#34;^3.0.2&#34;</span><span class="p">,</span>
    <span class="nt">&#34;hugo-search-index&#34;</span><span class="p">:</span> <span class="s2">&#34;^0.5.0&#34;</span><span class="p">,</span>
    <span class="nt">&#34;readable-stream&#34;</span><span class="p">:</span> <span class="s2">&#34;^3.6.0&#34;</span><span class="p">,</span>
    <span class="nt">&#34;uglify-es&#34;</span><span class="p">:</span> <span class="s2">&#34;^3.3.9&#34;</span><span class="p">,</span>
    <span class="nt">&#34;workbox-build&#34;</span><span class="p">:</span> <span class="s2">&#34;^5.0.0&#34;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„é…ç½®å°±ç»“æŸäº†ã€‚æ¯æ¬¡æŠŠåšå®¢æºç æ¨é€åˆ°ä»“åº“çš„<code>hugo</code>åˆ†æ”¯ï¼ŒTraviså°±ä¼šè‡ªåŠ¨å¸®ä½ éƒ¨ç½²å¥½ç½‘é¡µã€‚</p>
]]></content><category scheme="https://raycoder.me/categories/ci/" term="CI" label="CI"/><category scheme="https://raycoder.me/tags/travis-ci/" term='Travis CI"' label='Travis CI"'/><category scheme="https://raycoder.me/tags/hugo/" term="Hugo" label="Hugo"/><category scheme="https://raycoder.me/tags/github/" term="GitHub" label="GitHub"/><category scheme="https://raycoder.me/tags/%E5%8D%9A%E5%AE%A2/" term="åšå®¢" label="åšå®¢"/></entry><entry><title type="text">GitHub Pageså˜å¿«äº†ï¼</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/github-pages-becomes-faster/"/><id>https://raycoder.me/p/github-pages-becomes-faster/</id><updated>2020-04-09T14:00:28+08:00</updated><published>2020-04-09T09:38:09+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">GitHub Pageså˜å¿«äº†ï¼</summary><content type="html"><![CDATA[<blockquote>
<p><strong>å†™ä½œä¸æ˜“ï¼Œèµ„ç“·ä¸€ä¸‹å‘—ï¼æœ¬æ–‡é¦–å‘äºä¸ªäººåšå®¢ï¼š<a href="https://raycoder.me">https://raycoder.me</a></strong></p>
</blockquote>
<p>å‰å¤©åœ¨é€›å¤§ä½¬ä»¬çš„åšå®¢ï¼Œæœ‰çš„å¤§ä½¬ç”¨çš„æ˜¯<code>github.io</code>äºŒçº§åŸŸåã€‚ç„¶åç½‘é¡µæŒ‚äº†ï¼Œäº¤æµç¾¤å†…ä¸€ç‰‡å–Šå£°<heimu>æ·¦</heimu>ğŸ™ƒ</p>
<p>æ˜¨å¤©ä¸Šåˆåˆå»çœ‹äº†çœ‹ï¼ŒPageså¯ä»¥æ­£å¸¸è®¿é—®äº†ã€‚é˜¿ï¼Œæ€ä¹ˆæ„Ÿè§‰å˜å¿«äº†ï¼Ÿ</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200409094422.png" alt=""></p>
<p>ä¼—æ‰€å‘¨çŸ¥GitHubé‡‡ç”¨çš„Fastly CDNï¼Œä¼°è®¡å‰å¤©æ˜¯å¢åŠ å›½å†…èŠ‚ç‚¹å»äº†ã€‚</p>
<p>çœŸé¦™ï¼Œå¯ä»¥æŠ›å¼ƒNetlifyäº†QQ</p>
<hr>
<p>è€Œä¸”å–æ¶ˆäº†å¯¹ç™¾åº¦Robots.txtçš„é™åˆ¶ã€‚</p>
]]></content><category scheme="https://raycoder.me/categories/github/" term="GitHub" label="GitHub"/><category scheme="https://raycoder.me/tags/github/" term="GitHub" label="GitHub"/><category scheme="https://raycoder.me/tags/pages/" term="Pages" label="Pages"/></entry><entry><title type="text">HTMLå…¥é—¨äºŒï¼šæ–‡æœ¬</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/html-2/"/><id>https://raycoder.me/p/html-2/</id><updated>2020-04-11T16:05:01+08:00</updated><published>2020-04-08T13:19:37+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">HTMLå…¥é—¨å­¦ä¹ äºŒï¼šæ–‡æœ¬</summary><content type="html"><![CDATA[<blockquote>
<p><strong>å†™ä½œä¸æ˜“ï¼Œèµ„ç“·ä¸€ä¸‹å‘—ï¼ä¸ªäººåšå®¢ï¼š<a href="https://raycoder.me">https://raycoder.me</a></strong></p>
</blockquote>
<h2 id="æ™®é€šæ–‡æœ¬">æ™®é€šæ–‡æœ¬</h2>
<h3 id="æ ‡é¢˜">æ ‡é¢˜</h3>
<p>HTMLä¸­çš„æ ‡é¢˜æœ‰å…­ä¸ªçº§åˆ«ï¼š</p>
<h4 id="h1">&lt;h1&gt;</h4>
<p>ç”¨åœ¨ä¸»æ ‡é¢˜ä¸Šã€‚</p>
<h4 id="h2">&lt;h2&gt;</h4>
<p>ç”¨äºäºŒçº§æ ‡é¢˜ä¸Šã€‚</p>
<h4 id="h3">&lt;h3&gt;</h4>
<p>ä»¥æ­¤ç±»æ¨â€¦â€¦</p>
<h4 id="h4">&lt;h4&gt;</h4>
<h4 id="h5">&lt;h5&gt;</h4>
<h4 id="h6">&lt;h6&gt;</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>ä¸€çº§æ ‡é¢˜<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>äºŒçº§æ ‡é¢˜<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>ä¸‰çº§æ ‡é¢˜<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span>å››çº§æ ‡é¢˜<span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h5</span><span class="p">&gt;</span>äº”çº§æ ‡é¢˜<span class="p">&lt;/</span><span class="nt">h5</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h6</span><span class="p">&gt;</span>å…­çº§æ ‡é¢˜<span class="p">&lt;/</span><span class="nt">h6</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>ç»“æœï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200411132736.png" alt=""></p>
<h3 id="æ®µè½">æ®µè½</h3>
<h4 id="p">&lt;p&gt;</h4>
<p>åœ¨æˆæ®µçš„æ–‡å­—ä¸¤ç«¯æ·»åŠ <code>&lt;p&gt;</code>èµ·å§‹æ ‡ç­¾å’Œ<code>&lt;/p&gt;</code>ç»“æŸæ ‡ç­¾å°±æ„æˆäº†HTMLä¸­çš„æ®µè½ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>è¿™æ˜¯ä¸€ä¸ªæ®µè½ï¼<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>è¿™æ˜¯å¦ä¸€ä¸ªæ®µè½ï¼<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>ç»“æœï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200411133205.png" alt=""></p>
<p>ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨ä¼šæŠŠæ®µè½å¦èµ·ä¸€è¡Œæ˜¾ç¤ºå¹¶ä¿æŒä¸€å®šè·ç¦»ã€‚ï¼‰</p>
<h3 id="ç²—ä½“">ç²—ä½“</h3>
<h4 id="b">&lt;b&gt;</h4>
<p>åœ¨<code>&lt;b&gt;</code>èµ·å§‹æ ‡ç­¾ä¸<code>&lt;/b&gt;</code>ç»“æŸæ ‡ç­¾ä¸­çš„æ–‡å­—æ˜¾ç¤ºä¸ºç²—ä½“ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>è¿™æ˜¯ä¸€ä¸ª<span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;</span>æ®µè½<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;</span>ï¼<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>è¿™æ˜¯<span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;</span>å¦ä¸€ä¸ª<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;</span>æ®µè½ï¼<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>ç»“æœï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200411133919.png" alt=""></p>
<h3 id="æ–œä½“">æ–œä½“</h3>
<h4 id="i">&lt;i&gt;</h4>
<p>åœ¨<code>&lt;i&gt;</code>èµ·å§‹æ ‡ç­¾ä¸<code>&lt;/i&gt;</code>ç»“æŸæ ‡ç­¾ä¸­çš„æ–‡å­—æ˜¾ç¤ºä¸ºæ–œä½“ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>è¿™æ˜¯ä¸€ä¸ª<span class="p">&lt;</span><span class="nt">i</span><span class="p">&gt;</span>æ®µè½<span class="p">&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>ï¼<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>è¿™æ˜¯<span class="p">&lt;</span><span class="nt">i</span><span class="p">&gt;</span>å¦ä¸€ä¸ª<span class="p">&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>æ®µè½ï¼<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>ç»“æœï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200411134209.png" alt=""></p>
<h3 id="ä¸Šä¸‹æ ‡">ä¸Šä¸‹æ ‡</h3>
<h4 id="ä¸Šæ ‡sup">ä¸Šæ ‡&lt;sup&gt;</h4>
<p>åœ¨<code>&lt;sup&gt;</code>èµ·å§‹æ ‡ç­¾ä¸<code>&lt;/sup&gt;</code>ç»“æŸæ ‡ç­¾ä¸­çš„æ–‡å­—æ˜¾ç¤ºä¸ºä¸Šæ ‡ï¼Œå¦‚<code>2&lt;sup&gt;2&lt;/sup&gt;</code>=2<sup>2</sup>ã€‚</p>
<h4 id="ä¸‹æ ‡sub">ä¸‹æ ‡&lt;sub&gt;</h4>
<p>åœ¨<code>&lt;sub&gt;</code>èµ·å§‹æ ‡ç­¾ä¸<code>&lt;/sub&gt;</code>ç»“æŸæ ‡ç­¾ä¸­çš„æ–‡å­—æ˜¾ç¤ºä¸ºä¸Šæ ‡ï¼Œå¦‚<code>H&lt;sub&gt;2&lt;/sub&gt;O</code>=H<sub>2</sub>Oã€‚</p>
<h3 id="æ¢è¡Œç¬¦å’Œæ°´å¹³çº¿">æ¢è¡Œç¬¦å’Œæ°´å¹³çº¿</h3>
<h4 id="æ¢è¡Œç¬¦br-">æ¢è¡Œç¬¦&lt;br /&gt;</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html">åœ°çƒ<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>æ¯å¤©ç»•ç€<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>å¤ªé˜³è½¬ã€‚
</code></pre></td></tr></table>
</div>
</div><p>ç»“æœï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200411134916.png" alt=""></p>
<p>å½“ç„¶ï¼Œè¿™ä¸ª<code> /</code>å¯ä»¥ç•¥å»ä¸å†™ï¼Œå†™æˆ<code>&lt;br&gt;</code>ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<h3 id="æ°´å¹³çº¿hr-">æ°´å¹³çº¿&lt;hr /&gt;</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html">Rayæ˜¯ä¸€ä¸ª<span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>å¤§æ°µB
</code></pre></td></tr></table>
</div>
</div><p>ç»“æœï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200411135247.png" alt=""></p>
<p>åŒç†ï¼Œè¿™ä¸ª<code> /</code>ä¹Ÿå¯ä»¥ç•¥å»ä¸å†™ï¼Œå†™æˆ<code>&lt;hr&gt;</code>ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<h2 id="è¯­ä¹‰åŒ–æ ‡è®°">è¯­ä¹‰åŒ–æ ‡è®°</h2>
]]></content><category scheme="https://raycoder.me/categories/html/" term="HTML" label="HTML"/><category scheme="https://raycoder.me/categories/html%E5%85%A5%E9%97%A8/" term="HTMLå…¥é—¨" label="HTMLå…¥é—¨"/><category scheme="https://raycoder.me/tags/html/" term="HTML" label="HTML"/><category scheme="https://raycoder.me/tags/html%E5%85%A5%E9%97%A8/" term="HTMLå…¥é—¨" label="HTMLå…¥é—¨"/></entry><entry><title type="text">æ—¥æœ¬å°å“¥çš„CPUæ–™ç†ï¼</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/cooking-with-cpu/"/><id>https://raycoder.me/p/cooking-with-cpu/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-04-08T09:55:44+08:00</published><summary type="html">â€¦â€¦</summary><content type="html"><![CDATA[<div id="player"></div>
<script type="text/javascript" src="https://player.dogecloud.com/js/loader"></script>
<script type="text/javascript">
var player = new DogePlayer({
    container: document.getElementById('player'),
    userId: 1136,
    vcode: '879d7b8fc1f339c9',
    autoPlay: false,
    plcode: '6d31ac05894d4627'
});
</script>]]></content><category scheme="https://raycoder.me/categories/%E6%90%9E%E7%AC%91/" term="æç¬‘" label="æç¬‘"/><category scheme="https://raycoder.me/tags/%E6%97%A5%E5%B8%B8/" term="æ—¥å¸¸" label="æ—¥å¸¸"/><category scheme="https://raycoder.me/tags/%E6%90%9E%E7%AC%91/" term="æç¬‘" label="æç¬‘"/><category scheme="https://raycoder.me/tags/cpu/" term="CPU" label="CPU"/></entry><entry><title type="text">HTMLå…¥é—¨(ä¸€)ï¼šç»“æ„</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/html-1/"/><id>https://raycoder.me/p/html-1/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-04-07T08:51:02+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">HTMLå…¥é—¨(ä¸€)</summary><content type="html"><![CDATA[<blockquote>
<p><strong>å†™ä½œä¸æ˜“ï¼Œèµ„ç“·ä¸€ä¸‹å‘—ï¼ä¸ªäººåšå®¢ï¼š<a href="https://raycoder.me">https://raycoder.me</a></strong></p>
<p><strong>æœ¬æ–‡é¦–å‘äº<a href="https://raycoder.me/p/html-1/">Ray's Blog</a></strong></p>
</blockquote>
<h3 id="wordæ–‡æ¡£çš„ç»“æ„">Wordæ–‡æ¡£çš„ç»“æ„</h3>
<p>ä»»ä½•æ–‡æ¡£ä¸­æ ‡é¢˜å’Œå­æ ‡é¢˜éƒ½åæ˜ å‡ºä¿¡æ¯çš„å±‚æ¬¡æ€§ã€‚æ ‡é¢˜åé¢å¯èƒ½è·Ÿç€æ–‡æ¡£ç®€ä»‹æˆ–æ˜¯æ–‡æ¡£ä¸­æœ€é‡è¦çš„ä¿¡æ¯ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªWordæ–‡æ¡£ç¤ºä¾‹ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200407085907.png" alt=""></p>
<p>ä»è¿™é‡Œæˆ‘ä»¬ç†è§£åˆ°äº†Wordæ–‡æ¡£ä¸­ç»“æ„çš„è¿ç”¨å¯¹ç†è§£æ–‡æ¡£çš„å¸®åŠ©ï¼Œç¼–å†™ç½‘é¡µçš„æ—¶å€™ï¼Œé“ç†æ˜¯ä¸€æ ·çš„ã€‚</p>
<h3 id="htmlæ–‡æ¡£çš„ç»“æ„">HTMLæ–‡æ¡£çš„ç»“æ„</h3>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200407090301.png" alt=""></p>
<h4 id="htmlä½¿ç”¨å…ƒç´ æè¿°ç»“æ„">HTMLä½¿ç”¨å…ƒç´ æè¿°ç»“æ„</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span><span class="c">&lt;!--HTMLä»£ç çš„å¼€å§‹--&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span><span class="c">&lt;!--ä¸ç»“æŸæ ‡ç­¾ä¸­çš„å†…å®¹æ˜¾ç¤ºåœ¨æµè§ˆå™¨ä¸»çª—å£ä¸­--&gt;</span>
		<span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>ä¸€çº§æ ‡é¢˜<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span><span class="c">&lt;!--ä¸»æ ‡é¢˜--&gt;</span>
		<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>æ™®é€šæ–‡æœ¬<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span><span class="c">&lt;!--æˆæ®µçš„æ–‡å­—--&gt;</span>
        <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>äºŒçº§æ ‡é¢˜<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
		<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>å¦ä¸€æ®µæ™®é€šæ–‡æœ¬<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
		<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>åˆä¸€ä¸ªäºŒçº§æ ‡é¢˜<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
		<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>åˆä¸€æ®µæ™®é€šæ–‡æœ¬<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
	<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="è¿›ä¸€æ­¥åˆ†ææ ‡ç­¾">è¿›ä¸€æ­¥åˆ†ææ ‡ç­¾</h4>
<p>HTMLä»£ç ç”±åŒ…å«åœ¨å°–æ‹¬å·é‡Œçš„å­—ç¬¦æ„æˆï¼Œè¿™äº›ä»£ç ç§°ä¸º<code>HTMLå…ƒç´ </code>ã€‚å…ƒç´ é€šå¸¸ç”±ä¸¤ä¸ªæ ‡ç­¾ç»„æˆï¼šä¸€ä¸ªå…¶å®æ ‡ç­¾å’Œä¸€ä¸ªç»“æŸæ ‡ç­¾ã€‚</p>
<p>HTMLæ ‡ç­¾çš„ç»“æ„å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html">     èµ·å§‹æ ‡ç­¾              ç»“æŸæ ‡ç­¾
<span class="p">&lt;</span>      <span class="nt">p</span>       <span class="p">&gt;</span>      <span class="p">&lt;</span> <span class="p">/</span>    <span class="nt">p</span>     <span class="p">&gt;</span>
å·¦å°–   ç”¨é€”     å³å°–     æ–œæ   å­—ç¬¦
æ‹¬å· è¿™é‡Œæ˜¯æ®µè½  æ‹¬å·
</code></pre></td></tr></table>
</div>
</div><h4 id="æ ‡ç­¾çš„ç‰¹æ€§">æ ‡ç­¾çš„ç‰¹æ€§</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">p</span> <span class="na">lang   </span><span class="o">=</span>  <span class="s">&#34;zh-cn&#34;</span><span class="p">&gt;</span>ä¸€ä¸ªä¸­æ–‡æ®µè½<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
   ç‰¹æ€§åç§°    ç‰¹æ€§å€¼
</code></pre></td></tr></table>
</div>
</div><h4 id="bodyheadå’Œtitle">&lt;body&gt;ã€&lt;head&gt;å’Œ&lt;title&gt;</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
	<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
		<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>é¡µé¢çš„æ ‡é¢˜<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
	<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
	<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
		<span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>è¿™æ˜¯é¡µé¢çš„æ­£æ–‡<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
		<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>ç½‘é¡µæ­£æ–‡ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½ä¼šæ˜¾ç¤ºåœ¨ä¸»æµè§ˆå™¨çª—å£ä¸­ã€‚<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
	<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><h5 id="body">&lt;body&gt;</h5>
<p>åœ¨æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªç¤ºä¾‹é¡µé¢ä¸­ï¼Œæˆ‘ä»¬å°±çœ‹åˆ°äº†<code>&lt;body</code>&gt;å…ƒç´ ã€‚è¿™ä¸ªå…ƒç´ ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½ä¼šæ˜¾ç¤ºåœ¨æµè§ˆå™¨çš„ä¸»çª—å£ä¸­ã€‚</p>
<h5 id="head">&lt;head&gt;</h5>
<p>åœ¨<code>&lt;body&gt;</code>å…ƒç´ çš„å‰é¢ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šçœ‹åˆ°<code>&lt;head&gt;</code>æ ‡ç­¾â€”â€”å®ƒåŒ…å«äº†æœ‰å…³è¿™ä¸ªé¡µé¢çš„ä¸€äº›ä¿¡æ¯ã€‚æˆ‘ä»¬ç»å¸¸ä¼šåœ¨è¿™é‡Œçœ‹åˆ°<code>&lt;title&gt;</code>å…ƒç´ ã€‚</p>
<h5 id="title">&lt;title&gt;</h5>
<p><code>&lt;title&gt;</code>å…ƒç´ è®¾ç½®è¿™ä¸ªé¡µé¢çš„æ ‡é¢˜ã€‚</p>
]]></content><category scheme="https://raycoder.me/categories/html/" term="HTML" label="HTML"/><category scheme="https://raycoder.me/categories/html%E5%85%A5%E9%97%A8/" term="HTMLå…¥é—¨" label="HTMLå…¥é—¨"/><category scheme="https://raycoder.me/tags/html/" term="HTML" label="HTML"/><category scheme="https://raycoder.me/tags/html%E5%85%A5%E9%97%A8/" term="HTMLå…¥é—¨" label="HTMLå…¥é—¨"/><category scheme="https://raycoder.me/tags/html%E7%BB%93%E6%9E%84/" term="HTMLç»“æ„" label="HTMLç»“æ„"/></entry><entry><title type="text">ä¸‡èƒ½çš„CLOUDFLARE WORKERS+JSProxyä»£ç†ï¼Ÿï¼</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/cf-worker-proxy/"/><id>https://raycoder.me/p/cf-worker-proxy/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-04-02T16:48:52+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">ä½¿ç”¨CLOUDFLARE WORKERSæ­å»ºä»£ç†ã€CDN</summary><content type="html"><![CDATA[<blockquote>
<p><strong>å†™ä½œä¸æ˜“ï¼Œèµ„ç“·ä¸€ä¸‹å‘—ï¼ä¸ªäººåšå®¢ï¼š<a href="https://raycoder.me">https://raycoder.me</a></strong></p>
<p><strong>æœ¬æ–‡é¦–å‘äº<a href="https://raycoder.me/p/cf-worker-proxy/">Ray's Blog</a></strong></p>
</blockquote>
<p>ä¸ç’ä½ ä»¬è¯´ï¼Œæˆ‘çœ‹åˆ°è¿™ä¸ªé¡¹ç›®çš„æ—¶å€™éƒ½éœ‡ï¼ˆæ™ºï¼‰æƒŠï¼ˆéšœï¼‰äº†ï¼è´´ä¸Šé“¾æ¥ï¼š<a href="https://github.com/EtherDream/jsproxy">EtherDream / jsproxy | Github</a>ä½ çŒœè¿™ä¸ªé¡¹ç›®æ˜¯åšä»€ä¹ˆçš„ï¼Ÿä½¿ç”¨<a href="https://workers.cloudflare.com"><code>Cloudflare workers</code></a>è¿›è¡Œ<em class="emphasis-point">åå‘ä»£ç†</em>ï¼ï¼ï¼</p>
<p><img src="https://cdngh.raycoder.me/imgs/20200403091318.jpg" alt=""></p>
<p>å…ˆé™„ä¸Šä¸€ä¸ªç½‘å€ã€‚<a href="https://yt.raycoder.me">https://yt.raycoder.me</a>ï¼Œè¿™æ˜¯æˆ‘å¼„çš„ä¸€ä¸ªYouTubeä»£ç†ç½‘å€ã€‚è¿™ä¸ªçœŸçš„åªä½¿ç”¨äº†<code>Cloudflare Workers</code>è¿›è¡Œä»£ç†ï¼Œæˆ‘æ˜¯æ²¡æœ‰åšä»»ä½•å…¶å®ƒé…ç½®çš„ã€‚ä½ ä¹Ÿå¯ä»¥æŠŠè¿™å½“åšä¸€ä¸ªcdnæ¥ç”¨â€”â€”cloudflareå…è´¹ç‰ˆä¸ç»™ä½ å›½å†…çš„èŠ‚ç‚¹ï¼Œä½†æ˜¯Workersæœ‰å•Šï¼ä¸€ä¸ªæœˆ10ä¸‡çš„è¯·æ±‚æ•°é‡å®Œå…¨å¤Ÿç”¨äº†ã€‚ï¼ˆä½ ä»¬å¯èƒ½å‘ç°æˆ‘çš„ç«™å˜å¿«äº†ï¼Œå› ä¸ºæˆ‘ä¹Ÿç”¨äº†ï¼‰</p>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªCloudflareè´¦å·ï¼Œè‡ªå·±æ³¨å†Œï¼Œå†æŠŠä½ çš„åŸŸå<code>NS</code>æœåŠ¡å™¨æ¢æˆCFç»™ä½ çš„ã€‚0ç„¶åç‚¹å‡»ä¸Šé¢è´´å‡ºçš„workersåœ°å€ï¼Œç‚¹å‡»&quot;Start Building&quot;ï¼ŒæŒ‰ç…§æµç¨‹é…ç½®å¥½ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200402170525.png" alt=""></p>
<p>ç„¶åä¼šè·³è½¬åˆ°ä½ çš„æ§åˆ¶å°ç•Œé¢ï¼Œç‚¹è¿›å»ï¼Œé€‰æ‹©<code>Workers</code>ï¼š</p>
<p><img src="https://cdngh.raycoder.me/imgs/20200402170620.png" alt=""></p>
<p>ç‚¹å‡»<code>Manage Workers</code>ï¼Œä½ ä¼šè§åˆ°ä¸€ä¸ªç±»ä¼¼äºè¿™æ ·çš„é¡µé¢ã€‚</p>
<p><img src="https://cdngh.raycoder.me/imgs/20200402170832.png" alt=""></p>
<p>ç„¶åæŠŠè¿™ä¸²JSä»£ç è´´è¿›å»ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="s1">&#39;use strict&#39;</span>

<span class="cm">/**
</span><span class="cm"> * static files (404.html, sw.js, conf.js)
</span><span class="cm"> */</span>
<span class="kr">const</span> <span class="nx">ASSET_URL</span> <span class="o">=</span> <span class="s1">&#39;&lt;YOUR_URL&gt;&#39;</span>

<span class="kr">const</span> <span class="nx">JS_VER</span> <span class="o">=</span> <span class="mi">10</span>
<span class="kr">const</span> <span class="nx">MAX_RETRY</span> <span class="o">=</span> <span class="mi">1</span>

<span class="cm">/** @type {RequestInit} */</span>
<span class="kr">const</span> <span class="nx">PREFLIGHT_INIT</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">status</span><span class="o">:</span> <span class="mi">204</span><span class="p">,</span>
  <span class="nx">headers</span><span class="o">:</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">({</span>
    <span class="s1">&#39;access-control-allow-origin&#39;</span><span class="o">:</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span>
    <span class="s1">&#39;access-control-allow-methods&#39;</span><span class="o">:</span> <span class="s1">&#39;GET,POST,PUT,PATCH,TRACE,DELETE,HEAD,OPTIONS&#39;</span><span class="p">,</span>
    <span class="s1">&#39;access-control-max-age&#39;</span><span class="o">:</span> <span class="s1">&#39;1728000&#39;</span><span class="p">,</span>
  <span class="p">}),</span>
<span class="p">}</span>

<span class="cm">/**
</span><span class="cm"> * @param {any} body
</span><span class="cm"> * @param {number} status
</span><span class="cm"> * @param {Object&lt;string, string&gt;} headers
</span><span class="cm"> */</span>
<span class="kd">function</span> <span class="nx">makeRes</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="nx">status</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
  <span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;--ver&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">JS_VER</span>
  <span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;access-control-allow-origin&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="p">{</span><span class="nx">status</span><span class="p">,</span> <span class="nx">headers</span><span class="p">})</span>
<span class="p">}</span>


<span class="cm">/**
</span><span class="cm"> * @param {string} urlStr 
</span><span class="cm"> */</span>
<span class="kd">function</span> <span class="nx">newUrl</span><span class="p">(</span><span class="nx">urlStr</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">URL</span><span class="p">(</span><span class="nx">urlStr</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">null</span>
  <span class="p">}</span>
<span class="p">}</span>


<span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;fetch&#39;</span><span class="p">,</span> <span class="nx">e</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">fetchHandler</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="p">=&gt;</span> <span class="nx">makeRes</span><span class="p">(</span><span class="s1">&#39;cfworker error:\n&#39;</span> <span class="o">+</span> <span class="nx">err</span><span class="p">.</span><span class="nx">stack</span><span class="p">,</span> <span class="mi">502</span><span class="p">))</span>
  <span class="nx">e</span><span class="p">.</span><span class="nx">respondWith</span><span class="p">(</span><span class="nx">ret</span><span class="p">)</span>
<span class="p">})</span>


<span class="cm">/**
</span><span class="cm"> * @param {FetchEvent} e 
</span><span class="cm"> */</span>
<span class="nx">async</span> <span class="kd">function</span> <span class="nx">fetchHandler</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">request</span>
  <span class="kr">const</span> <span class="nx">urlStr</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">url</span>
  <span class="kr">const</span> <span class="nx">urlObj</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">URL</span><span class="p">(</span><span class="nx">urlStr</span><span class="p">)</span>
  <span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">urlObj</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">urlObj</span><span class="p">.</span><span class="nx">origin</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">urlObj</span><span class="p">.</span><span class="nx">protocol</span> <span class="o">===</span> <span class="s1">&#39;http:&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">urlObj</span><span class="p">.</span><span class="nx">protocol</span> <span class="o">=</span> <span class="s1">&#39;https:&#39;</span>
    <span class="k">return</span> <span class="nx">makeRes</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">301</span><span class="p">,</span> <span class="p">{</span>
      <span class="s1">&#39;strict-transport-security&#39;</span><span class="o">:</span> <span class="s1">&#39;max-age=99999999; includeSubDomains; preload&#39;</span><span class="p">,</span>
      <span class="s1">&#39;location&#39;</span><span class="o">:</span> <span class="nx">urlObj</span><span class="p">.</span><span class="nx">href</span><span class="p">,</span>
    <span class="p">})</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="s1">&#39;/http/&#39;</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">httpHandler</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">path</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>
  <span class="p">}</span>

  <span class="k">switch</span> <span class="p">(</span><span class="nx">path</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">case</span> <span class="s1">&#39;/http&#39;</span><span class="o">:</span>
    <span class="k">return</span> <span class="nx">makeRes</span><span class="p">(</span><span class="s1">&#39;è¯·æ›´æ–° cfworker åˆ°æœ€æ–°ç‰ˆæœ¬!&#39;</span><span class="p">)</span>
  <span class="k">case</span> <span class="s1">&#39;/ws&#39;</span><span class="o">:</span>
    <span class="k">return</span> <span class="nx">makeRes</span><span class="p">(</span><span class="s1">&#39;not support&#39;</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span>
  <span class="k">case</span> <span class="s1">&#39;/works&#39;</span><span class="o">:</span>
    <span class="k">return</span> <span class="nx">makeRes</span><span class="p">(</span><span class="s1">&#39;it works&#39;</span><span class="p">)</span>
  <span class="k">default</span><span class="o">:</span>
    <span class="c1">// static files
</span><span class="c1"></span>    <span class="k">return</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">ASSET_URL</span> <span class="o">+</span> <span class="nx">path</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>


<span class="cm">/**
</span><span class="cm"> * @param {Request} req
</span><span class="cm"> * @param {string} pathname
</span><span class="cm"> */</span>
<span class="kd">function</span> <span class="nx">httpHandler</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">pathname</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">reqHdrRaw</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">headers</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">reqHdrRaw</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="s1">&#39;x-jsproxy&#39;</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">Response</span><span class="p">.</span><span class="nx">error</span><span class="p">()</span>
  <span class="p">}</span>

  <span class="c1">// preflight
</span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">method</span> <span class="o">===</span> <span class="s1">&#39;OPTIONS&#39;</span> <span class="o">&amp;&amp;</span>
      <span class="nx">reqHdrRaw</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="s1">&#39;access-control-request-headers&#39;</span><span class="p">)</span>
  <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">PREFLIGHT_INIT</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="kd">let</span> <span class="nx">acehOld</span> <span class="o">=</span> <span class="kc">false</span>
  <span class="kd">let</span> <span class="nx">rawSvr</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
  <span class="kd">let</span> <span class="nx">rawLen</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
  <span class="kd">let</span> <span class="nx">rawEtag</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

  <span class="kr">const</span> <span class="nx">reqHdrNew</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">(</span><span class="nx">reqHdrRaw</span><span class="p">)</span>
  <span class="nx">reqHdrNew</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;x-jsproxy&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>

  <span class="c1">// æ­¤å¤„é€»è¾‘å’Œ http-dec-req-hdr.lua å¤§è‡´ç›¸åŒ
</span><span class="c1"></span>  <span class="c1">// https://github.com/EtherDream/jsproxy/blob/master/lua/http-dec-req-hdr.lua
</span><span class="c1"></span>  <span class="kr">const</span> <span class="nx">refer</span> <span class="o">=</span> <span class="nx">reqHdrNew</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;referer&#39;</span><span class="p">)</span>
  <span class="kr">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="nx">refer</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">refer</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;?&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">query</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">makeRes</span><span class="p">(</span><span class="s1">&#39;missing params&#39;</span><span class="p">,</span> <span class="mi">403</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="kr">const</span> <span class="nx">param</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">URLSearchParams</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span>

  <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="p">[</span><span class="nx">k</span><span class="p">,</span> <span class="nx">v</span><span class="p">]</span> <span class="k">of</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">entries</span><span class="p">(</span><span class="nx">param</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">k</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;--&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// ç³»ç»Ÿä¿¡æ¯
</span><span class="c1"></span>      <span class="k">switch</span> <span class="p">(</span><span class="nx">k</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">case</span> <span class="s1">&#39;aceh&#39;</span><span class="o">:</span>
        <span class="nx">acehOld</span> <span class="o">=</span> <span class="kc">true</span>
        <span class="k">break</span>
      <span class="k">case</span> <span class="s1">&#39;raw-info&#39;</span><span class="o">:</span>
        <span class="p">[</span><span class="nx">rawSvr</span><span class="p">,</span> <span class="nx">rawLen</span><span class="p">,</span> <span class="nx">rawEtag</span><span class="p">]</span> <span class="o">=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;|&#39;</span><span class="p">)</span>
        <span class="k">break</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="c1">// è¿˜åŸ HTTP è¯·æ±‚å¤´
</span><span class="c1"></span>      <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">reqHdrNew</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">k</span><span class="p">,</span> <span class="nx">v</span><span class="p">)</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">reqHdrNew</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">param</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="s1">&#39;referer&#39;</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">reqHdrNew</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s1">&#39;referer&#39;</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="c1">// cfworker ä¼šæŠŠè·¯å¾„ä¸­çš„ `//` åˆå¹¶æˆ `/`
</span><span class="c1"></span>  <span class="kr">const</span> <span class="nx">urlStr</span> <span class="o">=</span> <span class="nx">pathname</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^(https?):\/+/</span><span class="p">,</span> <span class="s1">&#39;$1://&#39;</span><span class="p">)</span>
  <span class="kr">const</span> <span class="nx">urlObj</span> <span class="o">=</span> <span class="nx">newUrl</span><span class="p">(</span><span class="nx">urlStr</span><span class="p">)</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">urlObj</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">makeRes</span><span class="p">(</span><span class="s1">&#39;invalid proxy url: &#39;</span> <span class="o">+</span> <span class="nx">urlStr</span><span class="p">,</span> <span class="mi">403</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="cm">/** @type {RequestInit} */</span>
  <span class="kr">const</span> <span class="nx">reqInit</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">method</span><span class="o">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">method</span><span class="p">,</span>
    <span class="nx">headers</span><span class="o">:</span> <span class="nx">reqHdrNew</span><span class="p">,</span>
    <span class="nx">redirect</span><span class="o">:</span> <span class="s1">&#39;manual&#39;</span><span class="p">,</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">method</span> <span class="o">===</span> <span class="s1">&#39;POST&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">reqInit</span><span class="p">.</span><span class="nx">body</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">proxy</span><span class="p">(</span><span class="nx">urlObj</span><span class="p">,</span> <span class="nx">reqInit</span><span class="p">,</span> <span class="nx">acehOld</span><span class="p">,</span> <span class="nx">rawLen</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">}</span>


<span class="cm">/**
</span><span class="cm"> * 
</span><span class="cm"> * @param {URL} urlObj 
</span><span class="cm"> * @param {RequestInit} reqInit 
</span><span class="cm"> * @param {number} retryTimes 
</span><span class="cm"> */</span>
<span class="nx">async</span> <span class="kd">function</span> <span class="nx">proxy</span><span class="p">(</span><span class="nx">urlObj</span><span class="p">,</span> <span class="nx">reqInit</span><span class="p">,</span> <span class="nx">acehOld</span><span class="p">,</span> <span class="nx">rawLen</span><span class="p">,</span> <span class="nx">retryTimes</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">urlObj</span><span class="p">.</span><span class="nx">href</span><span class="p">,</span> <span class="nx">reqInit</span><span class="p">)</span>
  <span class="kr">const</span> <span class="nx">resHdrOld</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">headers</span>
  <span class="kr">const</span> <span class="nx">resHdrNew</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">(</span><span class="nx">resHdrOld</span><span class="p">)</span>

  <span class="kd">let</span> <span class="nx">expose</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span>
  
  <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="p">[</span><span class="nx">k</span><span class="p">,</span> <span class="nx">v</span><span class="p">]</span> <span class="k">of</span> <span class="nx">resHdrOld</span><span class="p">.</span><span class="nx">entries</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">k</span> <span class="o">===</span> <span class="s1">&#39;access-control-allow-origin&#39;</span> <span class="o">||</span>
        <span class="nx">k</span> <span class="o">===</span> <span class="s1">&#39;access-control-expose-headers&#39;</span> <span class="o">||</span>
        <span class="nx">k</span> <span class="o">===</span> <span class="s1">&#39;location&#39;</span> <span class="o">||</span>
        <span class="nx">k</span> <span class="o">===</span> <span class="s1">&#39;set-cookie&#39;</span>
    <span class="p">)</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="s1">&#39;--&#39;</span> <span class="o">+</span> <span class="nx">k</span>
      <span class="nx">resHdrNew</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">v</span><span class="p">)</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">acehOld</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">expose</span> <span class="o">=</span> <span class="nx">expose</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nx">x</span>
      <span class="p">}</span>
      <span class="nx">resHdrNew</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">acehOld</span> <span class="o">&amp;&amp;</span>
      <span class="nx">k</span> <span class="o">!==</span> <span class="s1">&#39;cache-control&#39;</span> <span class="o">&amp;&amp;</span>
      <span class="nx">k</span> <span class="o">!==</span> <span class="s1">&#39;content-language&#39;</span> <span class="o">&amp;&amp;</span>
      <span class="nx">k</span> <span class="o">!==</span> <span class="s1">&#39;content-type&#39;</span> <span class="o">&amp;&amp;</span>
      <span class="nx">k</span> <span class="o">!==</span> <span class="s1">&#39;expires&#39;</span> <span class="o">&amp;&amp;</span>
      <span class="nx">k</span> <span class="o">!==</span> <span class="s1">&#39;last-modified&#39;</span> <span class="o">&amp;&amp;</span>
      <span class="nx">k</span> <span class="o">!==</span> <span class="s1">&#39;pragma&#39;</span>
    <span class="p">)</span> <span class="p">{</span>
      <span class="nx">expose</span> <span class="o">=</span> <span class="nx">expose</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nx">k</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">acehOld</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">expose</span> <span class="o">=</span> <span class="nx">expose</span> <span class="o">+</span> <span class="s1">&#39;,--s&#39;</span>
    <span class="nx">resHdrNew</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;--t&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="c1">// verify
</span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">rawLen</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">newLen</span> <span class="o">=</span> <span class="nx">resHdrOld</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;content-length&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span>
    <span class="kr">const</span> <span class="nx">badLen</span> <span class="o">=</span> <span class="p">(</span><span class="nx">rawLen</span> <span class="o">!==</span> <span class="nx">newLen</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">badLen</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">retryTimes</span> <span class="o">&lt;</span> <span class="nx">MAX_RETRY</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">urlObj</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">parseYtVideoRedir</span><span class="p">(</span><span class="nx">urlObj</span><span class="p">,</span> <span class="nx">newLen</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">urlObj</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">proxy</span><span class="p">(</span><span class="nx">urlObj</span><span class="p">,</span> <span class="nx">reqInit</span><span class="p">,</span> <span class="nx">acehOld</span><span class="p">,</span> <span class="nx">rawLen</span><span class="p">,</span> <span class="nx">retryTimes</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">makeRes</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="p">{</span>
        <span class="s1">&#39;--error&#39;</span><span class="o">:</span> <span class="sb">`bad len: </span><span class="si">${</span><span class="nx">newLen</span><span class="si">}</span><span class="sb">, except: </span><span class="si">${</span><span class="nx">rawLen</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
        <span class="s1">&#39;access-control-expose-headers&#39;</span><span class="o">:</span> <span class="s1">&#39;--error&#39;</span><span class="p">,</span>
      <span class="p">})</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">retryTimes</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">resHdrNew</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;--retry&#39;</span><span class="p">,</span> <span class="nx">retryTimes</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">let</span> <span class="nx">status</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span>

  <span class="nx">resHdrNew</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;access-control-expose-headers&#39;</span><span class="p">,</span> <span class="nx">expose</span><span class="p">)</span>
  <span class="nx">resHdrNew</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;access-control-allow-origin&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)</span>
  <span class="nx">resHdrNew</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;--s&#39;</span><span class="p">,</span> <span class="nx">status</span><span class="p">)</span>
  <span class="nx">resHdrNew</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;--ver&#39;</span><span class="p">,</span> <span class="nx">JS_VER</span><span class="p">)</span>

  <span class="nx">resHdrNew</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s1">&#39;content-security-policy&#39;</span><span class="p">)</span>
  <span class="nx">resHdrNew</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s1">&#39;content-security-policy-report-only&#39;</span><span class="p">)</span>
  <span class="nx">resHdrNew</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s1">&#39;clear-site-data&#39;</span><span class="p">)</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">301</span> <span class="o">||</span>
      <span class="nx">status</span> <span class="o">===</span> <span class="mi">302</span> <span class="o">||</span>
      <span class="nx">status</span> <span class="o">===</span> <span class="mi">303</span> <span class="o">||</span>
      <span class="nx">status</span> <span class="o">===</span> <span class="mi">307</span> <span class="o">||</span>
      <span class="nx">status</span> <span class="o">===</span> <span class="mi">308</span>
  <span class="p">)</span> <span class="p">{</span>
    <span class="nx">status</span> <span class="o">=</span> <span class="nx">status</span> <span class="o">+</span> <span class="mi">10</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">status</span><span class="p">,</span>
    <span class="nx">headers</span><span class="o">:</span> <span class="nx">resHdrNew</span><span class="p">,</span>
  <span class="p">})</span>
<span class="p">}</span>


<span class="cm">/**
</span><span class="cm"> * @param {URL} urlObj 
</span><span class="cm"> */</span>
<span class="kd">function</span> <span class="nx">isYtUrl</span><span class="p">(</span><span class="nx">urlObj</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="nx">urlObj</span><span class="p">.</span><span class="nx">host</span><span class="p">.</span><span class="nx">endsWith</span><span class="p">(</span><span class="s1">&#39;.googlevideo.com&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
    <span class="nx">urlObj</span><span class="p">.</span><span class="nx">pathname</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="s1">&#39;/videoplayback&#39;</span><span class="p">)</span>
  <span class="p">)</span>
<span class="p">}</span>

<span class="cm">/**
</span><span class="cm"> * @param {URL} urlObj 
</span><span class="cm"> * @param {number} newLen 
</span><span class="cm"> * @param {Response} res 
</span><span class="cm"> */</span>
<span class="nx">async</span> <span class="kd">function</span> <span class="nx">parseYtVideoRedir</span><span class="p">(</span><span class="nx">urlObj</span><span class="p">,</span> <span class="nx">newLen</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">newLen</span> <span class="o">&gt;</span> <span class="mi">2000</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">null</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isYtUrl</span><span class="p">(</span><span class="nx">urlObj</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">null</span>
  <span class="p">}</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">res</span><span class="p">.</span><span class="nx">text</span><span class="p">()</span>
    <span class="nx">urlObj</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">URL</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">null</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isYtUrl</span><span class="p">(</span><span class="nx">urlObj</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">null</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">urlObj</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­çš„<code>ASSET_URL</code>è¦æ›´æ¢æˆä½ æƒ³è¦ä»£ç†çš„åŸŸåâ€”â€”æ¯”å¦‚æƒ³ä»£ç†YTï¼Œå°±å†™<code>https://youtube.com</code>ã€‚</p>
<p>ç„¶åé€‰æ‹©<code>Save and Deploy</code>ã€‚</p>
<p>å®ƒä¼šç»™ä½ åˆ†é…ä¸€ä¸ªåŸŸåï¼Œä½ å¯ä»¥ä¿®æ”¹æˆä½ æƒ³è¦çš„åŸŸåã€‚æ¯”å¦‚æˆ‘çš„YTä»£ç†å°±æ˜¯<code>https://youtube.&lt;é©¬èµ›å…‹&gt;.workers.dev</code>ã€‚</p>
<p>è‡ªå®šä¹‰åŸŸåï¼Œå…ˆæŠŠä¸€ä¸ªå­åŸŸåCNAMEåˆ°åˆ†é…çš„åŸŸåï¼Œç„¶åé€‰æ‹©<code>Add ruote</code>ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200402172046.png" alt=""></p>
<p>è¿™é‡Œæˆ‘æƒ³è¦æŠŠæˆ‘çš„åŸŸåè§£æåˆ°<code>rb</code>è¿™ä¸ªWorkerï¼Œæˆ‘å°±å¡«å†™<code>https://raycoder.me/*</code>ï¼Œé€‰æ‹©<code>rb</code>è¿™ä¸ªWorkerï¼Œä¿å­˜ã€‚</p>
<p><img src="https://cdngh.raycoder.me/imgs/20200402172138.png" alt=""></p>
<p>è¿™å°±å¼•ç”³å‡ºäº†ä¸€ä¸ªç”¨æ³•â€”â€”æ‹¿æ¥å½“ä½œç½‘ç«™CDNï¼Œæˆ–è€…æ˜¯å›¾åºŠCDNï¼ˆæ— éœ€jsDelivrï¼‰ã€‚æˆ‘ç°åœ¨çš„CDNå°±æ˜¯è¿™ä¸ªæ­å»ºçš„ã€‚</p>
<p>ç»“æœï¼š</p>
<p><img src="https://cdngh.raycoder.me/imgs/20200403091606.png" alt=""></p>
<p>å½“ç„¶äººå®¶æ‹’ç»äº†æˆ‘ä»¬<code>cloudflare-nginx</code>çš„è®¿é—®ä¹Ÿæ²¡æ³•å­â€‹ğŸ™ƒâ€‹</p>
<p>æ„‰å¿«çš„è®¿é—®å§ï¼</p>
<p><img src="https://cdngh.raycoder.me/imgs/20200403091351.jpg" alt=""></p>
<p><strong>æ³¨æ„ï¼æœ¬æ•™ç¨‹ä»…ä¾›ä¸ªäººå­¦ä¹ ä½¿ç”¨ï¼</strong></p>
<hr>
<p>2020/04/03æ›´æ–°ï¼š</p>
<p>å»ºè®®ä¿æŒåŸå§‹ä»£ç ï¼Œé«˜é€Ÿè®¿é—®å¤–ç½‘ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="s1">&#39;use strict&#39;</span>

<span class="cm">/**
</span><span class="cm"> * static files (404.html, sw.js, conf.js)
</span><span class="cm"> */</span>
<span class="kr">const</span> <span class="nx">ASSET_URL</span> <span class="o">=</span> <span class="s1">&#39;https://etherdream.github.io/jsproxy&#39;</span>

<span class="kr">const</span> <span class="nx">JS_VER</span> <span class="o">=</span> <span class="mi">10</span>
<span class="kr">const</span> <span class="nx">MAX_RETRY</span> <span class="o">=</span> <span class="mi">1</span>

<span class="cm">/** @type {RequestInit} */</span>
<span class="kr">const</span> <span class="nx">PREFLIGHT_INIT</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">status</span><span class="o">:</span> <span class="mi">204</span><span class="p">,</span>
  <span class="nx">headers</span><span class="o">:</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">({</span>
    <span class="s1">&#39;access-control-allow-origin&#39;</span><span class="o">:</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span>
    <span class="s1">&#39;access-control-allow-methods&#39;</span><span class="o">:</span> <span class="s1">&#39;GET,POST,PUT,PATCH,TRACE,DELETE,HEAD,OPTIONS&#39;</span><span class="p">,</span>
    <span class="s1">&#39;access-control-max-age&#39;</span><span class="o">:</span> <span class="s1">&#39;1728000&#39;</span><span class="p">,</span>
  <span class="p">}),</span>
<span class="p">}</span>

<span class="cm">/**
</span><span class="cm"> * @param {any} body
</span><span class="cm"> * @param {number} status
</span><span class="cm"> * @param {Object&lt;string, string&gt;} headers
</span><span class="cm"> */</span>
<span class="kd">function</span> <span class="nx">makeRes</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="nx">status</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
  <span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;--ver&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">JS_VER</span>
  <span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;access-control-allow-origin&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="p">{</span><span class="nx">status</span><span class="p">,</span> <span class="nx">headers</span><span class="p">})</span>
<span class="p">}</span>


<span class="cm">/**
</span><span class="cm"> * @param {string} urlStr 
</span><span class="cm"> */</span>
<span class="kd">function</span> <span class="nx">newUrl</span><span class="p">(</span><span class="nx">urlStr</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">URL</span><span class="p">(</span><span class="nx">urlStr</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">null</span>
  <span class="p">}</span>
<span class="p">}</span>


<span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;fetch&#39;</span><span class="p">,</span> <span class="nx">e</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">fetchHandler</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="p">=&gt;</span> <span class="nx">makeRes</span><span class="p">(</span><span class="s1">&#39;cfworker error:\n&#39;</span> <span class="o">+</span> <span class="nx">err</span><span class="p">.</span><span class="nx">stack</span><span class="p">,</span> <span class="mi">502</span><span class="p">))</span>
  <span class="nx">e</span><span class="p">.</span><span class="nx">respondWith</span><span class="p">(</span><span class="nx">ret</span><span class="p">)</span>
<span class="p">})</span>


<span class="cm">/**
</span><span class="cm"> * @param {FetchEvent} e 
</span><span class="cm"> */</span>
<span class="nx">async</span> <span class="kd">function</span> <span class="nx">fetchHandler</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">request</span>
  <span class="kr">const</span> <span class="nx">urlStr</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">url</span>
  <span class="kr">const</span> <span class="nx">urlObj</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">URL</span><span class="p">(</span><span class="nx">urlStr</span><span class="p">)</span>
  <span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">urlObj</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">urlObj</span><span class="p">.</span><span class="nx">origin</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">urlObj</span><span class="p">.</span><span class="nx">protocol</span> <span class="o">===</span> <span class="s1">&#39;http:&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">urlObj</span><span class="p">.</span><span class="nx">protocol</span> <span class="o">=</span> <span class="s1">&#39;https:&#39;</span>
    <span class="k">return</span> <span class="nx">makeRes</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">301</span><span class="p">,</span> <span class="p">{</span>
      <span class="s1">&#39;strict-transport-security&#39;</span><span class="o">:</span> <span class="s1">&#39;max-age=99999999; includeSubDomains; preload&#39;</span><span class="p">,</span>
      <span class="s1">&#39;location&#39;</span><span class="o">:</span> <span class="nx">urlObj</span><span class="p">.</span><span class="nx">href</span><span class="p">,</span>
    <span class="p">})</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="s1">&#39;/http/&#39;</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">httpHandler</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">path</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>
  <span class="p">}</span>

  <span class="k">switch</span> <span class="p">(</span><span class="nx">path</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">case</span> <span class="s1">&#39;/http&#39;</span><span class="o">:</span>
    <span class="k">return</span> <span class="nx">makeRes</span><span class="p">(</span><span class="s1">&#39;è¯·æ›´æ–° cfworker åˆ°æœ€æ–°ç‰ˆæœ¬!&#39;</span><span class="p">)</span>
  <span class="k">case</span> <span class="s1">&#39;/ws&#39;</span><span class="o">:</span>
    <span class="k">return</span> <span class="nx">makeRes</span><span class="p">(</span><span class="s1">&#39;not support&#39;</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span>
  <span class="k">case</span> <span class="s1">&#39;/works&#39;</span><span class="o">:</span>
    <span class="k">return</span> <span class="nx">makeRes</span><span class="p">(</span><span class="s1">&#39;it works&#39;</span><span class="p">)</span>
  <span class="k">default</span><span class="o">:</span>
    <span class="c1">// static files
</span><span class="c1"></span>    <span class="k">return</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">ASSET_URL</span> <span class="o">+</span> <span class="nx">path</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>


<span class="cm">/**
</span><span class="cm"> * @param {Request} req
</span><span class="cm"> * @param {string} pathname
</span><span class="cm"> */</span>
<span class="kd">function</span> <span class="nx">httpHandler</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">pathname</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">reqHdrRaw</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">headers</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">reqHdrRaw</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="s1">&#39;x-jsproxy&#39;</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">Response</span><span class="p">.</span><span class="nx">error</span><span class="p">()</span>
  <span class="p">}</span>

  <span class="c1">// preflight
</span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">method</span> <span class="o">===</span> <span class="s1">&#39;OPTIONS&#39;</span> <span class="o">&amp;&amp;</span>
      <span class="nx">reqHdrRaw</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="s1">&#39;access-control-request-headers&#39;</span><span class="p">)</span>
  <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">PREFLIGHT_INIT</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="kd">let</span> <span class="nx">acehOld</span> <span class="o">=</span> <span class="kc">false</span>
  <span class="kd">let</span> <span class="nx">rawSvr</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
  <span class="kd">let</span> <span class="nx">rawLen</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
  <span class="kd">let</span> <span class="nx">rawEtag</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

  <span class="kr">const</span> <span class="nx">reqHdrNew</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">(</span><span class="nx">reqHdrRaw</span><span class="p">)</span>
  <span class="nx">reqHdrNew</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;x-jsproxy&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>

  <span class="c1">// æ­¤å¤„é€»è¾‘å’Œ http-dec-req-hdr.lua å¤§è‡´ç›¸åŒ
</span><span class="c1"></span>  <span class="c1">// https://github.com/EtherDream/jsproxy/blob/master/lua/http-dec-req-hdr.lua
</span><span class="c1"></span>  <span class="kr">const</span> <span class="nx">refer</span> <span class="o">=</span> <span class="nx">reqHdrNew</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;referer&#39;</span><span class="p">)</span>
  <span class="kr">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="nx">refer</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">refer</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;?&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">query</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">makeRes</span><span class="p">(</span><span class="s1">&#39;missing params&#39;</span><span class="p">,</span> <span class="mi">403</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="kr">const</span> <span class="nx">param</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">URLSearchParams</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span>

  <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="p">[</span><span class="nx">k</span><span class="p">,</span> <span class="nx">v</span><span class="p">]</span> <span class="k">of</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">entries</span><span class="p">(</span><span class="nx">param</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">k</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;--&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// ç³»ç»Ÿä¿¡æ¯
</span><span class="c1"></span>      <span class="k">switch</span> <span class="p">(</span><span class="nx">k</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">case</span> <span class="s1">&#39;aceh&#39;</span><span class="o">:</span>
        <span class="nx">acehOld</span> <span class="o">=</span> <span class="kc">true</span>
        <span class="k">break</span>
      <span class="k">case</span> <span class="s1">&#39;raw-info&#39;</span><span class="o">:</span>
        <span class="p">[</span><span class="nx">rawSvr</span><span class="p">,</span> <span class="nx">rawLen</span><span class="p">,</span> <span class="nx">rawEtag</span><span class="p">]</span> <span class="o">=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;|&#39;</span><span class="p">)</span>
        <span class="k">break</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="c1">// è¿˜åŸ HTTP è¯·æ±‚å¤´
</span><span class="c1"></span>      <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">reqHdrNew</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">k</span><span class="p">,</span> <span class="nx">v</span><span class="p">)</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">reqHdrNew</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">param</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="s1">&#39;referer&#39;</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">reqHdrNew</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s1">&#39;referer&#39;</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="c1">// cfworker ä¼šæŠŠè·¯å¾„ä¸­çš„ `//` åˆå¹¶æˆ `/`
</span><span class="c1"></span>  <span class="kr">const</span> <span class="nx">urlStr</span> <span class="o">=</span> <span class="nx">pathname</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^(https?):\/+/</span><span class="p">,</span> <span class="s1">&#39;$1://&#39;</span><span class="p">)</span>
  <span class="kr">const</span> <span class="nx">urlObj</span> <span class="o">=</span> <span class="nx">newUrl</span><span class="p">(</span><span class="nx">urlStr</span><span class="p">)</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">urlObj</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">makeRes</span><span class="p">(</span><span class="s1">&#39;invalid proxy url: &#39;</span> <span class="o">+</span> <span class="nx">urlStr</span><span class="p">,</span> <span class="mi">403</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="cm">/** @type {RequestInit} */</span>
  <span class="kr">const</span> <span class="nx">reqInit</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">method</span><span class="o">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">method</span><span class="p">,</span>
    <span class="nx">headers</span><span class="o">:</span> <span class="nx">reqHdrNew</span><span class="p">,</span>
    <span class="nx">redirect</span><span class="o">:</span> <span class="s1">&#39;manual&#39;</span><span class="p">,</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">method</span> <span class="o">===</span> <span class="s1">&#39;POST&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">reqInit</span><span class="p">.</span><span class="nx">body</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">proxy</span><span class="p">(</span><span class="nx">urlObj</span><span class="p">,</span> <span class="nx">reqInit</span><span class="p">,</span> <span class="nx">acehOld</span><span class="p">,</span> <span class="nx">rawLen</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">}</span>


<span class="cm">/**
</span><span class="cm"> * 
</span><span class="cm"> * @param {URL} urlObj 
</span><span class="cm"> * @param {RequestInit} reqInit 
</span><span class="cm"> * @param {number} retryTimes 
</span><span class="cm"> */</span>
<span class="nx">async</span> <span class="kd">function</span> <span class="nx">proxy</span><span class="p">(</span><span class="nx">urlObj</span><span class="p">,</span> <span class="nx">reqInit</span><span class="p">,</span> <span class="nx">acehOld</span><span class="p">,</span> <span class="nx">rawLen</span><span class="p">,</span> <span class="nx">retryTimes</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">urlObj</span><span class="p">.</span><span class="nx">href</span><span class="p">,</span> <span class="nx">reqInit</span><span class="p">)</span>
  <span class="kr">const</span> <span class="nx">resHdrOld</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">headers</span>
  <span class="kr">const</span> <span class="nx">resHdrNew</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">(</span><span class="nx">resHdrOld</span><span class="p">)</span>

  <span class="kd">let</span> <span class="nx">expose</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span>
  
  <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="p">[</span><span class="nx">k</span><span class="p">,</span> <span class="nx">v</span><span class="p">]</span> <span class="k">of</span> <span class="nx">resHdrOld</span><span class="p">.</span><span class="nx">entries</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">k</span> <span class="o">===</span> <span class="s1">&#39;access-control-allow-origin&#39;</span> <span class="o">||</span>
        <span class="nx">k</span> <span class="o">===</span> <span class="s1">&#39;access-control-expose-headers&#39;</span> <span class="o">||</span>
        <span class="nx">k</span> <span class="o">===</span> <span class="s1">&#39;location&#39;</span> <span class="o">||</span>
        <span class="nx">k</span> <span class="o">===</span> <span class="s1">&#39;set-cookie&#39;</span>
    <span class="p">)</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="s1">&#39;--&#39;</span> <span class="o">+</span> <span class="nx">k</span>
      <span class="nx">resHdrNew</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">v</span><span class="p">)</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">acehOld</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">expose</span> <span class="o">=</span> <span class="nx">expose</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nx">x</span>
      <span class="p">}</span>
      <span class="nx">resHdrNew</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">acehOld</span> <span class="o">&amp;&amp;</span>
      <span class="nx">k</span> <span class="o">!==</span> <span class="s1">&#39;cache-control&#39;</span> <span class="o">&amp;&amp;</span>
      <span class="nx">k</span> <span class="o">!==</span> <span class="s1">&#39;content-language&#39;</span> <span class="o">&amp;&amp;</span>
      <span class="nx">k</span> <span class="o">!==</span> <span class="s1">&#39;content-type&#39;</span> <span class="o">&amp;&amp;</span>
      <span class="nx">k</span> <span class="o">!==</span> <span class="s1">&#39;expires&#39;</span> <span class="o">&amp;&amp;</span>
      <span class="nx">k</span> <span class="o">!==</span> <span class="s1">&#39;last-modified&#39;</span> <span class="o">&amp;&amp;</span>
      <span class="nx">k</span> <span class="o">!==</span> <span class="s1">&#39;pragma&#39;</span>
    <span class="p">)</span> <span class="p">{</span>
      <span class="nx">expose</span> <span class="o">=</span> <span class="nx">expose</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nx">k</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">acehOld</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">expose</span> <span class="o">=</span> <span class="nx">expose</span> <span class="o">+</span> <span class="s1">&#39;,--s&#39;</span>
    <span class="nx">resHdrNew</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;--t&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="c1">// verify
</span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">rawLen</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">newLen</span> <span class="o">=</span> <span class="nx">resHdrOld</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;content-length&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span>
    <span class="kr">const</span> <span class="nx">badLen</span> <span class="o">=</span> <span class="p">(</span><span class="nx">rawLen</span> <span class="o">!==</span> <span class="nx">newLen</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">badLen</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">retryTimes</span> <span class="o">&lt;</span> <span class="nx">MAX_RETRY</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">urlObj</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">parseYtVideoRedir</span><span class="p">(</span><span class="nx">urlObj</span><span class="p">,</span> <span class="nx">newLen</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">urlObj</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">proxy</span><span class="p">(</span><span class="nx">urlObj</span><span class="p">,</span> <span class="nx">reqInit</span><span class="p">,</span> <span class="nx">acehOld</span><span class="p">,</span> <span class="nx">rawLen</span><span class="p">,</span> <span class="nx">retryTimes</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">makeRes</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="p">{</span>
        <span class="s1">&#39;--error&#39;</span><span class="o">:</span> <span class="sb">`bad len: </span><span class="si">${</span><span class="nx">newLen</span><span class="si">}</span><span class="sb">, except: </span><span class="si">${</span><span class="nx">rawLen</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
        <span class="s1">&#39;access-control-expose-headers&#39;</span><span class="o">:</span> <span class="s1">&#39;--error&#39;</span><span class="p">,</span>
      <span class="p">})</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">retryTimes</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">resHdrNew</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;--retry&#39;</span><span class="p">,</span> <span class="nx">retryTimes</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">let</span> <span class="nx">status</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span>

  <span class="nx">resHdrNew</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;access-control-expose-headers&#39;</span><span class="p">,</span> <span class="nx">expose</span><span class="p">)</span>
  <span class="nx">resHdrNew</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;access-control-allow-origin&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)</span>
  <span class="nx">resHdrNew</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;--s&#39;</span><span class="p">,</span> <span class="nx">status</span><span class="p">)</span>
  <span class="nx">resHdrNew</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;--ver&#39;</span><span class="p">,</span> <span class="nx">JS_VER</span><span class="p">)</span>

  <span class="nx">resHdrNew</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s1">&#39;content-security-policy&#39;</span><span class="p">)</span>
  <span class="nx">resHdrNew</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s1">&#39;content-security-policy-report-only&#39;</span><span class="p">)</span>
  <span class="nx">resHdrNew</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s1">&#39;clear-site-data&#39;</span><span class="p">)</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">301</span> <span class="o">||</span>
      <span class="nx">status</span> <span class="o">===</span> <span class="mi">302</span> <span class="o">||</span>
      <span class="nx">status</span> <span class="o">===</span> <span class="mi">303</span> <span class="o">||</span>
      <span class="nx">status</span> <span class="o">===</span> <span class="mi">307</span> <span class="o">||</span>
      <span class="nx">status</span> <span class="o">===</span> <span class="mi">308</span>
  <span class="p">)</span> <span class="p">{</span>
    <span class="nx">status</span> <span class="o">=</span> <span class="nx">status</span> <span class="o">+</span> <span class="mi">10</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">status</span><span class="p">,</span>
    <span class="nx">headers</span><span class="o">:</span> <span class="nx">resHdrNew</span><span class="p">,</span>
  <span class="p">})</span>
<span class="p">}</span>


<span class="cm">/**
</span><span class="cm"> * @param {URL} urlObj 
</span><span class="cm"> */</span>
<span class="kd">function</span> <span class="nx">isYtUrl</span><span class="p">(</span><span class="nx">urlObj</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="nx">urlObj</span><span class="p">.</span><span class="nx">host</span><span class="p">.</span><span class="nx">endsWith</span><span class="p">(</span><span class="s1">&#39;.googlevideo.com&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
    <span class="nx">urlObj</span><span class="p">.</span><span class="nx">pathname</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="s1">&#39;/videoplayback&#39;</span><span class="p">)</span>
  <span class="p">)</span>
<span class="p">}</span>

<span class="cm">/**
</span><span class="cm"> * @param {URL} urlObj 
</span><span class="cm"> * @param {number} newLen 
</span><span class="cm"> * @param {Response} res 
</span><span class="cm"> */</span>
<span class="nx">async</span> <span class="kd">function</span> <span class="nx">parseYtVideoRedir</span><span class="p">(</span><span class="nx">urlObj</span><span class="p">,</span> <span class="nx">newLen</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">newLen</span> <span class="o">&gt;</span> <span class="mi">2000</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">null</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isYtUrl</span><span class="p">(</span><span class="nx">urlObj</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">null</span>
  <span class="p">}</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">res</span><span class="p">.</span><span class="nx">text</span><span class="p">()</span>
    <span class="nx">urlObj</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">URL</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">null</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isYtUrl</span><span class="p">(</span><span class="nx">urlObj</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">null</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">urlObj</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>çœ‹è¿™ï¼š<a href="https://proxy.raycoder.me/">Demoä¼ é€é—¨</a></p>
<hr>
<p>2020/04/06æ›´æ–°ï¼š</p>
<p>æ›´æ­£ï¼Œ10ä¸‡è¯·æ±‚ã€‚</p>
]]></content><category scheme="https://raycoder.me/categories/%E4%BB%A3%E7%90%86/" term="ä»£ç†" label="ä»£ç†"/><category scheme="https://raycoder.me/tags/%E4%BB%A3%E7%90%86/" term="ä»£ç†" label="ä»£ç†"/><category scheme="https://raycoder.me/tags/cloudflare/" term="Cloudflare" label="Cloudflare"/><category scheme="https://raycoder.me/tags/cdn/" term="CDN" label="CDN"/></entry><entry><title type="text">Pythonä¸­çš„withå…³é”®å­—ä½¿ç”¨æ–¹æ³•ï¼Ÿ</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/python-with/"/><id>https://raycoder.me/p/python-with/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-04-01T10:03:10+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">Pythonä¸­çš„withå…³é”®å­—</summary><content type="html"><![CDATA[<blockquote>
<p><strong>å†™ä½œä¸æ˜“ï¼Œèµ„ç“·ä¸€ä¸‹å‘—ï¼ä¸ªäººåšå®¢ï¼š<a href="https://raycoder.me">https://raycoder.me</a></strong></p>
<p><strong>æœ¬æ–‡é¦–å‘äº<a href="https://raycoder.me/p/python-with/">Ray's Blog</a></strong></p>
</blockquote>
<p>Pythonä¸­æœ‰ä¸€ç§æ“ä½œå«åš<code>æ‰“å¼€æ–‡ä»¶</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/foo/bar.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span>
<span class="s1">&#39;Hello World!&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™æ ·ï¼Œä½ å°±ä»<code>/foo/bar.txt</code>è¿™ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­è¯»å–åˆ°äº†å®ƒçš„æ–‡æœ¬ï¼š<code>Hello World!</code></p>
<p>ä½†æ˜¯ï¼Œè¿™æ ·å¤„ç†æœ‰ä¸€äº›é—®é¢˜ï¼š</p>
<ol>
<li>å¯èƒ½åœ¨å¤„ç†å®Œæ–‡æœ¬åå¿˜è®°å…³é—­æ–‡ä»¶ï¼Ÿ</li>
<li>å¯èƒ½åœ¨è¯»å–æ—¶å‡ºç°é”™è¯¯ï¼Ÿ</li>
</ol>
<p>è¿™æ—¶ï¼Œ<code>try...except...finally...</code>è¯­å¥å°±æ´¾ä¸Šäº†ç”¨åœºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">try</span><span class="p">:</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/foo/bar.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Fail to open /foo/bar.txt&#39;</span><span class="p">)</span>
    <span class="nb">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><p>è™½ç„¶è¿™æ®µä»£ç è¿è¡Œè‰¯å¥½ï¼Œä½†æ˜¯å¤ªå†—é•¿äº†ã€‚</p>
<p>è¿™æ—¶ï¼Œ<code>with</code>è¯­å¥ï¼ˆä¸Šä¸‹æ–‡ç®¡ç†å™¨å™¨ï¼Œæ·»åŠ äºPython2.5ï¼Œåœ¨2.5æ—¶æ˜¯è¯•éªŒæ€§çš„ï¼Œéœ€è¦<code>from __future__ import with_statement</code>ã€‚åœ¨2.5ä¹‹å‰çš„ç‰ˆæœ¬æ— æ³•ä½¿ç”¨ã€‚ï¼‰å°±å¯ä»¥å¤§æ˜¾èº«æ‰‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/foo/bar.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™é‡Œæ²¡æœ‰é”™è¯¯å¤„ç†å™¨ï¼Œæ²¡æœ‰<code>f = open('/foo/bar.txt', 'r')</code>ï¼Œä¹Ÿæ²¡æœ‰è¯»å–å®Œæ–‡ä»¶åçš„<code>f.close()</code>ã€‚è¿™æ®µä»£ç ä¸<code>try...except...finally...</code>å®ç°äº†ç›¸åŒçš„åŠŸèƒ½ï¼Œä½†æ˜¯ä»£ç å´ç›¸åº”çš„çŸ­äº†è®¸å¤šã€‚</p>
<p>é™¤äº†è¯»å–æ–‡ä»¶ï¼Œè®¸å¤šæ ‡å‡†æ¨¡å—ä¹Ÿå«æœ‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œè¿™æ„å‘³ç€å®ƒä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨<code>with</code>è¯­å¥ï¼ˆä»¥<code>threading</code>æ¨¡å—ä¸ºä¾‹ï¼‰ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">atexit</span> <span class="kn">import</span> <span class="n">register</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randrange</span>
<span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Thread</span><span class="p">,</span> <span class="n">Lock</span><span class="p">,</span> <span class="n">currentThread</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span><span class="p">,</span> <span class="n">ctime</span>

<span class="k">class</span> <span class="nc">CleanOutputSet</span><span class="p">(</span><span class="nb">set</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">)</span>

<span class="n">lock</span> <span class="o">=</span> <span class="n">Lock</span><span class="p">()</span>
<span class="n">loops</span> <span class="o">=</span> <span class="p">(</span><span class="n">randrange</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">randrange</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">)))</span>
<span class="n">remaining</span> <span class="o">=</span> <span class="n">CleanOutputSet</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">loop</span><span class="p">(</span><span class="n">nsec</span><span class="p">):</span>
    <span class="n">myname</span> <span class="o">=</span> <span class="n">currentThread</span><span class="p">()</span><span class="o">.</span><span class="n">name</span>
    <span class="k">with</span> <span class="n">lock</span><span class="p">:</span>
    	<span class="n">remaining</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">myname</span><span class="p">)</span>
    	<span class="k">print</span><span class="p">(</span><span class="s1">&#39;[{0}] Started {1}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ctime</span><span class="p">(),</span> <span class="n">myname</span><span class="p">))</span>
    <span class="n">sleep</span><span class="p">(</span><span class="n">nsec</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">lock</span><span class="p">:</span>
    	<span class="n">remaining</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">myname</span><span class="p">)</span>
    	<span class="k">print</span><span class="p">(</span><span class="s1">&#39;[{0}] Completed {1} ({2} secs)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ctime</span><span class="p">(),</span> <span class="n">myname</span><span class="p">,</span> <span class="n">nsec</span><span class="p">))</span>
    	<span class="k">print</span><span class="p">(</span><span class="s1">&#39;    (remaining: {0})&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">remaining</span> <span class="ow">or</span> <span class="s1">&#39;NONE&#39;</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">_main</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">pause</span> <span class="ow">in</span> <span class="n">loops</span><span class="p">:</span>
        <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">loop</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">pause</span><span class="p">,))</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="nd">@register</span>
<span class="k">def</span> <span class="nf">_atexit</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;all DONE at:&#39;</span><span class="p">,</span> <span class="n">ctime</span><span class="p">())</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">_main</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªä¾‹å­æ´¾ç”Ÿäº†éšæœºä¸ªçš„çº¿ç¨‹ï¼Œä½¿ç”¨<code>with</code>è¯­å¥å®ç°é”çš„é”å®šä¸é‡Šæ”¾ã€‚</p>
<p>é‚£ä¹ˆï¼Œä¸Šä¸‹æ–‡ç®¡ç†å™¨æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿå®ƒé€šè¿‡ç±»é‡Œé¢çš„ç‰¹æ®Šæ–¹æ³•â€”â€”<code>__enter__</code>å’Œ<code>__exit__</code>ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">MyClass</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">=</span><span class="n">name</span>
    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&#34;åˆ°è¾¾__enter__&#34;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>
    <span class="k">def</span> <span class="nf">printName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&#34;åˆ°è¾¾__exit__&#34;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">MyClass</span><span class="p">(</span><span class="s1">&#39;foo-bar&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">test</span><span class="p">:</span>
        <span class="n">test</span><span class="o">.</span><span class="n">printName</span><span class="p">()</span>

<span class="o">======================</span> <span class="n">RESTART</span><span class="p">:</span> <span class="n">test</span><span class="o">.</span><span class="n">py</span> <span class="o">======================</span>
<span class="err">åˆ°è¾¾</span><span class="fm">__enter__</span>
<span class="n">The</span> <span class="n">name</span> <span class="ow">is</span><span class="p">:</span>  <span class="n">foo</span><span class="o">-</span><span class="n">bar</span>
<span class="err">åˆ°è¾¾</span><span class="fm">__exit__</span>
<span class="o">&gt;&gt;&gt;</span> 
</code></pre></td></tr></table>
</div>
</div>]]></content><category scheme="https://raycoder.me/categories/python/" term="Python" label="Python"/><category scheme="https://raycoder.me/categories/python%E5%85%B3%E9%94%AE%E5%AD%97/" term="Pythonå…³é”®å­—" label="Pythonå…³é”®å­—"/><category scheme="https://raycoder.me/categories/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" term="Pythonå­¦ä¹ ç¬”è®°" label="Pythonå­¦ä¹ ç¬”è®°"/><category scheme="https://raycoder.me/tags/python/" term="Python" label="Python"/><category scheme="https://raycoder.me/tags/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" term="Pythonå­¦ä¹ ç¬”è®°" label="Pythonå­¦ä¹ ç¬”è®°"/><category scheme="https://raycoder.me/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" term="å¤šçº¿ç¨‹" label="å¤šçº¿ç¨‹"/></entry><entry><title type="text">ã€åˆ»åœ¨åŸºå› é‡Œçš„åºåˆ—å·å˜äº†ï¼Ÿã€‘Bilibilié‡‡ç”¨æ–°çš„ç¨¿ä»¶ç¼–å·ï¼AVä¸BVäº’ç›¸è½¬åŒ–çš„æ–¹æ³•ï¼</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/av-and-bv/"/><id>https://raycoder.me/p/av-and-bv/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-03-31T15:57:37+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">ã€åˆ»åœ¨åŸºå› é‡Œçš„åºåˆ—å·å˜äº†ï¼Ÿã€‘Bilibilié‡‡ç”¨æ–°çš„ç¨¿ä»¶ç¼–å·ï¼AVä¸BVäº’ç›¸è½¬åŒ–</summary><content type="html"><![CDATA[<blockquote>
<p><strong>å†™ä½œä¸æ˜“ï¼Œèµ„ç“·ä¸€ä¸‹å‘—ï¼ä¸ªäººåšå®¢ï¼š<a href="https://raycoder.me">https://raycoder.me</a></strong></p>
<p><strong>æœ¬æ–‡é¦–å‘äº<a href="https://raycoder.me/p/av-and-bv/">Ray's Blog</a></strong></p>
</blockquote>
<p>æœ€è¿‘Bç«™æŠŠAVå·æ”¹æˆäº†BVå·ï¼<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>ä»¥åBç«™æ²¡æœ‰AVäº†ï¼[æ‰‹åŠ¨ç‹—å¤´]</p>
<p>æ›´æ”¹ä»¥å‰çš„AVå·ç®€å•å¥½è®°ï¼Œéƒ½æ˜¯<code>AV170001</code>ä¸€ç±»â€”â€”æ ¹æ®å‘å¸ƒé¡ºåºä¾æ¬¡å¾€ä¸‹è®¡æ•°ã€‚</p>
<p>æ›´æ”¹ä»¥åçš„BVå·å®Œå…¨é¢ è¦†ï¼Œå½¢å¦‚<code>BV17x411w7KC</code>ï¼ŒåŒºåˆ†å¤§å°å†™â€”â€”è½¬æ¢æˆçš„AVå·æ˜¯å®Œå…¨éšæœºçš„ã€‚</p>
<p>è¯´å®è¯ï¼Œä¸ªäººè®¤ä¸ºè¿™ä¸ªæ”¹å˜æ˜¯ä¸ºäº†é˜²æ­¢ä¸€äº›æ¶æ„çˆ¬è™«ã€‚</p>
<p>è™½ç„¶Bç«™å®˜æ–¹ä¹Ÿæœ‰æåˆ°ï¼Œä»¥åä»ç„¶å¯ä»¥ä½¿ç”¨AVå·æ¥è§‚çœ‹è§†é¢‘<heimu>ï¼Œä¸è¿‡ï¼Œåˆ»åœ¨åŸºå› é‡Œçš„AVå·å˜äº†ï¼Œè€é’ç»“å·¥äº†</heimu>ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªåºåˆ—å·å¦‚ä½•äº’ç›¸è½¬åŒ–å‘¢ï¼Ÿ</p>
<p>å½“ç„¶ï¼ŒAV/BVåŒæ—¶å·¥ä½œå°±è¯´æ˜ï¼šBç«™æœ‰ä¸€ä¸ªæ¥å£ï¼</p>
<p>BVIDæ¥å£ï¼š<code>https://api.bilibili.com/x/web-interface/view?bvid=&lt;BVID&gt;</code></p>
<p>AIDæ¥å£ï¼š<code>https://api.bilibili.com/x/web-interface/view?Aid=&lt;AID&gt;</code></p>
<p>çŸ¥ä¹ä¸Š<a href="https://www.zhihu.com/people/-._.-">@mcfx</a>å¤§ä½¬å·²ç»ç»™å‡ºäº†å›ç­”ï¼š<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup></p>
<p>ä»–å†™äº†ä¸€äº›ä»£ç ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ã€‚ï¼ˆä¸€äº›ä¿®æ”¹ï¼‰</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">table</span> <span class="o">=</span> <span class="s1">&#39;fZodR9XQDSUm21yCkr6zBqiveYah8bt4xsWpHnJE7jL5VG3guMTKNPAwcF&#39;</span> <span class="c1"># base58çš„å­—ç¬¦å¯¹åº”è¡¨â€”â€”ä»0~57ï¼Œæ²¡æœ‰å¤§å†™Oï¼Œæ•°å­—0ï¼Œå°å†™çš„Lå’Œå¤§å†™çš„iï¼Œéæ ‡å‡†ã€‚</span>
<span class="n">tr</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">58</span><span class="p">)))</span> <span class="c1"># å»ºç«‹å¯¹åº”å­—å…¸ï¼Œå½¢å¦‚{&#39;f&#39;: 0, &#39;Z&#39;: 1...}</span>
<span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="n">xor</span> <span class="o">=</span> <span class="mi">177451812</span>
<span class="n">add</span> <span class="o">=</span> <span class="mi">8728348608</span>

<span class="k">def</span> <span class="nf">bv2av</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
	<span class="n">r</span><span class="o">=</span><span class="mi">0</span>
	<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
		<span class="n">r</span><span class="o">+=</span><span class="n">tr</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]]]</span><span class="o">*</span><span class="mi">58</span><span class="o">**</span><span class="n">i</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">r</span><span class="o">-</span><span class="n">add</span><span class="p">)</span><span class="o">^</span><span class="n">xor</span>

<span class="k">def</span> <span class="nf">av2bv</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
	<span class="n">x</span><span class="o">=</span><span class="p">(</span><span class="n">x</span><span class="o">^</span><span class="n">xor</span><span class="p">)</span><span class="o">+</span><span class="n">add</span>
	<span class="n">r</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;BV1  4 1 7  &#39;</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
		<span class="n">r</span><span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span><span class="o">=</span><span class="n">table</span><span class="p">[</span><span class="n">x</span><span class="o">//</span><span class="mi">58</span><span class="o">**</span><span class="n">i</span><span class="o">%</span><span class="mi">58</span><span class="p">]</span>
	<span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>ä¸»è¦ä¿®æ”¹ï¼š</strong></p>
<p><strong>1.ä½¿ç”¨zip()å‡½æ•°ï¼Œä¼˜åŒ–äº†è¿è¡Œæ•ˆç‡ï¼›</strong></p>
<p>ç­‰å¾…è¡¥å……</p>
<hr>
<p>å¦‚æœç®—æ³•æ²¡çŒœé”™ï¼Œå¯ä»¥ä¿è¯åœ¨ av å· $&lt; 2^{27}$ æ—¶æ­£ç¡®ï¼ŒåŒæ—¶åº”è¯¥åœ¨ $&lt; 2^{30}$ æ—¶ä¹Ÿæ˜¯æ­£ç¡®çš„ã€‚æ­¤ä»£ç ä»¥ WTFPL å¼€æºã€‚</p>
<p>UPDï¼šä¹‹å‰çš„ä»£ç ä¸­ï¼Œæ‰€æœ‰æ•°ä½éƒ½è¢«ç”¨åˆ°æ˜¯ä¹±å‡‘çš„ï¼Œå®é™…ä¸Šå¹¶ä¸éœ€è¦ï¼Œç›®å‰åªè¦ä½ 6 ä½å°±è¶³å¤Ÿäº†ã€‚ï¼ˆæ›´å¤§çš„ av å·éœ€è¦ 64 ä½æ•´æ•°å­˜å‚¨ï¼Œä½†æ˜¯ b ç«™ç°åœ¨ä½¿ç”¨çš„åº”è¯¥è¿˜æ˜¯ 32 ä½æ•´æ•°ï¼Œæ‰€ä»¥åº”è¯¥è¿˜è¦å¾ˆä¹…ï¼‰</p>
<p>å‘ç°çš„æ–¹æ³•ï¼š</p>
<p>é¦–å…ˆä»å„ç§æ¸ é“çš„ä¿¡æ¯æ¥çœ‹ï¼Œåº”è¯¥æ˜¯ base58 ç¼–ç çš„ã€‚è®¾ x æ˜¯ä¸€ä¸ªé’¦å®šçš„ av å·ï¼ŒæŸ¥è¯¢ $\ 58k+x,58^2k+x,58^3k+x,58^4k+x\left(k \in Z\right)$ è¿™äº› av å·å¯¹åº”çš„ bv å·ï¼Œå‘ç° bv å·çš„ç¬¬ 12ã€11ã€4ã€9ã€5 ä½åˆ†åˆ«ä¼šå˜åŒ–ã€‚æ‰€ä»¥çŒœæµ‹è¿™äº›æ˜¯ 58 è¿›åˆ¶ä¸‹çš„ç›¸åº”ä½ã€‚</p>
<p>ä½†æ˜¯ç›´æ¥ base58 æ˜¯ä¸è¡Œçš„ï¼Œæ‰€ä»¥çŒœæµ‹å¼‚æˆ–äº†ä¸€ä¸ªå¤§æ•°ï¼Œå¹¶ä¸” base58 çš„å­—ç¬¦è¡¨å¯èƒ½æ‰“ä¹±äº†ã€‚ç»è¿‡å®éªŒï¼Œbv å·æœ€ä½ä½ç›¸åŒçš„æ•°ï¼Œav å·çš„å¥‡å¶æ€§ç›¸åŒï¼Œè¿™ä¸€å®šç¨‹åº¦ä¸Šå°è¯äº†ä¹‹å‰çš„çŒœæƒ³ã€‚</p>
<p>æ¥ä¸‹æ¥æ‰¾äº†ä¸€äº› av å· xï¼Œæ»¡è¶³ x å’Œ x+1 å¯¹åº” bv å·çš„ç¬¬ 11 ä½ä¸åŒã€‚è®¾å¼‚æˆ–çš„æ•°ä¸º Xï¼Œé‚£ä¹ˆ $\ \left\lfloor\frac{X\oplus x}{58}\right\rfloor\neq \left\lfloor\frac{X\oplus (x+1)}{58}\right\rfloor$ ï¼ˆ $\ \oplus$  è¡¨ç¤ºå¼‚æˆ–ï¼‰ã€‚</p>
<p>ç”±äº av å·ï¼ˆé™¤äº†æœ€æ–°çš„å°‘é‡è§†é¢‘ï¼‰æœ€å¤šåªæœ‰ 27 bitsï¼Œæ‰€ä»¥å¯ä»¥è®¾ $\ X=2^{27}a+b(0\le b&lt;2^{27})$ ã€‚ç„¶åå¯ä»¥å‘ç° $\ X$ åªå’Œ $\ 2^{27}a\bmod 58$ å’Œ $\ b$ æœ‰å…³ï¼Œé‚£ä¹ˆå¯ä»¥æšä¸¾è¿™ä¸¤ä¸ªå€¼ï¼ˆä¸€å…± $\ 2^{27}\cdot 58=7784628224$ ç§æƒ…å†µï¼‰ç„¶åä½¿ç”¨ä¸Šé¢çš„å¼å­æ£€æŸ¥ï¼Œå°±èƒ½å¾—åˆ°è‹¥å¹²å¯èƒ½çš„ $\ 2^{27}a\bmod 58$ å’Œ $\ b$ ã€‚</p>
<p>è¿™é‡Œæˆ‘å¾—åˆ°çš„å¯èƒ½å€¼å¦‚ä¸‹ï¼šï¼ˆå·¦è¾¹æ˜¯ $\ 2^{27}a\bmod 58$ ï¼Œå³è¾¹æ˜¯ $\ b$ ï¼‰</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text">22 90983642
22 90983643
50 43234084
50 43234085
</code></pre></td></tr></table>
</div>
</div><p>æœ‰å¥‡æœ‰å¶æ˜¯å› ä¸ºå¼‚æˆ– 1 ä¹‹åä¹Ÿèƒ½æ‰¾åˆ°è½®æ¢è¡¨ã€‚è€Œ $\ 90983642+43234085=2^{27}-1$ åˆ™ä½¿å¾—æ¨¡ 58 çš„ä½™æ•°åˆšå¥½å˜æˆ$\ 2^{27}-1$å‡å®ƒã€‚</p>
<p>æˆ‘å–äº† b=43234084ï¼Œç„¶åå¤„ç†æœ€ä½ä½ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªå­—ç¬¦è¡¨ï¼Œå³ fZodR9XQDSUm21yCkr6zBqiveYah8bt4xsWpHnJE7jL5VG3guMTKNPAwcFã€‚</p>
<p>å¯¹äºæ›´é«˜ä½ï¼Œå®é™…ä¸Šè¿˜éœ€è¦çŸ¥é“ $\ 2^{27}a\bmod 58^2,2^{27}a\bmod 58^3,\dots$ ï¼Œè¿™äº›å€¼ä¹Ÿå¯ä»¥ æšä¸¾ 58 æ¬¡å¾—åˆ°ï¼Œæœ€åæˆ‘å¾—åˆ°çš„å€¼æ˜¯ $\ 2^{27}a\bmod 58^4=1749968$ ã€‚</p>
<p>è¿™æ—¶æˆ‘å‘ç°ï¼Œæ¯ä¸€ä½çš„å­—ç¬¦è¡¨æ˜¯ç›¸åŒçš„ï¼ˆå®é™…ä¸Šåªå¯¹ b=43234084 æ˜¯è¿™æ ·çš„ï¼‰ï¼Œç„¶åå†å¾®è°ƒä¸€ä¸‹å‚æ•°ï¼ˆä¸Šé¢ä»£ç ä¸­çš„ä¸¤ä¸ª magic number å°±ç›¸å½“äºè¿™é‡Œçš„ $\ a,b$ ï¼‰ï¼Œæœ€åå¤„ç†äº†ä¸€ä¸‹ $\ \ge 2^{27}$ çš„æƒ…å†µå°±å¾—åˆ°äº†è¿™ä»½ä»£ç ã€‚</p>
<p>ï¼ˆè½¬è‡ªçŸ¥ä¹<a href="https://www.zhihu.com/people/-._.-">@mcfx</a>å¤§ä½¬ç»™å‡ºçš„å›ç­”ï¼‰</p>
<p>æ ¹æ®å€æ­¥é•¿è·³çš„å®éªŒæ˜¾ç¤ºï¼šå…¶å˜åŠ¨çš„ä¼˜å…ˆçº§ä¸ºï¼š</p>
<p>åä¸¤ä½ï¼ç¬¬4ä½ï¼ˆæ¯4096ä¸€å˜ï¼Œä½†æ˜¯ç”±äº58Ã—58ï¼œ4096ï¼Œè‚¯å®šåˆè¦å€Ÿç”¨å…¶ä»–ä½çš„å˜åŒ–ï¼‰ï¼ç¬¬9ä½ï¼ˆæ¯131072ä¸€å˜ï¼Œç›¸å½“äºç¬¬4ä½æ¯å˜32æ¬¡ç¬¬9ä½æ‰ä¼šå˜ï¼‰ï¼ç¬¬5ä½ï¼ˆæ¯2097152ä¸€å˜ï¼‰ã€‚</p>
<p>è¿™ä¹Ÿèƒ½è§£é‡Šä¸ºä»€ä¹ˆç¬¬5ä½æ’å¸ƒä¸å‡åŒ€â€”â€”æ²¡æ’å®Œå•Šï¼</p>
<p>ä¿®æ”¹ç‰ˆBase58è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th align="center">0</th>
<th align="center">1</th>
<th align="center">2</th>
<th align="center">3</th>
<th align="center">4</th>
<th align="center">5</th>
<th align="center">6</th>
<th align="center">7</th>
<th align="center">8</th>
<th align="center">9</th>
<th align="center">10</th>
<th align="center">11</th>
<th align="center">12</th>
<th align="center">13</th>
<th align="center">14</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">f</td>
<td align="center">Z</td>
<td align="center">o</td>
<td align="center">d</td>
<td align="center">R</td>
<td align="center">9</td>
<td align="center">X</td>
<td align="center">Q</td>
<td align="center">D</td>
<td align="center">S</td>
<td align="center">U</td>
<td align="center">m</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">y</td>
</tr>
<tr>
<td align="center">15</td>
<td align="center">16</td>
<td align="center">17</td>
<td align="center">18</td>
<td align="center">19</td>
<td align="center">20</td>
<td align="center">21</td>
<td align="center">22</td>
<td align="center">23</td>
<td align="center">24</td>
<td align="center">25</td>
<td align="center">26</td>
<td align="center">27</td>
<td align="center">28</td>
<td align="center">29</td>
</tr>
<tr>
<td align="center">C</td>
<td align="center">k</td>
<td align="center">r</td>
<td align="center">6</td>
<td align="center">z</td>
<td align="center">B</td>
<td align="center">q</td>
<td align="center">i</td>
<td align="center">v</td>
<td align="center">e</td>
<td align="center">Y</td>
<td align="center">a</td>
<td align="center">h</td>
<td align="center">8</td>
<td align="center">b</td>
</tr>
<tr>
<td align="center">30</td>
<td align="center">31</td>
<td align="center">32</td>
<td align="center">33</td>
<td align="center">34</td>
<td align="center">35</td>
<td align="center">36</td>
<td align="center">37</td>
<td align="center">38</td>
<td align="center">39</td>
<td align="center">40</td>
<td align="center">41</td>
<td align="center">42</td>
<td align="center">43</td>
<td align="center">44</td>
</tr>
<tr>
<td align="center">t</td>
<td align="center">4</td>
<td align="center">x</td>
<td align="center">s</td>
<td align="center">W</td>
<td align="center">p</td>
<td align="center">H</td>
<td align="center">n</td>
<td align="center">J</td>
<td align="center">E</td>
<td align="center">7</td>
<td align="center">j</td>
<td align="center">L</td>
<td align="center">5</td>
<td align="center">V</td>
</tr>
<tr>
<td align="center">45</td>
<td align="center">46</td>
<td align="center">47</td>
<td align="center">48</td>
<td align="center">49</td>
<td align="center">50</td>
<td align="center">51</td>
<td align="center">52</td>
<td align="center">53</td>
<td align="center">54</td>
<td align="center">55</td>
<td align="center">56</td>
<td align="center">57</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">G</td>
<td align="center">3</td>
<td align="center">g</td>
<td align="center">u</td>
<td align="center">M</td>
<td align="center">T</td>
<td align="center">K</td>
<td align="center">N</td>
<td align="center">P</td>
<td align="center">A</td>
<td align="center">w</td>
<td align="center">c</td>
<td align="center">F</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>
<p>äº‹å®ä¸Šï¼Œå¦‚æœä¸é‡‡ç”¨åç«¯ï¼Œç›´æ¥æµè§ˆå™¨æ§åˆ¶å°è¾“å…¥<code>aid</code>ï¼Œ<code>bvid</code>ä¹Ÿæ˜¯å¯ä»¥çš„ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200331165001.png" alt=""></p>
<p>é™„è½¬æ¢å™¨ï¼š</p>
<iframe src="/tools/bv2av/index.html" width="100%" height="400" scrolling="0" frameborder="0"><br></iframe>
<p>é¡ºä¾¿æ”¾ä¸Šè§†é¢‘ã€‚</p>
<div id="player"></div>
<script type="text/javascript" src="https://player.dogecloud.com/js/loader"></script>
<script type="text/javascript">
var player = new DogePlayer({
    container: document.getElementById('player'),
    userId: 1136,
    vcode: '5ab2d61eea8e1aec',
    autoPlay: false
});
</script>
<p><br /></p>
<div id="player2"></div>
<script type="text/javascript">
var player = new DogePlayer({
    container: document.getElementById('player2'),
    userId: 1136,
    vcode: 'd490fb66ed51f07c',
    autoPlay: false
});
</script>
<hr>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p><a href="https://www.bilibili.com/read/cv5167957">ã€å‡çº§å…¬å‘Šã€‘AVå·å…¨é¢å‡çº§è‡³BVå· | Bilibili</a> <a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2" role="doc-endnote">
<p><a href="https://www.zhihu.com/question/381784377/answer/1099438784">å¦‚ä½•çœ‹å¾… 2020 å¹´ 3 æœˆ 23 æ—¥å“”å“©å“”å“©å°†ç¨¿ä»¶çš„ã€Œav å·ã€å˜æ›´ä¸ºã€ŒBV å·ã€ï¼Ÿ | çŸ¥ä¹</a> <a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>]]></content><category scheme="https://raycoder.me/categories/%E7%AE%97%E6%B3%95/" term="ç®—æ³•" label="ç®—æ³•"/><category scheme="https://raycoder.me/tags/%E7%AE%97%E6%B3%95/" term="ç®—æ³•" label="ç®—æ³•"/><category scheme="https://raycoder.me/tags/bilibili/" term="Bilibili" label="Bilibili"/></entry><entry><title type="text">æ—é—¨å·¦é“ä¹‹ä½¿ç”¨Leancloudæ­å»ºç½‘ç«™ï¼</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/build-website-with-leancloud/"/><id>https://raycoder.me/p/build-website-with-leancloud/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-03-31T13:10:36+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">æ—é—¨å·¦é“ä¹‹ä½¿ç”¨Leancloudæ­å»ºç½‘ç«™</summary><content type="html"><![CDATA[<blockquote>
<p><strong>å†™ä½œä¸æ˜“ï¼Œèµ„ç“·ä¸€ä¸‹å‘—ï¼ä¸ªäººåšå®¢ï¼š<a href="https://raycoder.me">https://raycoder.me</a></strong></p>
<p><strong>æœ¬æ–‡é¦–å‘äº<a href="https://raycoder.me/p/build-website-with-leancloud/">Ray's Blog</a></strong></p>
</blockquote>
<p>Leancloudä¹Ÿå¯ä»¥æ­å»ºç½‘ç«™ï¼Ÿ</p>
<p>æ˜¯çš„ï¼<a href="https://leancloud.app">Leancloud</a>ï¼Œå°±æ˜¯é‚£ä¸ªæˆ‘ä»¬ç†ŸçŸ¥çš„<code>Valine</code>æ•°æ®å­˜å‚¨ï¼Œå¯ä»¥æ­å»ºç½‘ç«™ï¼æœ‰ä½¿ç”¨<code>Valine Admin</code>çš„åŒå­¦å¯èƒ½ä¹Ÿä¼šå‘ç°ï¼Œéƒ¨ç½²çš„Adminå®é™…ä¸Šä¹Ÿæ˜¯ä¸€ä¸ª<em class="emphasis-point">ä½¿ç”¨JSç”Ÿæˆçš„é¡µé¢</em>ã€‚é‚£ä¹ˆå¾ˆå¤šäººå¯èƒ½å°±ä¼šæƒ³è¦ä½¿ç”¨Leancloudå»æ­å»ºç½‘ç«™â€”â€”æ€ä¹ˆå®ç°å‘¢ï¼Ÿï¼ˆæˆ‘åˆšåˆšæ”¾çš„é“¾æ¥æ˜¯å›½é™…ç‰ˆçš„Leancloudï¼Œå›½å†…ç‰ˆçš„<a href="https://leancloud.cn">æˆ³è¿™</a>ï¼Œéœ€è¦å®åè®¤è¯ã€‚æ¨èå›½é™…ç‰ˆã€‚ï¼‰</p>
<p>äº‹å®ä¸Šï¼Œä½ åªéœ€è¦æ¨é€ä¸€ä¸ªç½‘é¡µåˆ°ä¸€ä¸ªGitä»“åº“ï¼ˆGitHubã€Giteeã€Codingç­‰çš†å¯ï¼‰ï¼Œç„¶åä½¿ç”¨<code>Leancloudäº‘å¼•æ“</code>åŠŸèƒ½éƒ¨ç½²ç½‘é¡µã€‚<red>æ³¨æ„ï¼æˆ‘æ²¡æœ‰è¯´æ˜¯é™æ€ç½‘é¡µï¼Leancloudæ”¯æŒ<code>PHP</code>ï¼</red>ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥æŠŠLeancloudå½“ä½œä¸€ä¸ªå…è´¹çš„ç©ºé—´æ¥æ­å»ºä½ çš„åšå®¢â€”â€”å½“ç„¶ï¼Œç¨³å®šæ€§ä¸æ•¢ä¿è¯ï¼ŒLeancloudå¼€å‘ç‰ˆæ¯å¤©ä¼šå¼ºåˆ¶ä¼‘çœ 6å°æ—¶ã€‚</p>
<p>é¦–å…ˆå…ˆåˆ›å»ºä¸€ä¸ªåº”ç”¨ï¼Œé€‰æ‹©å¼€å‘ç‰ˆ~è‡ªå·±æ•´ç½¢ï¼</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200331135141.png" alt=""></p>
<p>ç„¶åé€‰æ‹©<code>&lt;ä½ åˆ›å»ºçš„åº”ç”¨&gt;--&gt;äº‘å¼•æ“--&gt;è®¾ç½®</code>ï¼Œåœ¨<code>æºç éƒ¨ç½²--&gt;ä»£ç åº“</code>é‡Œå¡«å†™ä½ çš„Gitä»“åº“ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200331134820.png" alt=""></p>
<p>å½“ç„¶ï¼Œä¸è¦å¿˜è®°å¡«å†™Webä¸»æœºåŸŸåâ€”â€”è¿™ä¸ªæ˜¯æˆ‘ä»¬ä¹‹åé¢„è§ˆç½‘é¡µç”¨çš„ï¼</p>
<p>ç„¶åé€‰æ‹©<code>éƒ¨ç½²</code>ï¼Œå†ç‚¹å‡»<code>Gitæºç éƒ¨ç½²</code>ï¼ï¼ˆå‡å¦‚ä½ æœ‰èƒ½åŠ›ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©å‘½ä»¤è¡Œéƒ¨ç½²ï¼Œä½¿ç”¨Webhookè‡ªåŠ¨éƒ¨ç½²ï¼‰</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200331135315.png" alt=""></p>
<p>ç„¶åï¼Œæ‰“å¼€ä½ å¡«å†™çš„Webä¸»æœºåŸŸåï¼Œäº«ç”¨å§ï¼</p>]]></content><category scheme="https://raycoder.me/categories/%E5%85%8D%E8%B4%B9%E7%A9%BA%E9%97%B4/" term="å…è´¹ç©ºé—´" label="å…è´¹ç©ºé—´"/><category scheme="https://raycoder.me/tags/%E5%85%8D%E8%B4%B9%E7%A9%BA%E9%97%B4/" term="å…è´¹ç©ºé—´" label="å…è´¹ç©ºé—´"/><category scheme="https://raycoder.me/tags/%E7%BD%91%E7%AB%99/" term="ç½‘ç«™" label="ç½‘ç«™"/></entry><entry><title type="text">Pythonä¸­çš„yieldå…³é”®å­—åˆ†æï¼šä¸€ä¸ªGenerator</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/python-yield/"/><id>https://raycoder.me/p/python-yield/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-03-27T13:18:41+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">Pythonä¸­çš„Yieldå…³é”®å­—åˆ†æï¼šä¸€ä¸ªGenerator</summary><content type="html"><![CDATA[<blockquote>
<p><strong>å†™ä½œä¸æ˜“ï¼Œèµ„ç“·ä¸€ä¸‹å‘—ï¼ä¸ªäººåšå®¢ï¼š<a href="https://raycoder.me">https://raycoder.me</a></strong></p>
<p><strong>æœ¬æ–‡é¦–å‘äº<a href="https://raycoder.me/p/python-yield/">Ray's Blog</a></strong></p>
</blockquote>
<p>æˆ‘ä»¬å…ˆæ¥åº·ä¸€æ®µä»£ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">count</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
			<span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">count</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">4</span>
<span class="mi">5</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸€å°æ®µä»£ç æ‰§è¡Œäº†è®¡æ•°ï¼Œè¾“å‡ºäº†1-5ã€‚</p>
<p>ä¸è¿‡ï¼Œæœ‰æ—¶æˆ‘ä»¬ä¼šæœ‰ä¸€äº›æƒ³â™‚FAï¼Œæƒ³è¦æ¯æ¬¡è·å–ä¸‹ä¸€ä¸ªæ•°ï¼Œå¦‚ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶ç»™ä½ è¿”å›1ï¼Œç¬¬äºŒæ¬¡è¿”å›2ï¼Œç¬¬ä¸‰æ¬¡è¿”å›3â€¦â€¦å¦‚æ­¤å¦‚æ­¤ã€‚</p>
<p>ä½ å¯èƒ½ä¼šè¿™ä¹ˆåšï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">addone</span><span class="p">():</span>
		<span class="k">global</span> <span class="n">n</span>
		<span class="n">n</span><span class="o">+=</span><span class="mi">1</span>
		<span class="k">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">addone</span><span class="p">()</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">n</span>
<span class="mi">1</span>
</code></pre></td></tr></table>
</div>
</div><p>ä½†è¿™æ ·åˆæš´éœ²äº†ä¸€ä¸ªç¼ºç‚¹ï¼š<em class="emphasis-point">æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå…¨å±€å˜é‡</em>ã€‚æƒ³è¦é¿å…è¿™ç§ç¼ºç‚¹åˆè¦å®ç°è®¡æ•°çš„åŠŸèƒ½ï¼Œ<code>yield</code>å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p>
<p>æƒ³è¦å®ç°<code>Generator</code>çš„åŠŸèƒ½ï¼Œåªéœ€è¦å¯¹ä»£ç è¿›è¡Œä¸€å¤„æ”¹åŠ¨ï¼šæŠŠ<code>print()</code>æ”¹æˆ<code>yield</code>å³å¯ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">count</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
			<span class="k">yield</span> <span class="n">i</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">count</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span>
<span class="o">&lt;</span><span class="n">generator</span> <span class="nb">object</span> <span class="n">addone</span> <span class="n">at</span> <span class="mh">0x000002329F851048</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> 
</code></pre></td></tr></table>
</div>
</div><p>ä½ ä¼šå‘ç°ï¼Œè¿™ä¸ª<code>c</code>çš„ç±»å‹åƒæ˜¯ä¸€ä¸ªå¯¹è±¡äº†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">count</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="mi">4</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="mi">5</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&#34;&lt;pyshell#18&gt;&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="ne">StopIteration</span>
<span class="o">&gt;&gt;&gt;</span> 
</code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬ä½¿ç”¨äº†<code>next()</code>å†…ç½®å‡½æ•°è®©<code>Generator</code>è¿›è¡Œä¸‹ä¸€æ¬¡è¿­ä»£ã€‚ç”±æ­¤å¯è§ï¼Œ<em class="emphasis-point">yieldåƒæ˜¯ä¸€ä¸ªç±»ä¼¼äºreturnçš„è¿­ä»£å™¨</em>ã€‚</p>
<p>å†æ¥ä¸€ä¸ªç¤ºä¾‹ï¼Œç”Ÿæˆæ–æ³¢é‚£å¥‘æ•°åˆ—ï¼š</p>
<h5 id="1-ç®€å•è¾“å‡ºæ–æ³¢é‚£å¥‘æ•¸åˆ—å‰-n-ä¸ªæ•°">1. ç®€å•è¾“å‡ºæ–æ³¢é‚£å¥‘æ•¸åˆ—å‰ N ä¸ªæ•°</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">fab</span><span class="p">(</span><span class="nb">max</span><span class="p">):</span> 
   <span class="n">n</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> 
   <span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="nb">max</span><span class="p">:</span> 
       <span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
       <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> 
       <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span>
</code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œ fab(5)ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">fab</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="mi">1</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">5</span>
</code></pre></td></tr></table>
</div>
</div><p>ç»“æœæ²¡æœ‰é—®é¢˜ï¼Œä½†æœ‰ç»éªŒçš„å¼€å‘è€…ä¼šæŒ‡å‡ºï¼Œç›´æ¥åœ¨ fab å‡½æ•°ä¸­ç”¨ print æ‰“å°æ•°å­—ä¼šå¯¼è‡´è¯¥å‡½æ•°å¯å¤ç”¨æ€§è¾ƒå·®ï¼Œå› ä¸º fab å‡½æ•°è¿”å› Noneï¼Œå…¶ä»–å‡½æ•°æ— æ³•è·å¾—è¯¥å‡½æ•°ç”Ÿæˆçš„æ•°åˆ—ã€‚</p>
<p>è¦æé«˜ fab å‡½æ•°çš„å¯å¤ç”¨æ€§ï¼Œæœ€å¥½ä¸è¦ç›´æ¥æ‰“å°å‡ºæ•°åˆ—ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ª Listã€‚ä»¥ä¸‹æ˜¯ fab å‡½æ•°æ”¹å†™åçš„ç¬¬äºŒä¸ªç‰ˆæœ¬ï¼š</p>
<h5 id="2-è¾“å‡ºæ–æ³¢é‚£å¥‘æ•¸åˆ—å‰-n-ä¸ªæ•°ç¬¬äºŒç‰ˆ">2. è¾“å‡ºæ–æ³¢é‚£å¥‘æ•¸åˆ—å‰ N ä¸ªæ•°ç¬¬äºŒç‰ˆ</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">fab</span><span class="p">(</span><span class="nb">max</span><span class="p">):</span> 
   <span class="n">n</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> 
   <span class="n">L</span> <span class="o">=</span> <span class="p">[]</span> 
   <span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="nb">max</span><span class="p">:</span> 
       <span class="n">L</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> 
       <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> 
       <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span> 
   <span class="k">return</span> <span class="n">L</span>
</code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼æ‰“å°å‡º fab å‡½æ•°è¿”å›çš„ Listï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">fab</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span> 
<span class="o">...</span>     <span class="k">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="o">...</span> 
<span class="mi">1</span> 
<span class="mi">1</span> 
<span class="mi">2</span> 
<span class="mi">3</span> 
<span class="mi">5</span>
</code></pre></td></tr></table>
</div>
</div><p>æ”¹å†™åçš„ fab å‡½æ•°é€šè¿‡è¿”å› List èƒ½æ»¡è¶³å¤ç”¨æ€§çš„è¦æ±‚ï¼Œä½†æ˜¯æ›´æœ‰ç»éªŒçš„å¼€å‘è€…ä¼šæŒ‡å‡ºï¼Œè¯¥å‡½æ•°åœ¨è¿è¡Œä¸­å ç”¨çš„å†…å­˜ä¼šéšç€å‚æ•° max çš„å¢å¤§è€Œå¢å¤§ï¼Œå¦‚æœè¦æ§åˆ¶å†…å­˜å ç”¨ï¼Œæœ€å¥½ä¸è¦ç”¨ List</p>
<p>æ¥ä¿å­˜ä¸­é—´ç»“æœï¼Œè€Œæ˜¯é€šè¿‡ iterable å¯¹è±¡æ¥è¿­ä»£ã€‚ä¾‹å¦‚ï¼Œåœ¨ Python2.x ä¸­ï¼Œä»£ç ï¼š</p>
<h5 id="æ¸…å•-3-é€šè¿‡-iterable-å¯¹è±¡æ¥è¿­ä»£">æ¸…å• 3. é€šè¿‡ iterable å¯¹è±¡æ¥è¿­ä»£</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span> <span class="k">pass</span>
</code></pre></td></tr></table>
</div>
</div><p>ä¼šå¯¼è‡´ç”Ÿæˆä¸€ä¸ª 1000 ä¸ªå…ƒç´ çš„ Listï¼Œè€Œä»£ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span> <span class="k">pass</span>
</code></pre></td></tr></table>
</div>
</div><p>åˆ™ä¸ä¼šç”Ÿæˆä¸€ä¸ª 1000 ä¸ªå…ƒç´ çš„ Listï¼Œè€Œæ˜¯åœ¨æ¯æ¬¡è¿­ä»£ä¸­è¿”å›ä¸‹ä¸€ä¸ªæ•°å€¼ï¼Œå†…å­˜ç©ºé—´å ç”¨å¾ˆå°ã€‚å› ä¸º xrange ä¸è¿”å› Listï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ª iterable å¯¹è±¡ã€‚</p>
<p>åˆ©ç”¨ iterable æˆ‘ä»¬å¯ä»¥æŠŠ fab å‡½æ•°æ”¹å†™ä¸ºä¸€ä¸ªæ”¯æŒ iterable çš„ classï¼Œä»¥ä¸‹æ˜¯ç¬¬ä¸‰ä¸ªç‰ˆæœ¬çš„ Fabï¼š</p>
<h5 id="æ¸…å•-4-ç¬¬ä¸‰ä¸ªç‰ˆæœ¬">æ¸…å• 4. ç¬¬ä¸‰ä¸ªç‰ˆæœ¬</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Fab</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span> 
 
   <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">max</span><span class="p">):</span> 
       <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">=</span> <span class="nb">max</span> 
       <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> 
 
   <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
       <span class="k">return</span> <span class="bp">self</span> 
 
   <span class="k">def</span> <span class="nf">next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
       <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">:</span> 
           <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> 
           <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> 
           <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span> 
           <span class="k">return</span> <span class="n">r</span> 
       <span class="k">raise</span> <span class="ne">StopIteration</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><p>Fab ç±»é€šè¿‡ next() ä¸æ–­è¿”å›æ•°åˆ—çš„ä¸‹ä¸€ä¸ªæ•°ï¼Œå†…å­˜å ç”¨å§‹ç»ˆä¸ºå¸¸æ•°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">Fab</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span> 
<span class="o">...</span>     <span class="k">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="o">...</span> 
<span class="mi">1</span> 
<span class="mi">1</span> 
<span class="mi">2</span> 
<span class="mi">3</span> 
<span class="mi">5</span>
</code></pre></td></tr></table>
</div>
</div><p>ç„¶è€Œï¼Œä½¿ç”¨ class æ”¹å†™çš„è¿™ä¸ªç‰ˆæœ¬ï¼Œä»£ç è¿œè¿œæ²¡æœ‰ç¬¬ä¸€ç‰ˆçš„ fab å‡½æ•°æ¥å¾—ç®€æ´ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦ä¿æŒç¬¬ä¸€ç‰ˆ fab å‡½æ•°çš„ç®€æ´æ€§ï¼ŒåŒæ—¶åˆè¦è·å¾— iterable çš„æ•ˆæœï¼Œyield å°±æ´¾ä¸Šç”¨åœºäº†ï¼š</p>
<h5 id="æ¸…å•-5-ä½¿ç”¨-yield-çš„ç¬¬å››ç‰ˆ">æ¸…å• 5. ä½¿ç”¨ yield çš„ç¬¬å››ç‰ˆ</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">fab</span><span class="p">(</span><span class="nb">max</span><span class="p">):</span> 
    <span class="n">n</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> 
    <span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="nb">max</span><span class="p">:</span> 
        <span class="k">yield</span> <span class="n">b</span> 
        <span class="c1"># print(b)</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> 
        <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span> 
</code></pre></td></tr></table>
</div>
</div><p>ç¬¬å››ä¸ªç‰ˆæœ¬çš„ fab å’Œç¬¬ä¸€ç‰ˆç›¸æ¯”ï¼Œä»…ä»…æŠŠ print b æ”¹ä¸ºäº† yield bï¼Œå°±åœ¨ä¿æŒç®€æ´æ€§çš„åŒæ—¶è·å¾—äº† iterable çš„æ•ˆæœã€‚</p>
<p>è°ƒç”¨ç¬¬å››ç‰ˆçš„ fab å’Œç¬¬äºŒç‰ˆçš„ fab å®Œå…¨ä¸€è‡´ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">fab</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span> 
<span class="o">...</span>     <span class="k">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="o">...</span> 
<span class="mi">1</span> 
<span class="mi">1</span> 
<span class="mi">2</span> 
<span class="mi">3</span> 
<span class="mi">5</span>
</code></pre></td></tr></table>
</div>
</div><p>ç®€å•åœ°è®²ï¼Œyield çš„ä½œç”¨å°±æ˜¯æŠŠä¸€ä¸ªå‡½æ•°å˜æˆä¸€ä¸ª generatorï¼Œå¸¦æœ‰ yield çš„å‡½æ•°ä¸å†æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼ŒPython è§£é‡Šå™¨ä¼šå°†å…¶è§†ä¸ºä¸€ä¸ª generatorï¼Œè°ƒç”¨ fab(5) ä¸ä¼šæ‰§è¡Œ fab å‡½æ•°ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ª iterable å¯¹è±¡ï¼åœ¨ for å¾ªç¯æ‰§è¡Œæ—¶ï¼Œæ¯æ¬¡å¾ªç¯éƒ½ä¼šæ‰§è¡Œ fab å‡½æ•°å†…éƒ¨çš„ä»£ç ï¼Œæ‰§è¡Œåˆ° yield b æ—¶ï¼Œfab å‡½æ•°å°±è¿”å›ä¸€ä¸ªè¿­ä»£å€¼ï¼Œä¸‹æ¬¡è¿­ä»£æ—¶ï¼Œä»£ç ä» yield b çš„ä¸‹ä¸€æ¡è¯­å¥ç»§ç»­æ‰§è¡Œï¼Œè€Œå‡½æ•°çš„æœ¬åœ°å˜é‡çœ‹èµ·æ¥å’Œä¸Šæ¬¡ä¸­æ–­æ‰§è¡Œå‰æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œäºæ˜¯å‡½æ•°ç»§ç»­æ‰§è¡Œï¼Œç›´åˆ°å†æ¬¡é‡åˆ° yieldã€‚</p>
<p>ä¹Ÿå¯ä»¥æ‰‹åŠ¨è°ƒç”¨ fab(5) çš„ next() æ–¹æ³•ï¼ˆå› ä¸º fab(5) æ˜¯ä¸€ä¸ª generator å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å…·æœ‰ next() æ–¹æ³•ï¼‰ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ›´æ¸…æ¥šåœ°çœ‹åˆ° fab çš„æ‰§è¡Œæµç¨‹ï¼š</p>
<h5 id="æ¸…å•-6-æ‰§è¡Œæµç¨‹">æ¸…å• 6. æ‰§è¡Œæµç¨‹</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="n">fab</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">next</span><span class="p">()</span> 
<span class="mi">1</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">next</span><span class="p">()</span> 
<span class="mi">1</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">next</span><span class="p">()</span> 
<span class="mi">2</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">next</span><span class="p">()</span> 
<span class="mi">3</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">next</span><span class="p">()</span> 
<span class="mi">5</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">next</span><span class="p">()</span> 
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span> 
 <span class="n">File</span> <span class="s2">&#34;&lt;stdin&gt;&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span> 
<span class="ne">StopIteration</span>
</code></pre></td></tr></table>
</div>
</div><p>å½“å‡½æ•°æ‰§è¡Œç»“æŸæ—¶ï¼Œgenerator è‡ªåŠ¨æŠ›å‡º StopIteration å¼‚å¸¸ï¼Œè¡¨ç¤ºè¿­ä»£å®Œæˆã€‚åœ¨ for å¾ªç¯é‡Œï¼Œæ— éœ€å¤„ç† StopIteration å¼‚å¸¸ï¼Œå¾ªç¯ä¼šæ­£å¸¸ç»“æŸã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š</p>
<p>ä¸€ä¸ªå¸¦æœ‰ yield çš„å‡½æ•°å°±æ˜¯ä¸€ä¸ª generatorï¼Œå®ƒå’Œæ™®é€šå‡½æ•°ä¸åŒï¼Œç”Ÿæˆä¸€ä¸ª generator çœ‹èµ·æ¥åƒå‡½æ•°è°ƒç”¨ï¼Œä½†ä¸ä¼šæ‰§è¡Œä»»ä½•å‡½æ•°ä»£ç ï¼Œç›´åˆ°å¯¹å…¶è°ƒç”¨ next()ï¼ˆåœ¨ for å¾ªç¯ä¸­ä¼šè‡ªåŠ¨è°ƒç”¨ next()ï¼‰æ‰å¼€å§‹æ‰§è¡Œã€‚è™½ç„¶æ‰§è¡Œæµç¨‹ä»æŒ‰å‡½æ•°çš„æµç¨‹æ‰§è¡Œï¼Œä½†æ¯æ‰§è¡Œåˆ°ä¸€ä¸ª yield è¯­å¥å°±ä¼šä¸­æ–­ï¼Œå¹¶è¿”å›ä¸€ä¸ªè¿­ä»£å€¼ï¼Œä¸‹æ¬¡æ‰§è¡Œæ—¶ä» yield çš„ä¸‹ä¸€ä¸ªè¯­å¥ç»§ç»­æ‰§è¡Œã€‚çœ‹èµ·æ¥å°±å¥½åƒä¸€ä¸ªå‡½æ•°åœ¨æ­£å¸¸æ‰§è¡Œçš„è¿‡ç¨‹ä¸­è¢« yield ä¸­æ–­äº†æ•°æ¬¡ï¼Œæ¯æ¬¡ä¸­æ–­éƒ½ä¼šé€šè¿‡ yield è¿”å›å½“å‰çš„è¿­ä»£å€¼ã€‚</p>
<p>yield çš„å¥½å¤„æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼ŒæŠŠä¸€ä¸ªå‡½æ•°æ”¹å†™ä¸ºä¸€ä¸ª generator å°±è·å¾—äº†è¿­ä»£èƒ½åŠ›ï¼Œæ¯”èµ·ç”¨ç±»çš„å®ä¾‹ä¿å­˜çŠ¶æ€æ¥è®¡ç®—ä¸‹ä¸€ä¸ª next() çš„å€¼ï¼Œä¸ä»…ä»£ç ç®€æ´ï¼Œè€Œä¸”æ‰§è¡Œæµç¨‹å¼‚å¸¸æ¸…æ™°ã€‚</p>
<p>å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå‡½æ•°æ˜¯å¦æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ generator å‡½æ•°ï¼Ÿå¯ä»¥åˆ©ç”¨ isgeneratorfunction åˆ¤æ–­ï¼š</p>
<h5 id="æ¸…å•-7-ä½¿ç”¨-isgeneratorfunction-åˆ¤æ–­">æ¸…å• 7. ä½¿ç”¨ isgeneratorfunction åˆ¤æ–­</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">inspect</span> <span class="kn">import</span> <span class="n">isgeneratorfunction</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="n">isgeneratorfunction</span><span class="p">(</span><span class="n">fab</span><span class="p">)</span> 
<span class="bp">True</span>
</code></pre></td></tr></table>
</div>
</div><p>è¦æ³¨æ„åŒºåˆ† fab å’Œ fab(5)ï¼Œfab æ˜¯ä¸€ä¸ª generator functionï¼Œè€Œ fab(5) æ˜¯è°ƒç”¨ fab è¿”å›çš„ä¸€ä¸ª generatorï¼Œå¥½æ¯”ç±»çš„å®šä¹‰å’Œç±»çš„å®ä¾‹çš„åŒºåˆ«ï¼š</p>
<h5 id="æ¸…å•-8-ç±»çš„å®šä¹‰å’Œç±»çš„å®ä¾‹">æ¸…å• 8. ç±»çš„å®šä¹‰å’Œç±»çš„å®ä¾‹</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">types</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fab</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">GeneratorType</span><span class="p">)</span> 
<span class="bp">False</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fab</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">types</span><span class="o">.</span><span class="n">GeneratorType</span><span class="p">)</span> 
<span class="bp">True</span>
</code></pre></td></tr></table>
</div>
</div><p>fab æ˜¯æ— æ³•è¿­ä»£çš„ï¼Œè€Œ fab(5) æ˜¯å¯è¿­ä»£çš„ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Iterable</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fab</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">)</span> 
<span class="bp">False</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fab</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">Iterable</span><span class="p">)</span> 
<span class="bp">True</span>
</code></pre></td></tr></table>
</div>
</div><p>æ¯æ¬¡è°ƒç”¨ fab å‡½æ•°éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ generator å®ä¾‹ï¼Œå„å®ä¾‹äº’ä¸å½±å“ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">f1</span> <span class="o">=</span> <span class="n">fab</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="n">f2</span> <span class="o">=</span> <span class="n">fab</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="s1">&#39;f1:&#39;</span><span class="p">,</span> <span class="n">f1</span><span class="o">.</span><span class="n">next</span><span class="p">())</span>
<span class="n">f1</span><span class="p">:</span> <span class="mi">1</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="s1">&#39;f2:&#39;</span><span class="p">,</span> <span class="n">f2</span><span class="o">.</span><span class="n">next</span><span class="p">())</span>
<span class="n">f2</span><span class="p">:</span> <span class="mi">1</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="s1">&#39;f1:&#39;</span><span class="p">,</span> <span class="n">f1</span><span class="o">.</span><span class="n">next</span><span class="p">())</span>
<span class="n">f1</span><span class="p">:</span> <span class="mi">1</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="s1">&#39;f2:&#39;</span><span class="p">,</span> <span class="n">f2</span><span class="o">.</span><span class="n">next</span><span class="p">())</span>
<span class="n">f2</span><span class="p">:</span> <span class="mi">1</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="s1">&#39;f1:&#39;</span><span class="p">,</span> <span class="n">f1</span><span class="o">.</span><span class="n">next</span><span class="p">())</span>
<span class="n">f1</span><span class="p">:</span> <span class="mi">2</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="s1">&#39;f2:&#39;</span><span class="p">,</span> <span class="n">f2</span><span class="o">.</span><span class="n">next</span><span class="p">())</span>
<span class="n">f2</span><span class="p">:</span> <span class="mi">2</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="s1">&#39;f2:&#39;</span><span class="p">,</span> <span class="n">f2</span><span class="o">.</span><span class="n">next</span><span class="p">())</span>
<span class="n">f2</span><span class="p">:</span> <span class="mi">3</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="s1">&#39;f2:&#39;</span><span class="p">,</span> <span class="n">f2</span><span class="o">.</span><span class="n">next</span><span class="p">())</span>
<span class="n">f2</span><span class="p">:</span> <span class="mi">5</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="return-çš„ä½œç”¨">return çš„ä½œç”¨</h2>
<p>åœ¨ä¸€ä¸ª generator function ä¸­ï¼Œå¦‚æœæ²¡æœ‰ returnï¼Œåˆ™é»˜è®¤æ‰§è¡Œè‡³å‡½æ•°å®Œæ¯•ï¼Œå¦‚æœåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ returnï¼Œåˆ™ç›´æ¥æŠ›å‡º StopIteration ç»ˆæ­¢è¿­ä»£ã€‚</p>
<h2 id="å¦ä¸€ä¸ªä¾‹å­">å¦ä¸€ä¸ªä¾‹å­</h2>
<p>å¦ä¸€ä¸ª yield çš„ä¾‹å­æ¥æºäºæ–‡ä»¶è¯»å–ã€‚å¦‚æœç›´æ¥å¯¹æ–‡ä»¶å¯¹è±¡è°ƒç”¨ read() æ–¹æ³•ï¼Œä¼šå¯¼è‡´ä¸å¯é¢„æµ‹çš„å†…å­˜å ç”¨ã€‚å¥½çš„æ–¹æ³•æ˜¯åˆ©ç”¨å›ºå®šé•¿åº¦çš„ç¼“å†²åŒºæ¥ä¸æ–­è¯»å–æ–‡ä»¶å†…å®¹ã€‚é€šè¿‡ yieldï¼Œæˆ‘ä»¬ä¸å†éœ€è¦ç¼–å†™è¯»æ–‡ä»¶çš„è¿­ä»£ç±»ï¼Œå°±å¯ä»¥è½»æ¾å®ç°æ–‡ä»¶è¯»å–ï¼š</p>
<h5 id="æ¸…å•-9-å¦ä¸€ä¸ª-yield-çš„ä¾‹å­">æ¸…å• 9. å¦ä¸€ä¸ª yield çš„ä¾‹å­</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">read_file</span><span class="p">(</span><span class="n">fpath</span><span class="p">):</span> 
   <span class="n">BLOCK_SIZE</span> <span class="o">=</span> <span class="mi">1024</span> 
   <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fpath</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> 
       <span class="k">while</span> <span class="bp">True</span><span class="p">:</span> 
           <span class="n">block</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">BLOCK_SIZE</span><span class="p">)</span> 
           <span class="k">if</span> <span class="n">block</span><span class="p">:</span> 
               <span class="k">yield</span> <span class="n">block</span> 
           <span class="k">else</span><span class="p">:</span> 
               <span class="k">return</span>
</code></pre></td></tr></table>
</div>
</div><p>ä»¥ä¸Šä»…ä»…ç®€å•ä»‹ç»äº† yield çš„åŸºæœ¬æ¦‚å¿µå’Œç”¨æ³•ï¼Œæˆ‘ä»¬ä¼šåœ¨åç»­æ–‡ç« ä¸­è®¨è®ºã€‚</p>
<p>è½¬è½½äº†ä¸€éƒ¨åˆ†å†…å®¹ï¼š<a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-python-yield">Python yield ä½¿ç”¨æµ…æ | IBM</a></p>
]]></content><category scheme="https://raycoder.me/categories/python/" term="Python" label="Python"/><category scheme="https://raycoder.me/categories/python%E5%85%B3%E9%94%AE%E5%AD%97/" term="Pythonå…³é”®å­—" label="Pythonå…³é”®å­—"/><category scheme="https://raycoder.me/categories/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" term="Pythonå­¦ä¹ ç¬”è®°" label="Pythonå­¦ä¹ ç¬”è®°"/><category scheme="https://raycoder.me/tags/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" term="Pythonå­¦ä¹ ç¬”è®°" label="Pythonå­¦ä¹ ç¬”è®°"/><category scheme="https://raycoder.me/tags/python/" term="Python" label="Python"/><category scheme="https://raycoder.me/tags/python%E5%85%B3%E9%94%AE%E5%AD%97/" term="Pythonå…³é”®å­—" label="Pythonå…³é”®å­—"/></entry><entry><title type="text">å»ºç«‹ä¸ªäººåšå®¢é…ç½®æ¨è</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/build-a-blog-recommendation/"/><id>https://raycoder.me/p/build-a-blog-recommendation/</id><updated>2020-04-10T13:47:29+08:00</updated><published>2020-03-26T15:48:50+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">Build a Blog Recommendation/å»ºç«‹ä¸ªäººåšå®¢é…ç½®æ¨è</summary><content type="html"><![CDATA[<p>å»ºç«‹ä¸ªäººåšå®¢ç™½å«–æ¨èï¼š</p>
<ul>
<li>æ¡†æ¶/ä¸»é¢˜ï¼š<a href="https://gohugo.io">Hugo</a>&amp;<a href="https://github.com/reuixiy/hugo-theme-meme">MemE</a></li>
<li>æºç æ‰˜ç®¡ï¼š<a href="https://github.com">GitHub</a></li>
<li>ç½‘ç«™æŒç»­é›†æˆéƒ¨ç½²ï¼š<a href="https://netlify.com">Netlify</a></li>
<li>ç½‘ç«™DNSè§£ææœåŠ¡/å…è´¹CDNï¼š<a href="https://cloudflare.com">Cloudflare</a></li>
<li>ï¼ˆå¯é€‰ï¼‰å…è´¹CDNï¼š<a href="https://nodecache.com">NodeCache</a>&amp;<a href="https://ddos-guard.net">DDOS Guard</a></li>
<li>ç»Ÿè®¡ï¼š<a href="https://tongji.baidu.com">ç™¾åº¦ç»Ÿè®¡</a>/<a href="https://analytics.google.com">Google Analytics</a></li>
</ul>
<p>ç™½å«–æˆåŠŸï¼ŒåºŸè¯ä¸è¯´å¼€å§‹å»ºç«™ï¼æœ¬æ–‡é‡‡ç”¨æ“ä½œç³»ç»Ÿï¼š<code>Windows 10 2004 19587.1000</code>ï¼Œå…¶ä»–ç³»ç»Ÿè¯·ä¸¾ä¸€åä¸‰ï¼Œé‡‡ç”¨<code>Git BASH</code>ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200326164618.jpg" alt=""></p>
<hr>
<h3 id="hugomeme">Hugo&amp;MemE</h3>
<p>é¦–å…ˆï¼Œå…ˆå»ä¸‹è½½<a href="https://github.com/gohugoio/hugo"><code>Hugo</code></a>ã€‚åœ¨ä½ çœ‹åˆ°è¿™ç¯‡æ–‡ç« ä¹‹å‰ï¼Œä½ å¯èƒ½å·²ç»é˜…è¯»äº†è®¸å¤šå»ºåšå®¢æ•™ç¨‹ï¼Œä¹Ÿè®¸æ˜¯æ¨èä½¿ç”¨<a href="https://hexo.io"><code>Hexo</code></a>ï¼Œæˆ–æ˜¯<a href="https://typecho.org"><code>Typecho</code></a>ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯<a href="https://wordpress.org"><code>WordPress</code></a>ï¼Œ<a href="https://gridea.dev"><code>Gridea</code></a>ï¼Œ<a href="https://ghost.org"><code>Ghost</code></a>â€¦â€¦ä½†æ˜¯ï¼ä½†æ˜¯ï¼ä¸ºä»€ä¹ˆæˆ‘è¦æ¨èä¸€ä¸ªçŸ¥ååº¦åœ¨å›½å†…éƒ½ä¸å¦‚<a href="https://hexo.io"><code>Hexo</code></a>çš„ç½‘ç«™æ¡†æ¶å‘¢ï¼ŸåŸå› æœ‰3ï¼š</p>
<ol>
<li><a href="https://github.com/gohugoio/hugo"><code>Hugo</code></a>é‡‡ç”¨<a href="https://golang.google.cn"><code>Go Lang</code></a>ç½‘ç«™ç”Ÿæˆé€Ÿåº¦å¿«ï¼Œæ–‡ç« å¤šäº†å®Œçˆ†<a href="https://hexo.io"><code>Hexo</code></a>ï¼›</li>
<li>æ”¯æŒæŒç»­é›†æˆéƒ¨ç½²ï¼›</li>
<li>æœ€æœ€é‡è¦çš„ä¸€ç‚¹ï¼š<em class="emphasis-point">å†…ç½®çŸ­ä»£ç è¯­è¨€</em>ï¼Œå¯å®šåˆ¶æ€§æé«˜ï¼ä½ å¯ä»¥çœ‹çœ‹æœ¬æ–‡çš„<a href="https://github.com/FFRaycoder/blog/blob/master/content/p/build-a-blog-recommendation.md">çº¯æ–‡æœ¬ç‰ˆæœ¬</a>ï¼Œå‰é¢çš„<em class="emphasis-point">åŠ ç‚¹å­—</em>ï¼Œä¾¿æ˜¯è‡ªå®šä¹‰çš„çŸ­ä»£ç ã€‚</li>
</ol>
<p>æ³¨æ„ï¼šå¦‚æœä½ è·Ÿéšæœ¬æ–‡æ•™ç¨‹æ­å»ºåšå®¢ï¼Œé‚£ä¹ˆè¯·åœ¨<a href=""><code>Releases</code></a>ç•Œé¢ä¸‹è½½æ‹“å±•ç‰ˆHugoï¼Œæ–‡ä»¶åå¦‚<code>hugo_extended_X.Y.Z_SYS-64bit.zip</code>ï¼Œå…å®‰è£…çš„ã€‚</p>
<p>ä¸‹è½½åéœ€è¦å°†å®ƒä¿å­˜åˆ°ä¸€ä¸ªå›ºå®šçš„ç›®å½•ï¼Œéšæ„ã€‚æˆ‘ä¸å»ºè®®æ”¾åˆ°<code>C:/Windows/System32</code>ä¸‹ï¼Œå› ä¸º<code>Hugo</code>æ›´æ–°çš„<em class="emphasis-point">å¾ˆå‹¤</em>ã€‚</p>
<p>ä¸‹è½½ä¿å­˜è§£å‹ååœ¨ä¸€ä¸ª<em class="emphasis-point">åšå®¢ä¸“ç”¨ç›®å½•</em>ï¼ˆä¸ªäººå»ºè®®ï¼‰ä¸‹è¿è¡Œå‘½ä»¤ï¼ˆ<code>CMD</code>,<a href="https://git-scm.com"><code>Git BASH</code></a>éƒ½å¯ï¼Œæ¨è<code>Git BASH</code>ï¼Œå¯æ‰§è¡Œå‘½ä»¤æ¯”CMDå¤šã€‚ï¼‰ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">$ hugo new site blog
</code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­ï¼Œ<code>hugo</code>ä»£è¡¨è¿™æ˜¯ä¸€ä¸ªHUGOæŒ‡ä»¤ï¼ˆå‰ææ˜¯è¦å…ˆå°†ä¿å­˜<code>hugo.exe</code>çš„æ–‡ä»¶å¤¹æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">bash: hugo: <span class="nb">command</span> not found
</code></pre></td></tr></table>
</div>
</div><p>æ•™ç¨‹ï¼š<a href="https://baijiahao.baidu.com/s?id=1652502091402613426">ç¯å¢ƒå˜é‡æ·»åŠ æ•™ç¨‹</a></p>
<p>å½“ç„¶ï¼Œ<code>blog</code>ä¹Ÿå¯ä»¥è‡ªå·±ä¿®æ”¹åç§°ã€‚</p>
<p>åˆ›å»ºå®Œä¸€ä¸ªåšå®¢æ–‡ä»¶å¤¹åï¼Œé‡Œé¢éå¸¸ç©ºæ—·ï¼š</p>
<pre><code>â”œâ”€config.toml
â”‚
â”œâ”€archetypes
â”‚      default.md
â”‚
â”œâ”€content
â”œâ”€data
â”œâ”€layouts
â”œâ”€static
â””â”€themes
</code></pre><p>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±è¦ä¸‹è½½ä¸€ä¸ªä¸»é¢˜äº†ï¼šæˆ‘è¿™é‡Œä»¥<a href="https://github.com/reuixiy/hugo-theme-meme">MemE</a>åšç¤ºä¾‹ã€‚</p>
<p>æŠŠä¸»é¢˜<code>clone</code>åˆ°æœ¬åœ°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">$ git clone https://github.com/reuixiy/hugo-theme-meme.git themes/meme
</code></pre></td></tr></table>
</div>
</div><p>å…¶å®æˆ‘æ¨èè¿™ä¸ªä¸»é¢˜æ˜¯æœ‰åŸå› çš„ï¼š</p>
<ol>
<li>ç•Œé¢ç®€æ´ï¼ˆå¦‚æœ¬ç«™ï¼‰</li>
<li>è‡ªå¸¦è®¸å¤šé…ç½®åŠŸèƒ½</li>
<li>è‡ªå¸¦<code>Service Worker</code>&amp;<code>PWA</code></li>
<li>......</li>
</ol>
<p>é…ç½®/å†™ä½œæœ¬æ–‡ä¾¿ä¸å†èµ˜è¿°ï¼Œè¯·å‚é˜…ï¼š</p>
<ul>
<li>
<p><a href="https://baijiahao.baidu.com/s?id=1630800288039248525">hugo+githubåšå®¢æ­å»ºæ•™ç¨‹ï¼ | ç™¾å®¶å·</a></p>
</li>
<li>
<p><a href="https://www.jianshu.com/p/8c3d7dfb09a0">ä½¿ç”¨Hugoæ­å»ºè‡ªå·±çš„åšå®¢ | ç®€ä¹¦</a></p>
</li>
<li>
<p><a href="https://github.com/reuixiy/hugo-theme-meme/blob/master/README.zh-cn.md">README | GitHub</a></p>
</li>
<li>
<p><a href="https://io-oi.me/tech/documentation-of-hugo-theme-meme/">Hugo ä¸»é¢˜ MemE æ–‡æ¡£ | reuixiy</a></p>
</li>
</ul>
<hr>
<h3 id="æºç æ‰˜ç®¡è‡³github">æºç æ‰˜ç®¡è‡³GitHub</h3>
<p>è¿™ä¸ªå¾ˆç®€å•ï¼Œåœ¨GitHubä¸Šé¢æ–°å»ºä¸€ä¸ªä»“åº“ï¼Œåå­—éšä¾¿å–ï¼Œç„¶åå°†ä½ çš„æ•´ä¸ªåšå®¢æ–‡ä»¶å¤¹Pushä¸Šå»å³å¯ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200326220659.png" alt=""></p>
<p>çœ‹åˆ°é‚£ä¸ªå¤§ç»¿æŒ‰é’®äº†å§ï¼Ÿï¼è‡ªå·±æ ¹æ®æç¤ºæ–°å»ºä¸€ä¸ªä»“åº“ï¼</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">$ git init
$ git remote add origin &lt;YOUR_REPO&gt;
$ git add -A
$ git commit -m <span class="s2">&#34;init&#34;</span>
$ git push -u origin master
</code></pre></td></tr></table>
</div>
</div><p>è¯·åœ¨<code>&lt;YOUR_REPO&gt;</code>ä¸­å¡«å…¥ä½ ä»“åº“çš„<code>.git</code>åœ°å€ï¼</p>
<p>çœ‹ä¸æ‡‚çš„è¯·å‚è€ƒ<a href="https://www.liaoxuefeng.com/wiki/896043488029600">å»–é›ªå³°çš„Gitæ•™ç¨‹</a>ï¼</p>
<hr>
<h3 id="ç½‘ç«™æŒç»­é›†æˆéƒ¨ç½²">ç½‘ç«™æŒç»­é›†æˆéƒ¨ç½²</h3>
<p>è¯·å‚è€ƒ<a href="/p/deploy-your-hugo-and-hexo-blog-to-netlify">Hugo-MemE/Hexo(çœŸ)è‡ªåŠ¨æ¨é€éƒ¨ç½²è‡³Netlify</a></p>
<hr>
<p><strong>æ³¨æ„ï¼šä»¥ä¸‹ä¸¤ä¸ªæ“ä½œä»…é€‚ç”¨äºæœ‰ç‹¬ç«‹åŸŸåçš„åšä¸»ï¼</strong></p>
<h3 id="ç½‘ç«™dnsè§£ææœåŠ¡å…è´¹cdn">ç½‘ç«™DNSè§£ææœåŠ¡/å…è´¹CDN</h3>
<p>è¿™ä¸ªå¾ˆç®€å•ï¼Œåªéœ€è¦ä½ åœ¨<a href="https://cloudflare.com">Cloudflare</a>ä¸­åˆ›å»ºä¸€ä¸ªè´¦å·ï¼Œç„¶åç‚¹å‡»è¿™ä¸ª<strong>å¤§å¤§çš„æŒ‰é’®</strong>å³å¯ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200327131457.png" alt=""></p>
<p>æŒ‰ç…§æç¤ºå°†ä½ åŸŸåçš„<code>NS</code>è®¾ç½®ä¸ºå®ƒç»™ä½ æä¾›çš„<code>NS</code>åœ°å€ã€‚</p>
<p>å…è´¹CDNåªéœ€è¦ä½ åœ¨æ·»åŠ è§£ææ—¶é€‰ä¸­<code>Proxied</code>é‚£å¨äº‘å½¢å›¾æ¡ˆå°±å¯ä»¥äº†ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200327132301.png" alt=""></p>
<hr>
<h3 id="å¯é€‰å…è´¹cdn">ï¼ˆå¯é€‰ï¼‰å…è´¹CDN</h3>
<p><a href="https://nodecache.com">NodeCache</a>æœ‰ä¸­æ–‡ç•Œé¢ï¼Œè‡ªå·±æğŸ˜</p>
<p><a href="https://ddos-guard.net">DDOS Guard</a>çš„é…ç½®å¯ä»¥å‚è€ƒæˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼š<a href="/p/ddos-guard-free-cdn/">DDOS-Guardå…è´¹CDN</a></p>
<hr>
<h3 id="ç»Ÿè®¡">ç»Ÿè®¡</h3>
<h4 id="ç™¾åº¦ç»Ÿè®¡">ç™¾åº¦ç»Ÿè®¡</h4>
<p>æ‰“å¼€<a href="https://tongji.baidu.com/">ç™¾åº¦ç»Ÿè®¡å®˜ç½‘</a>ï¼Œç™»å½•åæ·»åŠ ä¸€ä¸ªç«™ç‚¹ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200329114926.png" alt=""></p>
<p>ç„¶åè·å–ä»£ç ï¼ŒæŠŠå®ƒæ’å…¥åˆ°<code>&lt;/head&gt;</code>æ ‡ç­¾å‰å³å¯ã€‚</p>
<p>å®˜æ–¹æâ™‚ç¤ºï¼š</p>
<ol>
<li>è¯·å°†ä»£ç æ·»åŠ åˆ°ç½‘ç«™å…¨éƒ¨é¡µé¢çš„</head>æ ‡ç­¾å‰ã€‚</li>
<li>å»ºè®®åœ¨header.htmç±»ä¼¼çš„é¡µå¤´æ¨¡æ¿é¡µé¢ä¸­å®‰è£…ï¼Œä»¥è¾¾åˆ°ä¸€å¤„å®‰è£…ï¼Œå…¨ç«™çš†æœ‰çš„æ•ˆæœã€‚</li>
<li>å¦‚éœ€åœ¨JSæ–‡ä»¶ä¸­è°ƒç”¨ç»Ÿè®¡åˆ†æä»£ç ï¼Œè¯·ç›´æ¥å»æ‰ä»¥ä¸‹ä»£ç é¦–å°¾çš„ï¼Œ<code>&lt;script type=&quot;text/javascript&quot;&gt;</code>ä¸<code>&lt;/script&gt;</code>åï¼Œæ”¾å…¥JSæ–‡ä»¶ä¸­å³å¯ã€‚</li>
</ol>
<p>å¦‚æœä»£ç å®‰è£…æ­£ç¡®ï¼Œä¸€èˆ¬20åˆ†é’Ÿåï¼Œå¯ä»¥æŸ¥çœ‹ç½‘ç«™åˆ†ææ•°æ®ã€‚</p>
<h4 id="è°·æ­Œç»Ÿè®¡">è°·æ­Œç»Ÿè®¡</h4>
<p>è°·æ­Œç»Ÿè®¡å®˜ç½‘ï¼š<a href="https://analytics.google.com">https://analytics.google.com</a></p>
<p>è¿˜æ˜¯ä¸€æ ·çš„æ–°å¢ç½‘ç«™æ’å…¥ä»£ç ğŸ˜‘å³å¯</p>
]]></content><category scheme="https://raycoder.me/categories/%E5%8D%9A%E5%AE%A2/" term="åšå®¢" label="åšå®¢"/><category scheme="https://raycoder.me/categories/%E6%8A%98%E8%85%BE/" term="æŠ˜è…¾" label="æŠ˜è…¾"/><category scheme="https://raycoder.me/tags/%E5%8D%9A%E5%AE%A2/" term="åšå®¢" label="åšå®¢"/><category scheme="https://raycoder.me/tags/%E6%8A%98%E8%85%BE/" term="æŠ˜è…¾" label="æŠ˜è…¾"/><category scheme="https://raycoder.me/tags/github-pages/" term="GitHub Pages" label="GitHub Pages"/><category scheme="https://raycoder.me/tags/hugo/" term="Hugo" label="Hugo"/><category scheme="https://raycoder.me/tags/netlify/" term="Netlify" label="Netlify"/><category scheme="https://raycoder.me/tags/cloudflare/" term="Cloudflare" label="Cloudflare"/></entry><entry><title type="text">Pythonä¸­çš„å­—ç¬¦ä¸²è½¬ä¹‰å­—ç¬¦</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/python-special-characters/"/><id>https://raycoder.me/p/python-special-characters/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-03-24T12:02:40+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">Pythonä¸­çš„å­—ç¬¦ä¸²ç‰¹æ®Š/è½¬ä¹‰å­—ç¬¦</summary><content type="html"><![CDATA[<p>ä»Šå¤©ä¸çŸ¥é“åƒå•¥ï¼Œå°±<del>åƒè€å…«ç§˜åˆ¶å°æ±‰å ¡</del>åº·Rayçš„Pythonå­—ç¬¦ä¸²ç‰¹æ®Šå­—ç¬¦è§£æ~~</p>
<table>
<thead>
<tr>
<th align="center">è½¬ä¹‰å­—ç¬¦</th>
<th align="center">æ„ä¹‰</th>
<th align="center">ASCIIç å€¼ï¼ˆåè¿›åˆ¶ï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">\a</td>
<td align="center">å“é“ƒ(BEL)</td>
<td align="center">007</td>
</tr>
<tr>
<td align="center">\b</td>
<td align="center">é€€æ ¼(BS)ï¼Œå°†å½“å‰ä½ç½®ç§»åˆ°å‰ä¸€åˆ—</td>
<td align="center">008</td>
</tr>
<tr>
<td align="center">\f</td>
<td align="center">æ¢é¡µ(FF)ï¼Œå°†å½“å‰ä½ç½®ç§»åˆ°ä¸‹é¡µå¼€å¤´</td>
<td align="center">012</td>
</tr>
<tr>
<td align="center">\n</td>
<td align="center">æ¢è¡Œ(LF)ï¼Œå°†å½“å‰ä½ç½®ç§»åˆ°ä¸‹ä¸€è¡Œå¼€å¤´<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></td>
<td align="center">010</td>
</tr>
<tr>
<td align="center">\r</td>
<td align="center">å›è½¦(CR)ï¼Œå°†å½“å‰ä½ç½®ç§»åˆ°æœ¬è¡Œå¼€å¤´<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></td>
<td align="center">013</td>
</tr>
<tr>
<td align="center">\t</td>
<td align="center">æ°´å¹³åˆ¶è¡¨(HT) (è·³åˆ°ä¸‹ä¸€ä¸ªTABä½ç½®)</td>
<td align="center">009</td>
</tr>
<tr>
<td align="center">\v</td>
<td align="center">å‚ç›´åˆ¶è¡¨(VT)</td>
<td align="center">011</td>
</tr>
<tr>
<td align="center">\\</td>
<td align="center">ä»£è¡¨ä¸€ä¸ªåæ–œçº¿å­—ç¬¦&quot;\&quot;</td>
<td align="center">092</td>
</tr>
<tr>
<td align="center">\'</td>
<td align="center">ä»£è¡¨ä¸€ä¸ªå•å¼•å·(æ’‡å·)å­—ç¬¦</td>
<td align="center">039</td>
</tr>
<tr>
<td align="center">\&quot;</td>
<td align="center">ä»£è¡¨ä¸€ä¸ªåŒå¼•å·å­—ç¬¦</td>
<td align="center">034</td>
</tr>
<tr>
<td align="center">?</td>
<td align="center">ä»£è¡¨ä¸€ä¸ªé—®å·</td>
<td align="center">063</td>
</tr>
<tr>
<td align="center">\0</td>
<td align="center">ç©ºå­—ç¬¦(NUL)</td>
<td align="center">000</td>
</tr>
<tr>
<td align="center">\ddd</td>
<td align="center">1åˆ°3ä½å…«è¿›åˆ¶æ•°æ‰€ä»£è¡¨çš„ä»»æ„å­—ç¬¦</td>
<td align="center">ä¸‰ä½å…«è¿›åˆ¶</td>
</tr>
<tr>
<td align="center">\xhh</td>
<td align="center">åå…­è¿›åˆ¶æ‰€ä»£è¡¨çš„ä»»æ„å­—ç¬¦</td>
<td align="center">åå…­è¿›åˆ¶</td>
</tr>
</tbody>
</table>
<p>æ€»ä¹‹ï¼Œå‡¡æ˜¯å­—ç¬¦å‰å¸¦<code>\</code>çš„ï¼Œä¸€å¾‹è½¬ä¹‰ã€‚</p>
<hr>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="s1">&#39;1</span><span class="se">\n</span><span class="s1">2&#39;</span><span class="p">)</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="s1">&#39;1</span><span class="se">\r</span><span class="s1">2&#39;</span><span class="p">)</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="s1">&#39;1</span><span class="se">\r\n</span><span class="s1">2&#39;</span><span class="p">)</span>
<span class="mi">1</span>

<span class="mi">2</span>
</code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„çœ‹æˆªå›¾ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200324143731.png" alt=""></p>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p><code>\n</code>æ˜¯åœ¨ä¸‹ä¸€è¡Œè¾“å…¥è¾“å‡ºï¼Œè¿è¡Œåæ¢åˆ°å½“å‰ä½ç½®çš„ä¸‹ä¸€è¡Œï¼Œè€Œä¸ä¼šå›åˆ°è¡Œé¦–ã€‚<code>\r</code>æ˜¯æ“¦é™¤æœ¬è¡Œå‰é¢çš„æ‰€æœ‰å†…å®¹ï¼Œå…‰æ ‡å›åˆ°æœ¬è¡Œç¬¬ä¸€å­—ç¬¦å¼€å§‹è¾“å‡ºï¼Œè¿è¡Œåå›åˆ°å½“å‰è¡Œçš„è¡Œé¦–ï¼Œè€Œä¸ä¼šæ¢åˆ°ä¸‹ä¸€è¡Œï¼Œå¦‚æœæ¥ç€è¾“å‡ºçš„è¯ï¼Œæœ¬è¡Œä»¥å‰çš„å†…å®¹ä¼šè¢«é€ä¸€è¦†ç›–ã€‚ <a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>
]]></content><category scheme="https://raycoder.me/categories/python/" term="Python" label="Python"/><category scheme="https://raycoder.me/tags/python/" term="Python" label="Python"/></entry><entry><title type="text">Hugo-MemE/Hexo(çœŸ)è‡ªåŠ¨æ¨é€éƒ¨ç½²è‡³Netlify</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/deploy-your-hugo-and-hexo-blog-to-netlify/"/><id>https://raycoder.me/p/deploy-your-hugo-and-hexo-blog-to-netlify/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-03-24T08:52:21+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">Hugo/Hexoåšå®¢è‡ªåŠ¨æ¨é€éƒ¨ç½²è‡³Netlify</summary><content type="html"><![CDATA[<h3 id="hugo">Hugo</h3>
<hr>
<p>æˆ‘ä¹‹å‰å†™äº†ä¸€ä¸ªè ¢è ¢çš„è„šæœ¬ï¼Œç”¨äºè‡ªåŠ¨æ¨é€ç”Ÿæˆå®Œçš„é™æ€ç½‘ç«™ï¼š</p>
<p><a href="https://raycoder.me/p/hugo-auto-deploy/">Hugo-Python(ä¼ª)è‡ªåŠ¨éƒ¨ç½²</a></p>
<p>è‡ªä»¥ä¸ºå¾ˆå¥½â€¦â€¦</p>
<p>ä¸è¿‡åœ¨çœ‹äº†<a href="https://io-oi.me/">reuixiyå¤§ä½¬çš„åšå®¢</a>åï¼Œæ‰å‘ç°ä»–æœ‰ä¸€ä¸ª<code>Edit Me</code>ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200324085718.png" alt=""></p>
<p>ç‚¹å‡»åå‘ç°å¯ä»¥<code>Fork</code>è¿™ä¸ª<code>Markdown</code>æ–‡ä»¶æ¥ä¿®æ”¹ã€‚</p>
<p>ä¸è¿‡ä¿ºä»¬è¿™ä¸ªé™æ€ç½‘é¡µå¥½åƒå°±ä¸å¤ªè¡Œâ€¦â€¦è¿™ä¸ªè„šæœ¬<heimu>æœ‰æ¯›ç”¨ï¼ï¼ï¼ï¼</heimu></p>
<p>æœç„¶æ˜¯æˆ‘å¤ªå«©äº†</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200324085950.gif" alt=""></p>
<p>ç ”ç©¶äº†ä¸‹äººå®¶çš„<a href="https://github.com/reuixiy/io-oi.me">åšå®¢Repo</a></p>
<p>æ²¡é”™ä»–æ˜¯ç›´æ¥æ¨é€ä¸€ä¸ªæºä»£ç çš„ï¼</p>
<p>å’±ä»¬æ‰“å¼€<a href="https://github.com/reuixiy/io-oi.me/blob/master/netlify.toml">netlify.toml</a></p>
<p>è‡ªå·±ä¹Ÿæ–°å»ºä¸€ä¸ª<code>netlify.toml</code>(<code>~blog/netlify.toml</code>)</p>
<p>å¡«å…¥å¦‚ä¸‹å†…å®¹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-toml" data-lang="toml"><span class="p">[</span><span class="nx">build</span><span class="p">]</span>
  <span class="nx">publish</span> <span class="p">=</span> <span class="s2">&#34;public&#34;</span>
  <span class="nx">command</span> <span class="p">=</span> <span class="s2">&#34;npm run build&#34;</span>

<span class="p">[</span><span class="nx">build</span><span class="p">.</span><span class="nx">environment</span><span class="p">]</span>
  <span class="nx">HUGO_VERSION</span> <span class="p">=</span> <span class="s2">&#34;YOUR_HUGO_VERSION&#34;</span>
  <span class="nx">HUGO_ENV</span> <span class="p">=</span> <span class="s2">&#34;production&#34;</span>
  <span class="nx">HUGO_ENABLEGITINFO</span> <span class="p">=</span> <span class="s2">&#34;true&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>å¾ˆæ„‰å¿«çš„<code>push</code>~</p>
<p><code>push</code>æˆåŠŸå•¦ï¼</p>
<p><code>Netlify</code>å¤±è´¥äº†...</p>
<pre><code>Executing user command: npm run build
npm
 ERR! code ENOENT
npm
 ERR! syscall open
npm ERR!
 path /opt/build/repo/package.json
npm ERR! errno -2
npm
 ERR! enoent ENOENT: no such file or directory, open '/opt/build/repo/package.json'
npm
ERR! enoent This is related to npm not being able to find a file.
npm ERR! enoent
npm ERR!
 A complete log of this run can be found in:
npm ERR!     /opt/buildhome/.npm/_logs/2020-03-23T23_50_59_667Z-debug.log
</code></pre><p>æ˜¯<code>build</code>å‡ºäº†é—®é¢˜ã€‚äºæ˜¯æˆ‘ä»¬ä¼¼ä¹éœ€è¦<code>npm init</code>ï¼Œå†å¯¹<code>package.json</code>è¿›è¡Œä¿®æ”¹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;blog&#34;</span><span class="p">,</span>
  <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.0.0&#34;</span><span class="p">,</span>
  <span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;Ray&#39;s Blog&#34;</span><span class="p">,</span>
  <span class="nt">&#34;main&#34;</span><span class="p">:</span> <span class="s2">&#34;index.js&#34;</span><span class="p">,</span>
  <span class="nt">&#34;scripts&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;test&#34;</span><span class="p">:</span> <span class="s2">&#34;echo \&#34;Error: no test specified\&#34; &amp;&amp; exit 1&#34;</span><span class="p">,</span>
    <span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="s2">&#34;git config --global core.quotePath false &amp;&amp; hugo --gc --minify --cleanDestinationDir &amp;&amp; ./node_modules/gulp/bin/gulp.js build&#34;</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="nt">&#34;repository&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;git&#34;</span><span class="p">,</span>
    <span class="nt">&#34;url&#34;</span><span class="p">:</span> <span class="s2">&#34;git+https://github.com/FFRaycoder/blog.git&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;keywords&#34;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&#34;blog&#34;</span><span class="p">,</span>
    <span class="s2">&#34;hugo&#34;</span><span class="p">,</span>
    <span class="s2">&#34;hugo-theme-meme&#34;</span>
  <span class="p">],</span>
  <span class="nt">&#34;author&#34;</span><span class="p">:</span> <span class="s2">&#34;FFRaycoder&#34;</span><span class="p">,</span>
  <span class="nt">&#34;license&#34;</span><span class="p">:</span> <span class="s2">&#34;CC-BY-NC-SA-4.0&#34;</span><span class="p">,</span>
  <span class="nt">&#34;bugs&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;url&#34;</span><span class="p">:</span> <span class="s2">&#34;https://github.com/FFRaycoder/blog/issues&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;homepage&#34;</span><span class="p">:</span> <span class="s2">&#34;https://github.com/FFRaycoder/blog&#34;</span><span class="p">,</span>
  <span class="nt">&#34;devDependencies&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;gulp&#34;</span><span class="p">:</span> <span class="s2">&#34;^4.0.2&#34;</span><span class="p">,</span>
    <span class="nt">&#34;gulp-uglify&#34;</span><span class="p">:</span> <span class="s2">&#34;^3.0.2&#34;</span><span class="p">,</span>
    <span class="nt">&#34;readable-stream&#34;</span><span class="p">:</span> <span class="s2">&#34;^3.6.0&#34;</span><span class="p">,</span>
    <span class="nt">&#34;uglify-es&#34;</span><span class="p">:</span> <span class="s2">&#34;^3.3.9&#34;</span><span class="p">,</span>
    <span class="nt">&#34;workbox-build&#34;</span><span class="p">:</span> <span class="s2">&#34;^5.0.0&#34;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>å½“ç„¶ï¼Œ<code>./node_modules/gulp/bin/gulp.js build</code>æ˜¯å¯é€‰çš„ï¼šå› ä¸ºæˆ‘ä½¿ç”¨äº†<code>gulp</code>æ¥åˆ›å»º<code>sw.js</code>ã€‚</p>
<p>å…¶ä¸­çš„é…ç½®è¯·è‡ªå·±ä¿®æ”¹ã€‚</p>
<p>æ¯æ¬¡æ¨é€æ—¶Netlifyä¼š<em class="emphasis-point">è‡ªåŠ¨è¿è¡Œ</em><code>hugo</code>æŒ‡ä»¤ï¼Œå¹¶ä¸”éƒ¨ç½²è‡³ä»–ä»¬çš„<code>CDN</code>~</p>
<p>å¥½å“’æˆ‘ä»¬è¿™å°±æˆåŠŸäº†~æƒ³ä¿®æ”¹çš„äººå¯ä»¥ç›´æ¥ç‚¹å‡»ä¸‹é¢çš„<code>Edit Me</code>ï¼Œæä¸ªPRç»™æˆ‘ï¼</p>
<h3 id="hexo">Hexo</h3>
<hr>
<p>Hexoå€’è¦æ¯”Hugoç®€å•ï¼šHexoçš„<code>node_moudles</code>ä¼šåœ¨æ‰§è¡ŒHexoå‘½ä»¤æ—¶è‡ªåŠ¨è¿è¡Œã€‚å®ç°Hexoç”šè‡³ä¸éœ€è¦ä¿®æ”¹<code>~blog/packages.json</code>ã€‚</p>
<p>ä¿®æ”¹ä½ çš„<code>Deploy Settings</code>ï¼Œæ›´æ”¹æˆå¦‚å›¾ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200325075659.png" alt=""></p>
<p>åªéœ€ä½ æ¨é€åšå®¢æºç ï¼ŒNetlifyå°±ä¼š<em class="emphasis-point">è‡ªåŠ¨å¸®ä½ éƒ¨ç½²åšå®¢</em>ï¼ï¼ï¼å¤ªè´´å¿ƒäº†å§~</p>
<p>è¿™æ ·çš„å¥½å¤„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬éƒ½çŸ¥é“<code>hexo g</code>ç”Ÿæˆæ–‡ä»¶å¾ˆæ…¢ï¼Œ<code>hexo d</code>æ¯”ä½ è‡ªå·±æ¨é€éƒ½æ…¢ğŸ™ƒè²Œä¼¼æ˜¯å› ä¸ºhexoè¦æ¨é€å…¨éƒ¨çš„é™æ€æ–‡ä»¶ã€‚ä½¿ç”¨Netlifyè‡ªåŠ¨éƒ¨ç½²åï¼Œä½ åªéœ€è¦æ¨é€ä¸€ç¯‡æ–°çš„åšæ–‡ï¼Œä½ çš„ç½‘ç«™å°±è‡ªåŠ¨å¸®ä½ éƒ¨ç½²å¥½å•¦~~~</p>
<style type="text/css">.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:#444;background:#e7f2fa}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:#fff;background:#6ab0de}.notice-title:before{margin-right:8px;font-family:"Font Awesome 5 Free",FontAwesome;font-weight:400}.notice.warning .notice-title{background:rgba(217,83,79,.9)}.notice.warning .notice-title:before{content:'\f071'}.notice.warning{background:#fae2e2}.notice.info .notice-title{background:#f0b37e}.notice.info .notice-title:before{content:'\f05a'}.notice.info{background:#fff2db}.notice.note .notice-title{background:#6ab0de}.notice.note .notice-title:before{content:'\f06a'}.notice.note{background:#e7f2fA}.notice.tip .notice-title{background:rgba(92,184,92,.8)}.notice.tip .notice-title:before{content:'\f058'}.notice.tip{background:#e6f9e6}</style><div class="notice success" >
<p class="first notice-title"></p><p>è¿˜æœ‰ä¸€ç‚¹ï¼šå¦‚æœä½ çš„ç½‘ç«™<code>hexo g</code>å‡ºç°äº†é”™è¯¯ï¼ŒNetlifyä¼šè‡ªåŠ¨å›æ»šåˆ°å‰ä¸€ä¸ªç‰ˆæœ¬ï¼Œä¿æŒä½ ç½‘ç«™çš„æ­£å¸¸è®¿é—®ï¼</p></div>

<p>èµ¶å¿«å…¥å‘~</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200325081213.gif" alt=""></p>
<hr>
<p>2020/4/8æ›´æ–°ï¼š</p>
<p>æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥ä½¿ç”¨<a href="https://forestry.io/">Forestry CMS</a>ï¼Œå¯ä»¥ç»™é™æ€åšå®¢åŠ ä¸Šä¸ªåå°ã€‚è‡ªå·±æ£é¼“ã€‚</p>
]]></content><category scheme="https://raycoder.me/categories/%E5%8D%9A%E5%AE%A2/" term="åšå®¢" label="åšå®¢"/><category scheme="https://raycoder.me/tags/hugo/" term="Hugo" label="Hugo"/><category scheme="https://raycoder.me/tags/git/" term="Git" label="Git"/><category scheme="https://raycoder.me/tags/netlify/" term="Netlify" label="Netlify"/></entry><entry><title type="text">æœ¬ç«™UVè¾¾åˆ°1000äººå•¦ï¼</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/1000-uv/"/><id>https://raycoder.me/p/1000-uv/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-03-22T14:26:44+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">æœ¬ç«™è¾¾åˆ°1000UV</summary><content type="html">&lt;center>&lt;font size=7>å¥½çš„å¼€ç«¯ï¼åº†ç¥ğŸ¤¤ğŸ¤¤ğŸ¤¤~æ’’èŠ±ğŸ‰ğŸ‰ğŸ‰~&lt;/font>&lt;/center></content><category scheme="https://raycoder.me/categories/%E5%8D%9A%E5%AE%A2/" term="åšå®¢" label="åšå®¢"/><category scheme="https://raycoder.me/tags/%E5%8D%9A%E5%AE%A2/" term="åšå®¢" label="åšå®¢"/></entry><entry><title type="text">Hugo-HTMLç‰ˆGOTOé“¾æ¥ä¸­è½¬é¡µ</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/goto-transfer-page/"/><id>https://raycoder.me/p/goto-transfer-page/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-03-19T15:13:31+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">Hugo-HTMLç‰ˆGOTOé“¾æ¥ä¸­è½¬é¡µ</summary><content type="html"><![CDATA[<p><a href="http://www.aeink.com/791.html">åŸä½œè€…</a>æ˜¯PHPç‰ˆæœ¬ï¼Œæˆ‘æŠŠå®ƒç§»æ¤åˆ°äº†HTMLä¸Šã€‚ä»£ç å¾ˆä¸‘ï¼Œå‹¿å–·ï¼ï¼ˆé€‚ç”¨äºHugoï¼‰</p>
<p>è‡ªå·±åœ¨<code>./blog/static/</code>ä¸‹æ–°å»º<code>goto/index.html</code>ï¼Œä»£ç å¦‚ä¸‹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;Content-Type&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;text/html; charset=UTF-8&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;viewport&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;width=device-width&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;robots&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;noindex, nofollow&#34;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">noscript</span><span class="p">&gt;&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;refresh&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;1;url=&#39;&#39;;&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">noscript</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p">&gt;</span>
<span class="c">&lt;!--[if IE 8]&gt;
</span><span class="c">&lt;style&gt;
</span><span class="c">.ie8 .alert-circle,.ie8 .alert-footer{display:none}.ie8 .alert-box{padding-top:75px}.ie8 .alert-sec-text{top:45px}
</span><span class="c">&lt;/style&gt;
</span><span class="c">&lt;![endif]--&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="kd">function</span> <span class="nx">getQueryVariable</span><span class="p">(</span><span class="nx">variable</span><span class="p">){</span>
       <span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
       <span class="kd">var</span> <span class="nx">vars</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&#34;&amp;&#34;</span><span class="p">);</span>
       <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">vars</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
           <span class="kd">var</span> <span class="nx">pair</span> <span class="o">=</span> <span class="nx">vars</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="s2">&#34;=&#34;</span><span class="p">);</span>
           <span class="k">if</span><span class="p">(</span><span class="nx">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="nx">variable</span><span class="p">){</span><span class="k">return</span> <span class="nx">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">];}</span>
       <span class="p">}</span>
       <span class="k">return</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
	<span class="nx">x</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&#34;title&#34;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
	<span class="nx">x</span><span class="p">.</span><span class="nx">innerHTML</span><span class="o">=</span><span class="s2">&#34;å¤–é“¾è·³è½¬ - &#34;</span> <span class="o">+</span> <span class="nx">getQueryVariable</span><span class="p">(</span><span class="s2">&#34;url&#34;</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="nt">body</span><span class="p">{</span><span class="k">margin</span><span class="p">:</span><span class="mi">0</span><span class="p">;</span><span class="k">padding</span><span class="p">:</span><span class="mi">0</span><span class="p">;</span><span class="k">background</span><span class="p">:</span><span class="mh">#E6EAEB</span><span class="p">;</span><span class="k">font-family</span><span class="p">:</span><span class="n">Arial</span><span class="p">,</span><span class="s1">&#39;å¾®è½¯é›…é»‘&#39;</span><span class="p">,</span><span class="s1">&#39;å®‹ä½“&#39;</span><span class="p">,</span><span class="kc">sans-serif</span><span class="p">}.</span><span class="nc">main</span><span class="p">{</span><span class="k">position</span><span class="p">:</span><span class="kc">absolute</span><span class="p">;</span><span class="k">left</span><span class="p">:</span><span class="nb">calc</span><span class="p">(</span><span class="mi">50</span><span class="kt">%</span> <span class="o">-</span> <span class="mi">200</span><span class="kt">px</span><span class="p">);</span><span class="k">top</span><span class="p">:</span><span class="nb">calc</span><span class="p">(</span><span class="mi">50</span><span class="kt">%</span> <span class="o">-</span> <span class="mi">13</span><span class="kt">em</span><span class="p">)}.</span><span class="nc">alert-box</span><span class="p">{</span><span class="k">display</span><span class="p">:</span><span class="kc">none</span><span class="p">;</span><span class="k">position</span><span class="p">:</span><span class="kc">relative</span><span class="p">;</span><span class="k">margin</span><span class="p">:</span><span class="kc">auto</span><span class="p">;</span><span class="k">padding</span><span class="p">:</span><span class="mi">180</span><span class="kt">px</span> <span class="mi">85</span><span class="kt">px</span> <span class="mi">22</span><span class="kt">px</span><span class="p">;</span><span class="k">border-radius</span><span class="p">:</span><span class="mi">10</span><span class="kt">px</span> <span class="mi">10</span><span class="kt">px</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">;</span><span class="k">background</span><span class="p">:</span><span class="mh">#FFF</span><span class="p">;</span><span class="k">box-shadow</span><span class="p">:</span><span class="mi">5</span><span class="kt">px</span> <span class="mi">9</span><span class="kt">px</span> <span class="mi">17</span><span class="kt">px</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">102</span><span class="p">,</span><span class="mi">102</span><span class="p">,</span><span class="mi">102</span><span class="p">,</span><span class="mf">.75</span><span class="p">);</span><span class="k">width</span><span class="p">:</span><span class="mi">286</span><span class="kt">px</span><span class="p">;</span><span class="k">color</span><span class="p">:</span><span class="mh">#FFF</span><span class="p">;</span><span class="k">text-align</span><span class="p">:</span><span class="kc">center</span><span class="p">}.</span><span class="nc">alert-box</span> <span class="nt">p</span><span class="p">{</span><span class="k">margin</span><span class="p">:</span><span class="mi">0</span><span class="p">}.</span><span class="nc">alert-circle</span><span class="p">{</span><span class="k">position</span><span class="p">:</span><span class="kc">absolute</span><span class="p">;</span><span class="k">top</span><span class="p">:</span><span class="mi">-50</span><span class="kt">px</span><span class="p">;</span><span class="k">left</span><span class="p">:</span><span class="mi">111</span><span class="kt">px</span><span class="p">}.</span><span class="nc">alert-sec-circle</span><span class="p">{</span><span class="n">stroke-dashoffset</span><span class="p">:</span><span class="mi">0</span><span class="p">;</span><span class="n">stroke-dasharray</span><span class="p">:</span><span class="mi">735</span><span class="p">;</span><span class="k">transition</span><span class="p">:</span><span class="n">stroke-dashoffset</span> <span class="mi">1</span><span class="kt">s</span> <span class="kc">linear</span><span class="p">}.</span><span class="nc">alert-sec-text</span><span class="p">{</span><span class="k">position</span><span class="p">:</span><span class="kc">absolute</span><span class="p">;</span><span class="k">top</span><span class="p">:</span><span class="mi">11</span><span class="kt">px</span><span class="p">;</span><span class="k">left</span><span class="p">:</span><span class="mi">190</span><span class="kt">px</span><span class="p">;</span><span class="k">width</span><span class="p">:</span><span class="mi">76</span><span class="kt">px</span><span class="p">;</span><span class="k">color</span><span class="p">:</span><span class="mh">#000</span><span class="p">;</span><span class="k">font-size</span><span class="p">:</span><span class="mi">68</span><span class="kt">px</span><span class="p">}.</span><span class="nc">alert-sec-unit</span><span class="p">{</span><span class="k">font-size</span><span class="p">:</span><span class="mi">34</span><span class="kt">px</span><span class="p">}.</span><span class="nc">alert-body</span><span class="p">{</span><span class="k">margin</span><span class="p">:</span><span class="mi">35</span><span class="kt">px</span> <span class="mi">0</span><span class="p">}.</span><span class="nc">alert-head</span><span class="p">{</span><span class="k">color</span><span class="p">:</span><span class="mh">#242424</span><span class="p">;</span><span class="k">font-size</span><span class="p">:</span><span class="mi">28</span><span class="kt">px</span><span class="p">}.</span><span class="nc">alert-concent</span><span class="p">{</span><span class="k">margin</span><span class="p">:</span><span class="mi">25</span><span class="kt">px</span> <span class="mi">0</span> <span class="mi">14</span><span class="kt">px</span><span class="p">;</span><span class="k">color</span><span class="p">:</span><span class="mh">#7B7B7B</span><span class="p">;</span><span class="k">font-size</span><span class="p">:</span><span class="mi">18</span><span class="kt">px</span><span class="p">}.</span><span class="nc">alert-concent</span> <span class="nt">p</span><span class="p">{</span><span class="k">line-height</span><span class="p">:</span><span class="mi">27</span><span class="kt">px</span><span class="p">}.</span><span class="nc">alert-btn</span><span class="p">{</span><span class="k">display</span><span class="p">:</span><span class="kc">block</span><span class="p">;</span><span class="k">border-radius</span><span class="p">:</span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span><span class="k">background-color</span><span class="p">:</span><span class="mh">#4AB0F7</span><span class="p">;</span><span class="k">height</span><span class="p">:</span><span class="mi">55</span><span class="kt">px</span><span class="p">;</span><span class="k">line-height</span><span class="p">:</span><span class="mi">55</span><span class="kt">px</span><span class="p">;</span><span class="k">width</span><span class="p">:</span><span class="mi">286</span><span class="kt">px</span><span class="p">;</span><span class="k">color</span><span class="p">:</span><span class="mh">#FFF</span><span class="p">;</span><span class="k">font-size</span><span class="p">:</span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span><span class="k">text-decoration</span><span class="p">:</span><span class="kc">none</span><span class="p">;</span><span class="k">letter-spacing</span><span class="p">:</span><span class="mi">2</span><span class="kt">px</span><span class="p">}.</span><span class="nc">alert-btn</span><span class="p">:</span><span class="nd">hover</span><span class="p">{</span><span class="k">background-color</span><span class="p">:</span><span class="mh">#6BC2FF</span><span class="p">}.</span><span class="nc">alert-footer</span><span class="p">{</span><span class="k">margin</span><span class="p">:</span><span class="mi">0</span> <span class="kc">auto</span><span class="p">;</span><span class="k">height</span><span class="p">:</span><span class="mi">42</span><span class="kt">px</span><span class="p">;</span><span class="k">width</span><span class="p">:</span><span class="mi">120</span><span class="kt">px</span><span class="p">}.</span><span class="nc">alert-footer-icon</span><span class="p">{</span><span class="k">float</span><span class="p">:</span><span class="kc">left</span><span class="p">}.</span><span class="nc">alert-footer-text</span><span class="p">{</span><span class="k">float</span><span class="p">:</span><span class="kc">left</span><span class="p">;</span><span class="k">border-left</span><span class="p">:</span><span class="mi">2</span><span class="kt">px</span> <span class="kc">solid</span> <span class="mh">#EEE</span><span class="p">;</span><span class="k">padding</span><span class="p">:</span><span class="mi">3</span><span class="kt">px</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span><span class="k">height</span><span class="p">:</span><span class="mi">40</span><span class="kt">px</span><span class="p">;</span><span class="k">color</span><span class="p">:</span><span class="mh">#0B85CC</span><span class="p">;</span><span class="k">font-size</span><span class="p">:</span><span class="mi">12</span><span class="kt">px</span><span class="p">;</span><span class="k">text-align</span><span class="p">:</span><span class="kc">left</span><span class="p">}.</span><span class="nc">alert-footer-text</span> <span class="nt">p</span><span class="p">{</span><span class="k">color</span><span class="p">:</span><span class="mh">#7A7A7A</span><span class="p">;</span><span class="k">font-size</span><span class="p">:</span><span class="mi">22</span><span class="kt">px</span><span class="p">;</span><span class="k">line-height</span><span class="p">:</span><span class="mi">18</span><span class="kt">px</span><span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;ie8&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;main&#34;</span><span class="p">&gt;</span>
	<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;js-alert-box&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;alert-box&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;display:block&#34;</span><span class="p">&gt;</span>
		<span class="p">&lt;</span><span class="nt">svg</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;alert-circle&#34;</span> <span class="na">width</span><span class="o">=</span><span class="s">&#34;234&#34;</span> <span class="na">height</span><span class="o">=</span><span class="s">&#34;234&#34;</span><span class="p">&gt;&lt;</span><span class="nt">circle</span> <span class="na">cx</span><span class="o">=</span><span class="s">&#34;117&#34;</span> <span class="na">cy</span><span class="o">=</span><span class="s">&#34;117&#34;</span> <span class="na">r</span><span class="o">=</span><span class="s">&#34;108&#34;</span> <span class="na">fill</span><span class="o">=</span><span class="s">&#34;#FFF&#34;</span> <span class="na">stroke</span><span class="o">=</span><span class="s">&#34;#43AEFA&#34;</span> <span class="na">stroke-width</span><span class="o">=</span><span class="s">&#34;17&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">circle</span><span class="p">&gt;&lt;</span><span class="nt">circle</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;js-sec-circle&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;alert-sec-circle&#34;</span> <span class="na">cx</span><span class="o">=</span><span class="s">&#34;117&#34;</span> <span class="na">cy</span><span class="o">=</span><span class="s">&#34;117&#34;</span> <span class="na">r</span><span class="o">=</span><span class="s">&#34;108&#34;</span> <span class="na">fill</span><span class="o">=</span><span class="s">&#34;transparent&#34;</span> <span class="na">stroke</span><span class="o">=</span><span class="s">&#34;#F4F1F1&#34;</span> <span class="na">stroke-width</span><span class="o">=</span><span class="s">&#34;18&#34;</span> <span class="na">transform</span><span class="o">=</span><span class="s">&#34;rotate(-90 117 117)&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;stroke-dashoffset:-514px&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">circle</span><span class="p">&gt;&lt;</span><span class="nt">text</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;alert-sec-unit&#34;</span> <span class="na">x</span><span class="o">=</span><span class="s">&#34;100&#34;</span> <span class="na">y</span><span class="o">=</span><span class="s">&#34;172&#34;</span> <span class="na">fill</span><span class="o">=</span><span class="s">&#34;#BDBDBD&#34;</span><span class="p">&gt;</span>ç§’<span class="p">&lt;/</span><span class="nt">text</span><span class="p">&gt;&lt;/</span><span class="nt">svg</span><span class="p">&gt;</span>
		<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;js-sec-text&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;alert-sec-text&#34;</span><span class="p">&gt;</span>
			3
		<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
		<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;alert-body&#34;</span><span class="p">&gt;</span>
			<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;js-alert-head&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;alert-head&#34;</span><span class="p">&gt;</span>
				<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span><span class="nx">getQueryVariable</span><span class="p">(</span><span class="s2">&#34;url&#34;</span><span class="p">);&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
			<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
			<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;alert-concent&#34;</span><span class="p">&gt;</span>
				<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
					Loading...
				<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
			<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
			<span class="p">&lt;</span><span class="nt">a</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;js-alert-btn&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;alert-btn&#34;</span><span class="p">&gt;</span>ç«‹å³å‰å¾€<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
			<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
				<span class="nx">x</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;js-alert-btn&#34;</span><span class="p">);</span>
				<span class="nx">x</span><span class="p">.</span><span class="nx">innerHTML</span><span class="o">=</span><span class="s2">&#34;&lt;a id=\&#34;js-alert-btn\&#34; class=\&#34;alert-btn\&#34; href=\&#34;&#34;</span> <span class="o">+</span> <span class="nx">getQueryVariable</span><span class="p">(</span><span class="s2">&#34;url&#34;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&#34;\&#34;&gt;ç«‹å³å‰å¾€&lt;/a&gt;&#34;</span><span class="p">;</span>
			<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
		<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
		<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;alert-footer clearfix&#34;</span><span class="p">&gt;</span>
			<span class="p">&lt;</span><span class="nt">svg</span> <span class="na">width</span><span class="o">=</span><span class="s">&#34;46px&#34;</span> <span class="na">height</span><span class="o">=</span><span class="s">&#34;42px&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;alert-footer-icon&#34;</span><span class="p">&gt;&lt;</span><span class="nt">circle</span> <span class="na">fill-rule</span><span class="o">=</span><span class="s">&#34;evenodd&#34;</span> <span class="na">clip-rule</span><span class="o">=</span><span class="s">&#34;evenodd&#34;</span> <span class="na">fill</span><span class="o">=</span><span class="s">&#34;#7B7B7B&#34;</span> <span class="na">stroke</span><span class="o">=</span><span class="s">&#34;#DEDFE0&#34;</span> <span class="na">stroke-width</span><span class="o">=</span><span class="s">&#34;2&#34;</span> <span class="na">stroke-miterlimit</span><span class="o">=</span><span class="s">&#34;10&#34;</span> <span class="na">cx</span><span class="o">=</span><span class="s">&#34;21.917&#34;</span> <span class="na">cy</span><span class="o">=</span><span class="s">&#34;21.25&#34;</span> <span class="na">r</span><span class="o">=</span><span class="s">&#34;17&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">circle</span><span class="p">&gt;&lt;</span><span class="nt">path</span> <span class="na">fill</span><span class="o">=</span><span class="s">&#34;#FFF&#34;</span> <span class="na">d</span><span class="o">=</span><span class="s">&#34;M22.907,27.83h-1.98l0.3-2.92c-0.37-0.22-0.61-0.63-0.61-1.1c0-0.71,0.58-1.29,1.3-1.29s1.3,0.58,1.3,1.29 c0,0.47-0.24,0.88-0.61,1.1L22.907,27.83z M18.327,17.51c0-1.98,1.61-3.59,3.59-3.59s3.59,1.61,3.59,3.59v2.59h-7.18V17.51z M27.687,20.1v-2.59c0-3.18-2.59-5.76-5.77-5.76s-5.76,2.58-5.76,5.76v2.59h-1.24v10.65h14V20.1H27.687z&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">path</span><span class="p">&gt;&lt;</span><span class="nt">circle</span> <span class="na">fill-rule</span><span class="o">=</span><span class="s">&#34;evenodd&#34;</span> <span class="na">clip-rule</span><span class="o">=</span><span class="s">&#34;evenodd&#34;</span> <span class="na">fill</span><span class="o">=</span><span class="s">&#34;#FEFEFE&#34;</span> <span class="na">cx</span><span class="o">=</span><span class="s">&#34;35.417&#34;</span> <span class="na">cy</span><span class="o">=</span><span class="s">&#34;10.75&#34;</span> <span class="na">r</span><span class="o">=</span><span class="s">&#34;6.5&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">circle</span><span class="p">&gt;&lt;</span><span class="nt">polygon</span> <span class="na">fill</span><span class="o">=</span><span class="s">&#34;#7B7B7B&#34;</span> <span class="na">stroke</span><span class="o">=</span><span class="s">&#34;#7B7B7B&#34;</span> <span class="na">stroke-linecap</span><span class="o">=</span><span class="s">&#34;round&#34;</span> <span class="na">stroke-linejoin</span><span class="o">=</span><span class="s">&#34;round&#34;</span> <span class="na">stroke-miterlimit</span><span class="o">=</span><span class="s">&#34;10&#34;</span> <span class="na">points</span><span class="o">=</span><span class="s">&#34;35.417,12.16 32.797,9.03 31.917,10.07 35.417,14.25 42.917,5.29 42.037,4.25 &#34;</span><span class="p">&gt;&lt;/</span><span class="nt">polygon</span><span class="p">&gt;&lt;/</span><span class="nt">svg</span><span class="p">&gt;</span>
			<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;alert-footer-text&#34;</span><span class="p">&gt;</span>
				<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>secure<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>å®‰å…¨åŠ å¯†
			<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
		<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
	<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span><span class="p">&gt;</span>
<span class="kd">function</span> <span class="nx">alertSet</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
	
	<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;js-alert-box&#34;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s2">&#34;block&#34;</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;js-alert-head&#34;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">e</span><span class="p">;</span>
	<span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
		<span class="nx">n</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;js-sec-circle&#34;</span><span class="p">);</span>
	<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;js-sec-text&#34;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">t</span><span class="p">,</span> <span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="nx">t</span><span class="p">)</span> <span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">getQueryVariable</span><span class="p">(</span><span class="s2">&#34;url&#34;</span><span class="p">);</span>
		<span class="k">else</span> <span class="p">{</span>
			<span class="nx">t</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;js-sec-text&#34;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">t</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">t</span> <span class="o">/</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">735</span><span class="p">);</span>
			<span class="nx">n</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">strokeDashoffset</span> <span class="o">=</span> <span class="nx">e</span> <span class="o">-</span> <span class="mi">735</span>
		<span class="p">}</span>
	<span class="p">},</span> <span class="mi">970</span><span class="p">)</span>
<span class="p">}</span> <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span><span class="nx">alertSet</span><span class="p">(</span><span class="nx">getQueryVariable</span><span class="p">(</span><span class="s2">&#34;url&#34;</span><span class="p">));&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨çš„æ—¶å€™é“¾æ¥å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html">https://raycoder.me/goto/?url=https://raycoder.me
</code></pre></td></tr></table>
</div>
</div><p>è¿™é‡Œä»¥<code>MemE</code>ä¸»é¢˜ä¸ºä¾‹ï¼Œæ‰¹é‡æ›¿æ¢ç½‘é¡µä¸­éæœ¬ç«™<code>aæ ‡ç­¾</code>ã€‚æ‰“å¼€<code>./blog/themes/meme/layouts/partials/custom/content.html</code>ï¼Œå†™å…¥å¦‚ä¸‹å†…å®¹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html">{{- $host := &#34;&#34; -}}
{{- $redirect := &#34;/goto/&#34; -}}

{{- $Content := .Scratch.Get &#34;Content&#34; -}}
{{- $regex := printf `<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;(https?://%s[^&#34;</span><span class="err">]+)&#34;`</span> <span class="err">$</span><span class="na">host</span> <span class="na">-</span><span class="err">}}</span>
<span class="err">{{</span><span class="na">-</span> <span class="err">$</span><span class="na">replacement</span> <span class="na">:</span><span class="o">=</span> <span class="s">printf</span> <span class="err">`&lt;</span><span class="na">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;%s?url=$1&#34;</span><span class="err">`</span> <span class="err">$</span><span class="na">redirect</span> <span class="na">-</span><span class="err">}}</span>
<span class="err">{{</span><span class="na">-</span> <span class="err">$</span><span class="na">Content</span> <span class="na">:</span><span class="o">=</span> <span class="s">$Content</span> <span class="err">|</span> <span class="na">replaceRE</span> <span class="err">$</span><span class="na">regex</span> <span class="err">$</span><span class="na">replacement</span> <span class="err">|</span> <span class="na">safeHTML</span> <span class="na">-</span><span class="err">}}</span>
<span class="err">{{</span><span class="na">-</span> <span class="err">.</span><span class="na">Scratch</span><span class="err">.</span><span class="na">Set</span> <span class="err">&#34;</span><span class="na">Content</span><span class="err">&#34;</span> <span class="err">$</span><span class="na">Content</span> <span class="na">-</span><span class="err">}}</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªä»£ç æ˜¯è®©æ‰€æœ‰å¤–é“¾åœ¨è·³è½¬é¡µä¸­æ‰“å¼€ï¼Œå‡å¦‚ä½ åªæƒ³è®©ç‰¹å®šç½‘å€åœ¨è·³è½¬é¡µä¸­æ‰“å¼€ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨<code>{{- $host := &quot;&quot; -}}</code>ä¸­å¡«å…¥å†…å®¹ï¼Œå¦‚<code>{{- $host := &quot;example.com&quot; -}}</code>ã€‚</p>
<hr>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li>
<p><a href="https://github.com/reuixiy/hugo-theme-meme/issues/81">å¦‚ä½•è®©æ‰€æœ‰å¤–é“¾å…¨éƒ¨åœ¨ä¸€ä¸ªä¸­è½¬é¡µæ‰“å¼€ï¼Ÿ | Github Issue</a></p>
</li>
<li>
<p><a href="http://www.aeink.com/791.html">æœ¬ç«™è‡ªç”¨è·³è½¬é¡µé¢go.phpæºç  | AEåšå®¢</a></p>
</li>
</ul>
]]></content><category scheme="https://raycoder.me/categories/html/" term="HTML" label="HTML"/><category scheme="https://raycoder.me/tags/html/" term="HTML" label="HTML"/><category scheme="https://raycoder.me/tags/%E4%B8%AD%E8%BD%AC/" term="ä¸­è½¬" label="ä¸­è½¬"/><category scheme="https://raycoder.me/tags/js/" term="JS" label="JS"/></entry><entry><title type="text">DDOS-Guardå…è´¹CDN</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/ddos-guard-free-cdn/"/><id>https://raycoder.me/p/ddos-guard-free-cdn/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-03-19T08:29:36+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">DDOS-Guardå…è´¹CDN, å…å¤‡æ¡ˆå›½å¤–CDN</summary><content type="html"><![CDATA[<p>ç™½å«–ä¼ é€é—¨ï¼š<a href="https://ddos-guard.net/en/store/web">https://ddos-guard.net/en/store/web</a></p>
<p>ä¿ºä»¬ä½œä¸ºç™½å«–å…šé€‰ä»€ä¹ˆå²‚ä¸æ˜¯å¾ˆæ¸…æ¥š~</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200319083802.png" alt=""></p>
<p>ç„¶åå¡«å…¥ä½ çš„åŸŸåå’Œå›æºIPåœ°å€ï¼</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200319084702.png" alt=""></p>
<p>ç„¶åæŒ‰ç…§æµç¨‹æ³¨å†Œï¼</p>
<p>è¿‡ä¸€ä¼šå„¿å°±å¯ä»¥åœ¨<a href="https://my.ddos-guard.net/cabinet">æ§åˆ¶é¢æ¿</a>çœ‹åˆ°å•¦ï¼</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200319084942.png" alt=""></p>
<p>ç‚¹å‡»è¿›å»ï¼Œå°±å¯ä»¥çœ‹åˆ°å®ƒç»™æˆ‘ä»¬åˆ†é…çš„IPåœ°å€ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200319085045.png" alt=""></p>
<p>ä¸è¿‡é€Ÿåº¦çœŸçš„ä¸æ•¢æ­ç»´ï¼ï¼ˆå¯èƒ½æ˜¯æˆ‘ä¸ªäººåŸå› ï¼‰</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li><a href="https://cangshui.net/3346.html">ã€å…è´¹CDNã€‘ä¿„ç½—æ–¯DDOS-Guardæ”¯æŒsslé˜²å¾¡1.5T | æ²§æ°´åšå®¢</a></li>
</ul>
]]></content><category scheme="https://raycoder.me/categories/cdn/" term="CDN" label="CDN"/><category scheme="https://raycoder.me/categories/%E7%BD%91%E7%AB%99/" term="ç½‘ç«™" label="ç½‘ç«™"/><category scheme="https://raycoder.me/tags/cdn/" term="CDN" label="CDN"/><category scheme="https://raycoder.me/tags/%E7%99%BD%E5%AB%96/" term="ç™½å«–" label="ç™½å«–"/><category scheme="https://raycoder.me/tags/%E7%A6%8F%E5%88%A9/" term="ç¦åˆ©" label="ç¦åˆ©"/></entry><entry><title type="text">Backblazeå…è´¹å…å¤‡æ¡ˆå¯¹è±¡å­˜å‚¨</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/backblaze-free-object-storage/"/><id>https://raycoder.me/p/backblaze-free-object-storage/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-03-19T08:08:54+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">ç™½å«–Backblazeå…è´¹å…å¤‡æ¡ˆå¯¹è±¡å­˜å‚¨</summary><content type="html"><![CDATA[<h3 id="backblaze-b2å¯¹è±¡å­˜å‚¨ä¼ é€é—¨httpssecurebackblazecomb2_bucketshtm">backblaze B2å¯¹è±¡å­˜å‚¨ä¼ é€é—¨ï¼š<a href="https://secure.backblaze.com/b2_buckets.htm">https://secure.backblaze.com/b2_buckets.htm</a></h3>
<p>æ³¨å†Œä¸ªè´¦å·ï¼Œç™»å½•ï¼</p>
<p>Backblazeå‰10 GBçš„å­˜å‚¨ç©ºé—´æ˜¯å…è´¹çš„ï¼Œæ¯å¤©èƒ½ä¸‹è½½1Gä»¥å†…æ–‡ä»¶å…è´¹ï¼Œä¸Šä¼ å…è´¹ï¼Œå¹¶ä¸cloudflareåˆä½œï¼Œåªè¦å¥—ä¸ªcloudflareCDNå³å¯æ— é™å…è´¹ä¸‹è½½ã€‚</p>
<p>å› æ­¤æˆ‘ä»¬å¾—åˆ°å¦‚ä¸‹äº§å“ï¼š</p>
<blockquote>
<p>10Gå­˜å‚¨ç©ºé—´å…è´¹</p>
<p>ä¸Šè¡Œå…è´¹</p>
<p>ä¸‹è¡Œå…è´¹</p>
<p>å…¨çƒæœ€å¯é çš„äº‘å­˜å‚¨æœåŠ¡ä¹‹ä¸€</p>
<p>å…¨çƒæœ€å¼ºçš„CDNäº‘åˆ†å‘æœåŠ¡ä¹‹ä¸€</p>
</blockquote>
<p>æ–°å»ºä¸€ä¸ªæ¡¶ï¼Œéšä¾¿å–ä¸ªåã€‚æ³¨æ„è¦é€‰<code>Publicï¼ˆå…¬ä¼—ï¼‰</code>ï¼<del>è¿™LAGæœºå™¨ç¿»è¯‘</del></p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200319081732.png" alt=""></p>
<p>åˆ›å»ºå®Œä¹‹åï¼Œéšä¾¿ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200319082134.png" alt=""></p>
<p>ä¿ºä»¬å°±å‘ç°å®ƒç»™æˆ‘ä»¬åˆ†é…äº†ä¸€ä¸ª<code>https://f000.backblazeb2.com</code>çš„åŸŸåã€‚</p>
<p>æˆ‘ä»¬è‡ªå·±åœ¨<code>Cloudflare</code>æŒ‚ä¸€ä¸ªåŸŸåï¼Œä¸€å®šè¦å¼€å¯CDNï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200319082633.png" alt=""></p>
<p>å¦‚æœä½ è§‰å¾—åŸŸåå¤ªé•¿ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ª<code>Page Rule</code>ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200319082751.png" alt=""></p>
<p>ä¸è¿‡åªèƒ½<code>http</code>è·³<code>https</code>ï¼Œå¯æƒœäº†ã€‚</p>
<p>æˆ‘ç›®å‰ä»ç„¶ä½¿ç”¨<code>Gayhub</code>å›¾åºŠï¼Œæ”¾å¤§æ–‡ä»¶ä½¿ç”¨<code>B2</code>ã€‚</p>
<hr>
<p>2020/04/04æ›´æ–°ï¼š</p>
<p>å»ºè®®å‚è€ƒ<a href="/p/cf-worker-proxy/">ä¸‡èƒ½çš„CLOUDFLARE WORKERS+JSProxyä»£ç†ï¼Ÿï¼</a></p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li><a href="https://cangshui.net/4221.html">å…è´¹å¯¹è±¡äº‘å­˜å‚¨Backblaze | æ²§æ°´åšå®¢</a></li>
</ul>
]]></content><category scheme="https://raycoder.me/categories/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8/" term="å¯¹è±¡å­˜å‚¨" label="å¯¹è±¡å­˜å‚¨"/><category scheme="https://raycoder.me/categories/%E7%BD%91%E7%AB%99/" term="ç½‘ç«™" label="ç½‘ç«™"/><category scheme="https://raycoder.me/tags/backblaze/" term="Backblaze" label="Backblaze"/><category scheme="https://raycoder.me/tags/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8/" term="å¯¹è±¡å­˜å‚¨" label="å¯¹è±¡å­˜å‚¨"/><category scheme="https://raycoder.me/tags/%E7%99%BD%E5%AB%96/" term="ç™½å«–" label="ç™½å«–"/><category scheme="https://raycoder.me/tags/%E7%A6%8F%E5%88%A9/" term="ç¦åˆ©" label="ç¦åˆ©"/></entry><entry><title type="text">Chromeå´©æºƒçš„ä¸€äº›è§£å†³åŠæ³•</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/chrome-crashed/"/><id>https://raycoder.me/p/chrome-crashed/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-03-18T09:05:37+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">æœ€è¿‘å‡çº§äº†ç”µè„‘ç³»ç»Ÿï¼Œæ‰“å¼€Chromeå´©æºƒäº†ã€‚ ç½‘ç»œä¸Šçš„ä¸€äº›è§£å†³æ–¹æ³•ï¼šåœ¨æ‰“å¼€çš„å¿«æ·æ–¹å¼åæ·»åŠ  --test-type --no-sandboxï¼Œç¦ç”¨æ²™ç›’ã€‚ è¿™æ ·åœ¨ä½ åŒå‡»å¿«æ·æ–¹å¼æ—¶æµè§ˆå™¨å¯ä»¥æ­£å¸¸æ‰“å¼€ï¼Œä½†æ˜¯å¦‚æœä½ åœ¨å¼€å§‹èœå•æ‰“å¼€ï¼Œè¿˜æ˜¯ä¸€â€¦â€¦</summary><content type="html"><![CDATA[<p>æœ€è¿‘å‡çº§äº†ç”µè„‘ç³»ç»Ÿï¼Œæ‰“å¼€Chromeå´©æºƒäº†ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200318090837.png" alt="å–”å”·ï¼Œå´©æºƒå•¦" title="å–”å”·ï¼Œå´©æºƒå•¦"></p>
<p>ç½‘ç»œä¸Šçš„ä¸€äº›è§£å†³æ–¹æ³•ï¼šåœ¨æ‰“å¼€çš„å¿«æ·æ–¹å¼åæ·»åŠ <code> --test-type --no-sandbox</code>ï¼Œç¦ç”¨æ²™ç›’ã€‚</p>
<p>è¿™æ ·åœ¨ä½ åŒå‡»å¿«æ·æ–¹å¼æ—¶æµè§ˆå™¨å¯ä»¥æ­£å¸¸æ‰“å¼€ï¼Œä½†æ˜¯å¦‚æœä½ åœ¨å¼€å§‹èœå•æ‰“å¼€ï¼Œè¿˜æ˜¯ä¸€æ ·ä¼šå´©æºƒğŸ™ƒã€‚</p>
<p>åœ¨æˆ‘è‡ªå·±çš„ç ”ç©¶ä¸­å‘ç°ï¼Œæ­£è§£å¦‚ä¸‹ï¼š</p>
<pre><code>æ“ä½œç³»ç»Ÿåç§°	: Microsoft Windows 10 å®¶åº­ Insider Previewä¸­æ–‡ç‰ˆ
ç‰ˆæœ¬			: 10.0.19582 ç‰ˆæœ¬ 19582
Chromeç‰ˆæœ¬	: ç‰ˆæœ¬ 83.0.4087.0ï¼ˆæ­£å¼ç‰ˆæœ¬ï¼‰canary ï¼ˆ64 ä½ï¼‰
</code></pre><p>æ²¡é”™ï¼Œæˆ‘ä»¬åº”è¯¥æ›´æ–°åˆ°<code>Canary é‡‘ä¸é›€</code>ç‰ˆChromeğŸ˜ï¼</p>
<p>ä¸‹è½½åœ°å€ï¼š<a href="https://www.google.cn/intl/zh-CN/chrome/canary/">https://www.google.cn/intl/zh-CN/chrome/canary/</a> | <a href="https://www.google.com/intl/zh-CN/chrome/canary/">https://www.google.com/intl/zh-CN/chrome/canary/</a></p>
<p>ä¹Ÿå°±æ˜¯é¢„è§ˆç‰ˆï¼Œç»å¸¸ä¼šæ›´æ–°ï¼Œä¸è¿‡ç»ˆäºä¸ä¼šå´©æºƒäº†ï¼Œä¹Ÿå¯ä»¥æ­£å¸¸è®¿é—®<code>Ray's Blog</code>äº†ğŸ·</p>
]]></content><category scheme="https://raycoder.me/categories/chrome/" term="Chrome" label="Chrome"/><category scheme="https://raycoder.me/tags/chrome/" term="Chrome" label="Chrome"/></entry><entry><title type="text">Pythonå­¦ä¹ ç¬”è®°ä¹‹assertå…³é”®å­—ç®€æ</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/python-assert/"/><id>https://raycoder.me/p/python-assert/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-03-18T08:22:33+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html"><![CDATA[ä»€ä¹ˆæ˜¯assertï¼Ÿå®ƒçš„ä¸­æ–‡åå«åšæ–­è¨€ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š 1 2 3 4 5 age = int(input()) if age&gt;=18: print(&#39;You can watch it!&#39;) else: print(&#39;You are too young!&#39;) è¿™ä¸ªä¾‹å­è¿›è¡Œäº†ä¸€ä¸‹18Gæ“ä½œï¼Œæ²¡æœ‰è¾¾åˆ°18å²çš„äººä¼šè¢«æ‹’ä¹‹é—¨å¤–å‹å–„çš„æç¤ºã€‚ ä¸è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡assâ€¦â€¦]]></summary><content type="html"><![CDATA[<p>ä»€ä¹ˆæ˜¯<code>assert</code>ï¼Ÿå®ƒçš„ä¸­æ–‡åå«åš<code>æ–­è¨€</code>ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">age</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>
<span class="k">if</span> <span class="n">age</span><span class="o">&gt;=</span><span class="mi">18</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;You can watch it!&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;You are too young!&#39;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªä¾‹å­è¿›è¡Œäº†ä¸€ä¸‹<yellow><del>18G</del></yellow>æ“ä½œï¼Œæ²¡æœ‰è¾¾åˆ°18å²çš„äººä¼šè¢«<del>æ‹’ä¹‹é—¨å¤–</del>å‹å–„çš„æç¤ºã€‚</p>
<p>ä¸è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>assert</code>å…³é”®å­—æ¥å®ç°åŒç­‰çš„æ“ä½œã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">age</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>
<span class="mi">17</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">assert</span> <span class="n">age</span> <span class="o">&gt;=</span> <span class="mi">18</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&#34;&lt;pyshell#3&gt;&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="k">assert</span> <span class="n">age</span> <span class="o">&gt;=</span> <span class="mi">18</span>
<span class="ne">AssertionError</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">age</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">assert</span> <span class="n">age</span> <span class="o">&gt;=</span> <span class="mi">18</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;You can watch it!&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;You are too young!&#39;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œ<code>assert</code>è¿˜å¯ä»¥è¿›è¡Œæ›´å¤æ‚çš„æ“ä½œã€‚</p>
<p>å¼•ç”¨ä¸€æ®µ<a href="https://www.runoob.com/python3/python3-assert.html">èœé¸Ÿæ•™ç¨‹</a>ã€‚</p>
<p><code>assert</code>çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">assert</span> <span class="n">expression</span>
</code></pre></td></tr></table>
</div>
</div><p>ç­‰ä»·äºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="ow">not</span> <span class="n">expression</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">AssertionError</span>
</code></pre></td></tr></table>
</div>
</div><p><code>assert</code>åé¢ä¹Ÿå¯ä»¥ç´§è·Ÿå‚æ•°:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">assert</span> <span class="n">expression</span> <span class="p">[,</span> <span class="n">arguments</span><span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><p>ç­‰ä»·äºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="ow">not</span> <span class="n">expression</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>å¦‚ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="k">assert</span> <span class="bp">True</span>     <span class="c1"># æ¡ä»¶ä¸º true æ­£å¸¸æ‰§è¡Œ</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">assert</span> <span class="bp">False</span>    <span class="c1"># æ¡ä»¶ä¸º false è§¦å‘å¼‚å¸¸</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&#34;&lt;stdin&gt;&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">AssertionError</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">assert</span> <span class="mi">1</span><span class="o">==</span><span class="mi">1</span>    <span class="c1"># æ¡ä»¶ä¸º true æ­£å¸¸æ‰§è¡Œ</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">assert</span> <span class="mi">1</span><span class="o">==</span><span class="mi">2</span>    <span class="c1"># æ¡ä»¶ä¸º false è§¦å‘å¼‚å¸¸</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&#34;&lt;stdin&gt;&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">AssertionError</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">assert</span> <span class="mi">1</span><span class="o">==</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;1 ä¸ç­‰äº 2&#39;</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&#34;&lt;stdin&gt;&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">AssertionError</span><span class="p">:</span> <span class="mi">1</span> <span class="err">ä¸ç­‰äº</span> <span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>ä»¥ä¸‹å®ä¾‹åˆ¤æ–­å½“å‰ç³»ç»Ÿæ˜¯å¦ä¸º Linuxï¼Œå¦‚æœä¸æ»¡è¶³æ¡ä»¶åˆ™ç›´æ¥è§¦å‘å¼‚å¸¸ï¼Œä¸å¿…æ‰§è¡Œæ¥ä¸‹æ¥çš„ä»£ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">sys</span>
<span class="k">assert</span> <span class="p">(</span><span class="s1">&#39;linux&#39;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span><span class="p">),</span> <span class="s2">&#34;è¯¥ä»£ç åªèƒ½åœ¨ Linux ä¸‹æ‰§è¡Œ&#34;</span>

<span class="c1"># æ¥ä¸‹æ¥è¦æ‰§è¡Œçš„ä»£ç </span>
</code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥å¤§å¤§ä¼˜åŒ–æˆ‘ä»¬çš„ä»£ç ï¼Œä¹Ÿå¯ä»¥å‡å°‘<code>if</code>ã€<code>elif</code>ã€<code>else</code>çš„ä½¿ç”¨ã€‚</p>
<p>è¿™ä¸ªå…³é”®å­—ä¹Ÿå¯ä»¥ä½œæ ¡éªŒç”¨ï¼Œæ¯”å¦‚æˆ‘ä»¬ä»ç½‘é¡µä¸Šä¸‹è½½äº†ä¸€ä¸ªä»£ç ï¼Œå¯ä»¥ç”¨<code>assert</code>æ¥æ–­è¨€æœ¬åœ°ä»£ç ä¸ç½‘é¡µä»£ç ç›¸åŒï¼Œå¦åˆ™æŠ¥é”™ã€‚</p>
]]></content><category scheme="https://raycoder.me/categories/python/" term="Python" label="Python"/><category scheme="https://raycoder.me/categories/python%E5%85%B3%E9%94%AE%E5%AD%97/" term="Pythonå…³é”®å­—" label="Pythonå…³é”®å­—"/><category scheme="https://raycoder.me/categories/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" term="Pythonå­¦ä¹ ç¬”è®°" label="Pythonå­¦ä¹ ç¬”è®°"/><category scheme="https://raycoder.me/tags/python/" term="Python" label="Python"/><category scheme="https://raycoder.me/tags/%E5%85%B3%E9%94%AE%E5%AD%97/" term="å…³é”®å­—" label="å…³é”®å­—"/><category scheme="https://raycoder.me/tags/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" term="Pythonå­¦ä¹ ç¬”è®°" label="Pythonå­¦ä¹ ç¬”è®°"/></entry><entry><title type="text">æˆ‘ä»¬å›½äº§è¯­è¨€æœ¨å…°</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/ulang/"/><id>https://raycoder.me/p/ulang/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-03-16T16:24:19+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">è®º'æœ¨å…°'è¯­è¨€</summary><content type="html"><![CDATA[<blockquote>
<p><strong>â€¦â€¦å‡ºé—¨çœ‹ç«ä¼´ï¼Œç«ä¼´çš†æƒŠå¿™ï¼šåŒè¡ŒåäºŒå¹´ï¼Œä¸çŸ¥æœ¨å…°æ˜¯ç´ è´ã€‚</strong></p>
</blockquote>
<p>æ²¡é”™ï¼Œæˆ‘ä»¬å›½äº§è¯­è¨€æœ¨å…°<del>ä¸Šçº¿</del>å‘å¸ƒäº†ï¼ŒçœŸå¥½ï¼</p>
<p>ä½ çœ‹è¿™å®Œç¾çš„å›¾æ ‡ï¼</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200316162738.png" alt=""></p>
<p>å†çœ‹è¿™ç¾å¦™çš„æ‰‹æ„Ÿï¼</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200316163330.png" /></p>
<p>æˆ‘å‡†å¤‡ä¸ºä¹‹æƒŠå‘¼ï¼</p>
<p>ç­‰ä¸‹ï¼Œè¿™ä¸ªå›¾æ ‡â€¦â€¦</p>
<p>è¿™ä¸æ˜¯<code>Pyinstaller</code>æ‰“åŒ…å®Œçš„å›¾æ ‡å—ï¼Ÿï¼</p>
<img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200316163651.jpeg" style="width: 35%;height: 35%;"/>
<p>æˆ‘ä»¬æå‡º<code>PyInstaller Extractor</code>ï¼ˆ<a href="https://github.com/NeoTim/PyInstallerExtractor">https://github.com/NeoTim/PyInstallerExtractor</a>ï¼Œ<a href="https://sourceforge.net/projects/pyinstallerextractor/">https://sourceforge.net/projects/pyinstallerextractor/</a>ï¼‰ã€‚</p>
<p>è¿›è¡Œè§£åŒ…â€¦â€¦</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">$ python pyinstxtractor.py ulang-0.2.2.exe
</code></pre></td></tr></table>
</div>
</div><p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200316164435.png" alt=""></p>
<p>ä¸æ„§æ˜¯æ•¢ç”¨<code>Pyinstaller</code>çš„è¯­è¨€</p>
<p>ä½ å¥½æ­¹ä¹ŸåŠ ä¸ªå›¾æ ‡å•Šï¼</p>
<p>è®©æˆ‘ä»¬çœ‹çœ‹<code>ulang.runtime.env</code>èŠ‚é€‰</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">return</span> <span class="p">{</span>
    <span class="s2">&#34;print&#34;</span>             <span class="p">:</span> <span class="n">local_print</span><span class="p">,</span>
    <span class="s2">&#34;println&#34;</span>           <span class="p">:</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">objs</span><span class="p">:</span> <span class="n">local_print</span><span class="p">(</span><span class="o">*</span><span class="n">objs</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s2">&#34;end&#34;</span><span class="p">:</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">}),</span>
    <span class="s2">&#34;assert&#34;</span>            <span class="p">:</span> <span class="n">local_assert</span><span class="p">,</span>
    <span class="s2">&#34;len&#34;</span>               <span class="p">:</span> <span class="nb">len</span><span class="p">,</span>
    <span class="s2">&#34;enumerate&#34;</span>         <span class="p">:</span> <span class="nb">enumerate</span><span class="p">,</span>
    <span class="s2">&#34;all&#34;</span>               <span class="p">:</span> <span class="nb">all</span><span class="p">,</span>
    <span class="s2">&#34;any&#34;</span>               <span class="p">:</span> <span class="nb">any</span><span class="p">,</span>
    <span class="s2">&#34;range&#34;</span>             <span class="p">:</span> <span class="nb">range</span><span class="p">,</span>
    <span class="s2">&#34;round&#34;</span>             <span class="p">:</span> <span class="nb">round</span><span class="p">,</span>
    <span class="s2">&#34;input&#34;</span>             <span class="p">:</span> <span class="nb">input</span><span class="p">,</span>
    <span class="s2">&#34;reverse&#34;</span>           <span class="p">:</span> <span class="nb">reversed</span><span class="p">,</span>
    <span class="s2">&#34;super&#34;</span>             <span class="p">:</span> <span class="nb">super</span><span class="p">,</span>
    <span class="s2">&#34;locals&#34;</span>            <span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="nb">locals</span><span class="p">(),</span>
    <span class="s2">&#34;bool&#34;</span>              <span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="s2">&#34;float&#34;</span>             <span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="s2">&#34;int&#34;</span>               <span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="s2">&#34;str&#34;</span>               <span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="s2">&#34;list&#34;</span>              <span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
    <span class="s2">&#34;dict&#34;</span>              <span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="s2">&#34;set&#34;</span>               <span class="p">:</span> <span class="nb">set</span><span class="p">,</span>
    <span class="s2">&#34;tuple&#34;</span>             <span class="p">:</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">args</span><span class="p">,</span>
    <span class="s2">&#34;char&#34;</span>              <span class="p">:</span> <span class="nb">chr</span><span class="p">,</span>
    <span class="s2">&#34;ord&#34;</span>               <span class="p">:</span> <span class="nb">ord</span><span class="p">,</span>
    <span class="s2">&#34;bytes&#34;</span>             <span class="p">:</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;ascii&#34;</span><span class="p">:</span><span class="nb">bytes</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">encoding</span><span class="p">),</span>
    <span class="s2">&#34;typeof&#34;</span>            <span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
    <span class="s2">&#34;isa&#34;</span>               <span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="p">:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="p">),</span>
    <span class="s2">&#34;max&#34;</span>               <span class="p">:</span> <span class="nb">max</span><span class="p">,</span>
    <span class="s2">&#34;min&#34;</span>               <span class="p">:</span> <span class="nb">min</span><span class="p">,</span>
    <span class="s2">&#34;map&#34;</span>               <span class="p">:</span> <span class="nb">map</span><span class="p">,</span>
    <span class="s2">&#34;filter&#34;</span>            <span class="p">:</span> <span class="nb">filter</span><span class="p">,</span>
    <span class="s2">&#34;zip&#34;</span>               <span class="p">:</span> <span class="nb">zip</span><span class="p">,</span>
    <span class="s2">&#34;staticmethod&#34;</span>      <span class="p">:</span> <span class="nb">staticmethod</span><span class="p">,</span>
    <span class="s2">&#34;property&#34;</span>          <span class="p">:</span> <span class="nb">property</span><span class="p">,</span>
    <span class="s2">&#34;ceil&#34;</span>              <span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">,</span>
    <span class="s2">&#34;floor&#34;</span>             <span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">,</span>
    <span class="s2">&#34;fabs&#34;</span>              <span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">,</span>
    <span class="s2">&#34;sqrt&#34;</span>              <span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">,</span>
    <span class="s2">&#34;log&#34;</span>               <span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">,</span>
    <span class="s2">&#34;log10&#34;</span>             <span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">,</span>
    <span class="s2">&#34;exp&#34;</span>               <span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">exp</span><span class="p">,</span>
    <span class="s2">&#34;pow&#34;</span>               <span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">,</span>
    <span class="s2">&#34;sin&#34;</span>               <span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">,</span>
    <span class="s2">&#34;cos&#34;</span>               <span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">,</span>
    <span class="s2">&#34;tan&#34;</span>               <span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">tan</span><span class="p">,</span>
    <span class="s2">&#34;asin&#34;</span>              <span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">asin</span><span class="p">,</span>
    <span class="s2">&#34;acos&#34;</span>              <span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">acos</span><span class="p">,</span>
    <span class="s2">&#34;atan&#34;</span>              <span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">atan</span><span class="p">,</span>
    <span class="s2">&#34;spawn&#34;</span>             <span class="p">:</span> <span class="n">builtin_spawn</span><span class="p">,</span>
    <span class="s2">&#34;kill&#34;</span>              <span class="p">:</span> <span class="n">builtin_kill</span><span class="p">,</span>
    <span class="s2">&#34;self&#34;</span>              <span class="p">:</span> <span class="n">builtin_self</span><span class="p">,</span>
    <span class="s2">&#34;quit&#34;</span>              <span class="p">:</span> <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">,</span>
    <span class="s2">&#34;open&#34;</span>              <span class="p">:</span> <span class="nb">open</span><span class="p">,</span>
    <span class="s2">&#34;install&#34;</span>           <span class="p">:</span> <span class="n">pip_install</span><span class="p">,</span>
    <span class="s2">&#34;time&#34;</span>              <span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">,</span>
    <span class="s2">&#34;year&#34;</span>              <span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">year</span><span class="p">,</span>
    <span class="s2">&#34;month&#34;</span>             <span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">month</span><span class="p">,</span>
    <span class="s2">&#34;day&#34;</span>               <span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">day</span><span class="p">,</span>
    <span class="s2">&#34;hour&#34;</span>              <span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span>
    <span class="s2">&#34;minute&#34;</span>            <span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span>
    <span class="s2">&#34;second&#34;</span>            <span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">second</span><span class="p">,</span>
    <span class="s2">&#34;microsecond&#34;</span>       <span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">microsecond</span><span class="p">,</span>
    <span class="s2">&#34;sleep&#34;</span>             <span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">,</span>
    <span class="s2">&#34;delay&#34;</span>             <span class="p">:</span> <span class="k">lambda</span> <span class="n">ms</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">ms</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">),</span>
    <span class="s2">&#34;delayMicroseconds&#34;</span> <span class="p">:</span> <span class="k">lambda</span> <span class="n">us</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">us</span> <span class="o">/</span> <span class="mi">1000000</span><span class="p">),</span>
    <span class="s2">&#34;PI&#34;</span>                <span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span>
    <span class="s2">&#34;ARGV&#34;</span>              <span class="p">:</span> <span class="n">argv</span><span class="p">,</span>
    <span class="s2">&#34;__builtins__&#34;</span>      <span class="p">:</span> <span class="n">fix_builtins</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&#34;__import__&#34;</span>      <span class="p">:</span> <span class="n">local_import</span><span class="p">,</span>
            <span class="s2">&#34;__build_class__&#34;</span> <span class="p">:</span> <span class="n">__build_class__</span><span class="p">,</span>
            <span class="s2">&#34;__name__&#34;</span>        <span class="p">:</span> <span class="s2">&#34;__main__&#34;</span><span class="p">,</span>
            <span class="s2">&#34;__file__&#34;</span>        <span class="p">:</span> <span class="n">fname</span><span class="p">,</span>
            <span class="s2">&#34;__print__&#34;</span>       <span class="p">:</span> <span class="n">eval_print</span><span class="p">,</span>
            <span class="s2">&#34;___&#34;</span>             <span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
            <span class="s2">&#34;__div__&#34;</span>         <span class="p">:</span> <span class="n">__builtin_div</span><span class="p">,</span>
            <span class="s2">&#34;__rem__&#34;</span>         <span class="p">:</span> <span class="n">__builtin_rem</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">),</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>ä¸æ„§æ˜¯å›½äº§å¤§é¡¹ç›®</p>
<div class="mermaid">
graph TD;
    è·å–æŒ‡ä»¤-->æ›¿æ¢æˆPythonä»£ç ;
    æ›¿æ¢æˆPythonä»£ç -->exec;
</div>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://www.zhihu.com/question/366509495">https://www.zhihu.com/question/366509495</a></li>
<li><a href="https://www.zhihu.com/question/366698484">https://www.zhihu.com/question/366698484</a></li>
<li><a href="https://github.com/Myts2/ulang">https://github.com/Myts2/ulang</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/104488265">https://zhuanlan.zhihu.com/p/104488265</a></li>
<li><a href="https://github.com/loopyme/ulang-uncompile">https://github.com/loopyme/ulang-uncompile</a></li>
</ul>]]></content><category scheme="https://raycoder.me/categories/%E5%90%90%E6%A7%BD/" term="åæ§½" label="åæ§½"/><category scheme="https://raycoder.me/tags/ulang/" term="Ulang" label="Ulang"/><category scheme="https://raycoder.me/tags/%E7%B4%A0%E8%B4%9E/" term="ç´ è´" label="ç´ è´"/></entry><entry><title type="text">ç™½å«–Office365</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/%E7%99%BD%E5%AB%96office365/"/><id>https://raycoder.me/p/%E7%99%BD%E5%AB%96office365/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-03-16T12:57:27+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">Office365-KMSæœåŠ¡å™¨æ¿€æ´»</summary><content type="html"><![CDATA[<blockquote>
<p><strong>æœ€è¿‘ç³»ç»Ÿå‡çº§åˆ°1909, é€äº†æˆ‘ä¸€å¥—Office365. æˆ‘ä¹Ÿå¾ˆæ— å¥ˆå•Š, é€äº†è®©æˆ‘æ¿€æ´»ä¹Ÿæ˜¯å¤Ÿäº†...</strong></p>
<!-- more -->
</blockquote>
<p>ç”¨äº†å„ç§æ¿€æ´»è½¯ä»¶éƒ½æ— æ•ˆï¼Œæ¯”å¦‚<a href="https://otp.landian.vip">Office Tool Plus</a>. æ ¹æ®å›½å¤–æŸç½‘ç«™çš„èµ„æ–™ï¼Œç¼–å†™äº†ä¸€ä¸ªæ‰¹å¤„ç†æ–‡ä»¶ï¼Œå‘½åä¸º<code>Office365æ¿€æ´».bat</code>. ( å…¶å®å«ä»€ä¹ˆéƒ½å¯ä»¥ ) ä»£ç å¦‚ä¸‹:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">@echo off
title Activate Office <span class="m">365</span> ProPlus <span class="k">for</span> FREE - MSGuides.com<span class="p">&amp;</span>cls<span class="p">&amp;</span><span class="nb">echo</span> <span class="o">============================================================================</span><span class="p">&amp;</span><span class="nb">echo</span> <span class="c1">#Project: Activating Microsoft software products for FREE without software&amp;echo ============================================================================&amp;echo.&amp;echo #Supported products: Office 365 ProPlus (x86-x64)&amp;echo.&amp;echo.&amp;(if exist &#34;%ProgramFiles%\Microsoft Office\Office16\ospp.vbs&#34; cd /d &#34;%ProgramFiles%\Microsoft Office\Office16&#34;)&amp;(if exist &#34;%ProgramFiles(x86)%\Microsoft Office\Office16\ospp.vbs&#34; cd /d &#34;%ProgramFiles(x86)%\Microsoft Office\Office16&#34;)&amp;(for /f %%x in (&#39;dir /b ..\root\Licenses16\proplusvl_kms*.xrm-ms&#39;) do cscript ospp.vbs /inslic:&#34;..\root\Licenses16\%%x&#34; &gt;nul)&amp;(for /f %%x in (&#39;dir /b ..\root\Licenses16\proplusvl_mak*.xrm-ms&#39;) do cscript ospp.vbs /inslic:&#34;..\root\Licenses16\%%x&#34; &gt;nul)&amp;echo.&amp;echo ============================================================================&amp;echo Activating your Office...&amp;cscript //nologo ospp.vbs /unpkey:WFG99 &gt;nul&amp;cscript //nologo ospp.vbs /unpkey:DRTFM &gt;nul&amp;cscript //nologo ospp.vbs /unpkey:BTDRB &gt;nul&amp;cscript //nologo ospp.vbs /inpkey:XQNVK-8JYDB-WJ9W3-YJ8YR-WFG99 &gt;nul&amp;set i=1</span>
:server
<span class="k">if</span> %i%<span class="o">==</span><span class="m">1</span> <span class="nb">set</span> <span class="nv">KMS_Sev</span><span class="o">=</span>kms7.MSGuides.com
<span class="k">if</span> %i%<span class="o">==</span><span class="m">2</span> <span class="nb">set</span> <span class="nv">KMS_Sev</span><span class="o">=</span>kms8.MSGuides.com
<span class="k">if</span> %i%<span class="o">==</span><span class="m">3</span> <span class="nb">set</span> <span class="nv">KMS_Sev</span><span class="o">=</span>kms9.MSGuides.com
<span class="k">if</span> %i%<span class="o">==</span><span class="m">4</span> goto notsupported
cscript //nologo ospp.vbs /sethst:%KMS_Sev% &gt;nul<span class="p">&amp;</span><span class="nb">echo</span> <span class="o">============================================================================</span><span class="p">&amp;</span>echo.<span class="p">&amp;</span>echo.
cscript //nologo ospp.vbs /act <span class="p">|</span> find /i <span class="s2">&#34;successful&#34;</span> <span class="o">&amp;&amp;</span> <span class="o">(</span>echo.<span class="p">&amp;</span><span class="nb">echo</span> <span class="o">============================================================================</span><span class="p">&amp;</span>echo.<span class="p">&amp;</span><span class="nb">echo</span> <span class="c1">#My official blog: MSGuides.com&amp;echo.&amp;echo #How it works: bit.ly/kms-server&amp;echo.&amp;echo #Please feel free to contact me at msguides.com@gmail.com if you have any questions or concerns.&amp;echo.&amp;echo #Please consider supporting this project: donate.msguides.com&amp;echo #Your support is helping me keep my servers running everyday!&amp;echo.&amp;echo ============================================================================&amp;choice /n /c YN /m &#34;Would you like to visit my blog [Y,N]?&#34; &amp; if errorlevel 2 exit) || (echo The connection to my KMS server failed! Trying to connect to another one... &amp; echo Please wait... &amp; echo. &amp; echo. &amp; set /a i+=1 &amp; goto server)</span>
explorer <span class="s2">&#34;http://MSGuides.com&#34;</span><span class="p">&amp;</span>goto halt
:notsupported
echo.<span class="p">&amp;</span><span class="nb">echo</span> <span class="o">============================================================================</span><span class="p">&amp;</span><span class="nb">echo</span> Sorry! Your version is not supported.<span class="p">&amp;</span><span class="nb">echo</span> Please try installing the latest version here: bit.ly/odt2k16
:halt
pause
</code></pre></td></tr></table>
</div>
</div><p>å³é”®ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ. å¦‚æœ‰ä»€ä¹ˆé—®é¢˜è¯·åœ¨è¯„è®ºåŒºåé¦ˆã€‚</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li><a href="https://kms.cangshui.net/">æ²§æ°´KMS</a></li>
</ul>
]]></content><category scheme="https://raycoder.me/categories/%E6%89%B9%E5%A4%84%E7%90%86/" term="æ‰¹å¤„ç†" label="æ‰¹å¤„ç†"/><category scheme="https://raycoder.me/tags/%E5%B7%A5%E5%85%B7/" term="å·¥å…·" label="å·¥å…·"/><category scheme="https://raycoder.me/tags/%E7%A6%8F%E5%88%A9/" term="ç¦åˆ©" label="ç¦åˆ©"/><category scheme="https://raycoder.me/tags/office/" term="Office" label="Office"/><category scheme="https://raycoder.me/tags/%E7%A0%B4%E8%A7%A3/" term="ç ´è§£" label="ç ´è§£"/></entry><entry><title type="text">How to read "Google" correctly?</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/how-to-read-google-correctly/"/><id>https://raycoder.me/p/how-to-read-google-correctly/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-03-16T12:05:28+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">æ­£ç¡®å¿µå¥½"è°·æ­Œ"</summary><content type="html"><![CDATA[<div id="player"></div>
<script type="text/javascript" src="https://player.dogecloud.com/js/loader"></script>
<script type="text/javascript">
var player = new DogePlayer({
    container: document.getElementById('player'),
    userId: 1136,
    vcode: '4a72f3273d07ffc6',
    autoPlay: false
});
</script>]]></content><category scheme="https://raycoder.me/categories/%E6%90%9E%E7%AC%91/" term="æç¬‘" label="æç¬‘"/><category scheme="https://raycoder.me/tags/%E8%B0%B7%E6%AD%8C/" term="è°·æ­Œ" label="è°·æ­Œ"/><category scheme="https://raycoder.me/tags/%E6%97%A5%E5%B8%B8/" term="æ—¥å¸¸" label="æ—¥å¸¸"/><category scheme="https://raycoder.me/tags/%E6%90%9E%E7%AC%91/" term="æç¬‘" label="æç¬‘"/></entry><entry><title type="text">Hugo-Python(ä¼ª)è‡ªåŠ¨éƒ¨ç½²</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/hugo-auto-deploy/"/><id>https://raycoder.me/p/hugo-auto-deploy/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-03-16T09:08:23+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">Hugoè‡ªåŠ¨éƒ¨ç½²</summary><content type="html"><![CDATA[<p>æœ€è¿‘æ— èŠå°±å†™äº†ä¸ª<code>Hugoè‡ªåŠ¨éƒ¨ç½²</code>çš„Pythonè„šæœ¬ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># coding:utf-8</span>

<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">system</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">ctime</span>

<span class="n">system</span><span class="p">(</span><span class="s1">&#39;start cmd /K &#34;cd /d D:/workspace/hugoblog&amp;hugo&amp;cd public&amp;git add -A&amp;git commit -m </span><span class="se">\&#34;</span><span class="s1">Site updated: </span><span class="si">%s</span><span class="se">\&#34;</span><span class="s1">&amp;git push -u origin master&#34;&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">ctime</span><span class="p">()))</span>
</code></pre></td></tr></table>
</div>
</div><p>å‡çš„è‡ªåŠ¨ï¼Œå…¶å®å°±æ˜¯ä¸€æ¬¡æ€§æ‰§è¡Œæ‰€æœ‰éƒ¨ç½²å‘½ä»¤ã€‚</p>
<p>è‡ªåŠ¨éƒ¨ç½²è¯·å‚è€ƒ<a href="/p/deploy-your-hugo-and-hexo-blog-to-netlify">Hugo-MemE/Hexo(çœŸ)è‡ªåŠ¨æ¨é€éƒ¨ç½²è‡³Netlify</a></p>]]></content><category scheme="https://raycoder.me/categories/python/" term="Python" label="Python"/><category scheme="https://raycoder.me/categories/hugo/" term="Hugo" label="Hugo"/><category scheme="https://raycoder.me/tags/hugo/" term="Hugo" label="Hugo"/><category scheme="https://raycoder.me/tags/python/" term="Python" label="Python"/><category scheme="https://raycoder.me/tags/git/" term="Git" label="Git"/></entry><entry><title type="text">ã€è½¬ã€‘é€‚åˆçˆ¬è™«ä½¿ç”¨çš„API</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/spider-api/"/><id>https://raycoder.me/p/spider-api/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-03-08T17:04:23+08:00</published><summary type="html">ä¸€ã€ç½‘æ˜“äº‘éŸ³ä¹ ã€è½¬ã€‘https://zhuanlan.zhihu.com/p/30246788 è°ƒç”¨åœ°å€ï¼šhttps://api.imjad.cn/cloudmusic/ åœ¨ä»¥ä¸Šç½‘å€åç´§è·Ÿä¸¤ä¸ªå‚æ•°å®Œæˆå…·ä½“â€¦â€¦</summary><content type="html"><![CDATA[<h3 id="ä¸€ç½‘æ˜“äº‘éŸ³ä¹">ä¸€ã€ç½‘æ˜“äº‘éŸ³ä¹</h3>
<p>ã€è½¬ã€‘<a href="https://zhuanlan.zhihu.com/p/30246788">https://zhuanlan.zhihu.com/p/30246788</a>
è°ƒç”¨åœ°å€ï¼š<a href="https://api.imjad.cn/cloudmusic/">https://api.imjad.cn/cloudmusic/</a>
åœ¨ä»¥ä¸Šç½‘å€åç´§è·Ÿä¸¤ä¸ªå‚æ•°å®Œæˆå…·ä½“è¯·æ±‚ï¼š</p>
<ol>
<li>type ï¼ˆé»˜è®¤å€¼ä¸ºtype=songï¼‰</li>
<li>idï¼ˆæ­Œæ›²çš„idï¼‰
å…¶ä¸­typeçš„æ‰€æœ‰å¯å–çš„å€¼å¦‚ä¸‹ï¼š</li>
</ol>
<table>
<thead>
<tr>
<th align="center">type</th>
<th align="center">å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">song</td>
<td align="center">å•æ›²</td>
</tr>
<tr>
<td align="center">lyric</td>
<td align="center">æ­Œè¯</td>
</tr>
<tr>
<td align="center">comments</td>
<td align="center">è¯„è®º</td>
</tr>
<tr>
<td align="center">detail</td>
<td align="center">æ­Œæ›²è¯¦æƒ…</td>
</tr>
<tr>
<td align="center">artist</td>
<td align="center">æ­Œæ‰‹</td>
</tr>
<tr>
<td align="center">album</td>
<td align="center">ä¸“è¾‘</td>
</tr>
<tr>
<td align="center">playlist</td>
<td align="center">æ­Œå•</td>
</tr>
<tr>
<td align="center">mv</td>
<td align="center">MV</td>
</tr>
<tr>
<td align="center">djradio</td>
<td align="center">ä¸»æ’­ç”µå°</td>
</tr>
<tr>
<td align="center">dj</td>
<td align="center">ä¸»æ’­ç”µå°å•æ›²ID</td>
</tr>
<tr>
<td align="center">detail_dj</td>
<td align="center">ä¸»æ’­ç”µå°å•æ›²è¯¦æƒ…</td>
</tr>
<tr>
<td align="center">search</td>
<td align="center">æœç´¢</td>
</tr>
</tbody>
</table>
<ol>
<li>type=song
å½“type=songæ—¶ï¼Œè¿”å›æ­Œæ›²çš„ä¸‹è½½åœ°å€ä¿¡æ¯ï¼ˆå’Œå…¶ä»–ä¸æ˜¯ç‰¹åˆ«æœ‰ç”¨çš„ä¿¡æ¯ï¼‰.
æ‰€ä»¥å½“æˆ‘ä»¬çŸ¥é“ä¸€é¦–æ­Œçš„idåï¼Œå°±å¯ä»¥ç”¨type=songæ¥è·å–åˆ°è¿™é¦–æ­Œçš„ä¸‹è½½é“¾æ¥.
å®Œæ•´è¯·æ±‚ç¤ºä¾‹ï¼š
è¯·æ±‚idä¸º28012031çš„æ­Œæ›²ä¸‹è½½åœ°å€
<a href="https://api.imjad.cn/cloudmusic/?type=song&amp;id=28012031">https://api.imjad.cn/cloudmusic/?type=song&amp;id=28012031</a>
åº”å½“æŒ‡å‡ºï¼šæ­¤æ—¶è¿”å›çš„æ­Œæ›²æ¯”ç‰¹ç‡ä¸ºé»˜è®¤å€¼128000ï¼Œå¦‚æœä½ éœ€è¦éŸ³è´¨æ›´é«˜çš„èµ„æºï¼Œå¯ä»¥å†å°¾éƒ¨å†è·Ÿä¸Šå‚æ•°br,brçš„å–å€¼å†³å®šéŸ³è´¨ï¼Œå¤§æ¦‚æ˜¯è¿™æ ·ï¼š</li>
</ol>
<table>
<thead>
<tr>
<th align="center">å‚æ•°å</th>
<th align="center">å«ä¹‰</th>
<th align="center">é»˜è®¤</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">br</td>
<td align="center"><code>int</code>ï¼ŒæŒ‡å®šæ­Œæ›²ç ç‡ï¼Œå¯é€‰ï¼š64000ï¼Œ128000ï¼Œ198000ï¼Œ320000</td>
<td align="center">128000</td>
</tr>
</tbody>
</table>
<p>å®Œæ•´è¯·æ±‚ç¤ºä¾‹ï¼š
è¯·æ±‚idä¸º28012031çš„æ­Œæ›²ä¸‹è½½åœ°å€ï¼Œbrä¸º320000
<a href="https://api.imjad.cn/cloudmusic/?type=song&amp;id=28012031&amp;br=320000">https://api.imjad.cn/cloudmusic/?type=song&amp;id=28012031&amp;br=320000</a>
æˆ‘ä¸ç¡®å®šæ˜¯ä¸æ˜¯æ¯ä¸€é¦–æ­Œéƒ½æœ‰br=320000çš„ç‰ˆæœ¬å“¦...(ï¿£â–½ï¿£&quot;)</p>
<p>2.type=lyric
å½“æˆ‘ä»¬çŸ¥é“ä¸€é¦–æ­Œçš„idåï¼Œå°±å¯ä»¥ç”¨type=lyricæ¥è·å–åˆ°è¿™é¦–æ­Œçš„æ­Œè¯
å®Œæ•´è¯·æ±‚ç¤ºä¾‹ï¼š
è¯·æ±‚idä¸º28012031æ­Œæ›²çš„æ­Œè¯ä¿¡æ¯
<a href="https://api.imjad.cn/cloudmusic/?type=lyric&amp;id=28012031">https://api.imjad.cn/cloudmusic/?type=lyric&amp;id=28012031</a>
è¿”å›çš„æ­Œè¯ä¿¡æ¯ä¸­ä¼šå¸¦æœ‰æ—¶é—´è½´0.0</p>
<p>3.type=comments
å½“æˆ‘ä»¬çŸ¥é“ä¸€é¦–æ­Œçš„idåï¼Œå°±å¯ä»¥ç”¨type=commentsæ¥è·å–åˆ°è¿™é¦–æ­Œçš„è¯„è®ºä¿¡æ¯
å®Œæ•´è¯·æ±‚ç¤ºä¾‹ï¼š
è¯·æ±‚idä¸º28012031æ­Œæ›²çš„è¯„è®ºä¿¡æ¯
<a href="https://api.imjad.cn/cloudmusic/?type=comments&amp;id=28012031">https://api.imjad.cn/cloudmusic/?type=comments&amp;id=28012031</a>
è¿”å›çš„æ•°æ®ä¸­æœ‰ä¸€ä¸ªjsonæ•°ç»„ä¸“é—¨å­˜å‚¨çƒ­è¯„ï¼Œå¦ä¸€ä¸ªjsonæ•°ç»„ä¸“é—¨å­˜å‚¨æœ€æ–°è¯„è®ºã€‚
æ¯ä¸€æ¡è¯„è®ºä¸­åŒ…å«éå¸¸å¤šçš„é‡è¦ä¿¡æ¯ï¼Œä½ éœ€è¦ç”¨åˆ°çš„é‡Œé¢åŸºæœ¬ä¸Šéƒ½æœ‰ ãƒ»ã‰¨ãƒ»</p>
<p>4.type=detail
è¿”å›ä¸€äº›æ¯”è¾ƒåŸºæœ¬çš„ä¿¡æ¯ï¼Œæ­Œæ›²åæ­Œæ›²idï¼Œæ­Œæ‰‹åæ­Œæ‰‹idï¼Œä¸“è¾‘å°é¢å›¾ä¹‹ç±»çš„
å®Œæ•´è¯·æ±‚ç¤ºä¾‹ï¼š
è¯·æ±‚idä¸º28012031æ­Œæ›²çš„detailä¿¡æ¯
<a href="https://api.imjad.cn/cloudmusic/?type=detail&amp;id=28012031">https://api.imjad.cn/cloudmusic/?type=detail&amp;id=28012031</a>
ä½ è¯•è¯•æŠŠdetailåŠ ä¸ªs...å±…ç„¶ä¹Ÿæœ‰æ•°æ®è¿”å›...(Â´ãƒ»Ï‰ãƒ»`)</p>
<p>5.type=playlist
ï¼ˆplaylistå‰é¢çš„å‡ ä¸ªå€¼æˆ‘å°±ä¸å…·ä½“è¯´äº†ï¼Œæœ‰éœ€è¦çš„äººè‡ªå·±è¯•è¯•å°±è¡Œï¼‰
å½“æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªæ­Œå•çš„idåï¼Œå°±å¯ä»¥ç”¨type=playlistæ¥è·å–åˆ°è¿™ä¸ªæ­Œå•çš„ç›¸å…³ä¿¡æ¯ï¼Œä¾‹å¦‚åˆ›å»ºè€…çš„ä¿¡æ¯å•Šï¼Œå°é¢å›¾å•Šï¼Œæ­Œå•è¢«æ’­æ”¾çš„æ¬¡æ•°å•Š....å½“ç„¶è¿˜æœ‰æœ€é‡è¦çš„æ­Œå•å†…æ‰€æœ‰æ­Œæ›²çš„ç®€ç•¥ä¿¡æ¯ï¼ˆåŒ…å«æ­Œæ›²idç­‰ç­‰ï¼‰
å®Œæ•´è¯·æ±‚ç¤ºä¾‹ï¼š
è¯·æ±‚æ­Œå•idä¸º309390784çš„æ­Œå•ä¿¡æ¯
<a href="https://api.imjad.cn/cloudmusic/?type=playlist&amp;id=309390784">https://api.imjad.cn/cloudmusic/?type=playlist&amp;id=309390784</a>
å½“ç„¶ä½ ä¹Ÿå¯ä»¥æŠŠidæ”¹æˆä½ è‡ªå·±å–œæ¬¢çš„ä¸€ä¸ªæ­Œå•ï¼Œè‡³äºæ­Œå•idæ€ä¹ˆè·å–å˜›ï¼Œä½ åœ¨ç½‘æ˜“äº‘éŸ³ä¹çš„æ­Œå•ä¸ŠæŒ‰å³é”®ï¼Œå¤åˆ¶é“¾æ¥ï¼Œæ‹¿å»æµè§ˆå™¨é‡Œæ‰“å¼€ï¼Œåœ°å€æ é‡Œé¢å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ­Œå•çš„idâ”Œ( à² _à² )â”˜</p>
<p>6.type=search
è¿™ä¸ªæˆ‘æ„Ÿè§‰æŒºé‡è¦çš„ï¼Œä»”ç»†çœ‹å¥½äº†
å½“ä½ æŒ‡å®štype=searchæ—¶ï¼Œåé¢éœ€è¦ç´§è·Ÿå‚æ•°search_typeï¼Œç”¨æ¥ç¡®å®šä½ åˆ°åº•éœ€è¦æœä¸ªä»€ä¹ˆ
search_typeå¯ä»¥å–çš„å€¼å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th align="center">search_type</th>
<th align="center">å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">1</td>
<td align="center">å•æ›²</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">ä¸“è¾‘</td>
</tr>
<tr>
<td align="center">100</td>
<td align="center">æ­Œæ‰‹</td>
</tr>
<tr>
<td align="center">1000</td>
<td align="center">æ­Œå•</td>
</tr>
<tr>
<td align="center">1002</td>
<td align="center">ç”¨æˆ·</td>
</tr>
<tr>
<td align="center">1004</td>
<td align="center">mv</td>
</tr>
<tr>
<td align="center">1006</td>
<td align="center">æ­Œè¯</td>
</tr>
<tr>
<td align="center">1009</td>
<td align="center">ä¸»æ’­ç”µå°</td>
</tr>
</tbody>
</table>
<p>1.search_type=1
é»˜è®¤æƒ…å†µä¸‹search_typeçš„å€¼ä¸º1ï¼Œæœç´¢å•æ›²ã€‚åé¢ç´§è·Ÿs=xxxxxæ¥æŒ‡å®šæœç´¢çš„å…³é”®å­—
å®Œæ•´è¯·æ±‚ç¤ºä¾‹ï¼š
æœç´¢å•æ›²ï¼Œå…³é”®å­—ä¸ºcocoonï¼ˆæ­Œåï¼‰
<a href="https://api.imjad.cn/cloudmusic/?type=search&amp;search_type=1&amp;s=cocoon">https://api.imjad.cn/cloudmusic/?type=search&amp;search_type=1&amp;s=cocoon</a>
è¿”å›å¾ˆå¤šæ­Œåä¸ºcocoonçš„æ­Œæ›²ä¿¡æ¯ï¼Œå¤§æ¦‚è¿”å›å¤šå°‘é¦–æˆ‘ä¸çŸ¥é“ï¼Œä½ éœ€è¦çš„é‡Œé¢åº”è¯¥æœ‰..</p>
<p>2.search_type=1000
æœç´¢æ­Œå•ã€‚ç”¨æ­Œå•åç”¨ä½œå…³é”®å­—ï¼Œæ¥æœç´¢æ­Œå•è¿™æ ·çš„ç®€å•ä¸œè¥¿å°±ä¸è¯´äº†ï¼Œè¿™é‡Œæä¸€ä¸‹å¦å¤–ä¸€ç‚¹ï¼Œå‡ºäº†æ­Œå•åä¹‹å¤–ï¼Œä½ å¯ä»¥ç”¨ç”¨æˆ·åæ¥ä½œä¸ºå…³é”®å­—ï¼Œè¿™æ ·è¿”å›çš„æ˜¯è¯¥ç”¨æˆ·åˆ›å»ºçš„æ‰€æœ‰æ­Œå•
å®Œæ•´è¯·æ±‚ç¤ºä¾‹ï¼š
æœç´¢æ­Œå•ï¼Œç”¨æˆ·CeuiLiSAæ‰€åˆ›å»ºçš„æ‰€æœ‰æ­Œå•ï¼ˆæˆ‘è‡ªå·±çš„ç”¨æˆ·åï¼‰
<a href="https://api.imjad.cn/cloudmusic/?type=search&amp;search_type=1000&amp;s=CeuiLiSA">https://api.imjad.cn/cloudmusic/?type=search&amp;search_type=1000&amp;s=CeuiLiSA</a>
è¿”å›çš„æ˜¯æ­Œå•çš„ç®€ç•¥ä¿¡æ¯ï¼Œæ²¡æœ‰æ­Œå•å†…çš„å…·ä½“çš„æ­Œã€‚åªæœ‰idå•Šå°é¢å•Šä¹‹ç±»çš„å†…å®¹ï¼Œä½†æ˜¯ä½ åªè¦æœ‰äº†æ­Œå•idï¼Œé‚£å°±å¯ä»¥å–å¾—æ‰€æœ‰ä½ éœ€è¦çš„ä¿¡æ¯å•¦ã€‚ã€‚</p>
<p>3.search_type=1002
è¿™æ ·å°±å¯ä»¥æœç´¢åˆ°ç½‘æ˜“äº‘éŸ³ä¹çš„æŸä¸ªç”¨æˆ·ä¿¡æ¯äº†ã€‚è¿”å›çš„ç”¨æˆ·ä¿¡æ¯ä¸å¤šä¸å°‘ï¼Œåˆšå¥½å¯ä»¥ç”¨æ¥åšç”¨æˆ·ä¿¡æ¯å±•ç¤ºçš„é¡µé¢ã€‚
å®Œæ•´è¯·æ±‚ç¤ºä¾‹ï¼š
æœç´¢ç”¨æˆ·ï¼Œå…³é”®å­—ä¸ºCeuiLiSAã€‚
<a href="https://api.imjad.cn/cloudmusic/?type=search&amp;search_type=1002&amp;s=CeuiLiSA">https://api.imjad.cn/cloudmusic/?type=search&amp;search_type=1002&amp;s=CeuiLiSA</a></p>
]]></content><category scheme="https://raycoder.me/tags/%E7%88%AC%E8%99%AB/" term="çˆ¬è™«" label="çˆ¬è™«"/><category scheme="https://raycoder.me/tags/api/" term="Api" label="Api"/></entry><entry><title type="text">Pythonå­¦ä¹ ç¬”è®°ä¹‹exec()å‡½æ•°ç®€æ</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/python-exec/"/><id>https://raycoder.me/p/python-exec/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-03-06T00:44:34+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">exec()å‡½æ•°çš„ä½œç”¨ï¼šåŠ¨æ€æ‰§è¡Œpythonä»£ç ã€‚ä¹Ÿå°±æ˜¯è¯´exec()å¯ä»¥æ‰§è¡Œå¤æ‚çš„pythonä»£ç ï¼Œè€Œä¸åƒeval()å‡½æ•°é‚£æ ·åªèƒ½è®¡ç®—ä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚ ã€è½¬ã€‘https://www.jianshu.câ€¦â€¦</summary><content type="html"><![CDATA[<p><code>exec()</code>å‡½æ•°çš„ä½œç”¨ï¼šåŠ¨æ€æ‰§è¡Œpythonä»£ç ã€‚ä¹Ÿå°±æ˜¯è¯´<code>exec()</code>å¯ä»¥æ‰§è¡Œå¤æ‚çš„pythonä»£ç ï¼Œè€Œä¸åƒ<code>eval()</code>å‡½æ•°é‚£æ ·åªèƒ½è®¡ç®—ä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚
ã€è½¬ã€‘<a href="https://www.jianshu.com/p/3cf0a649e7bc">https://www.jianshu.com/p/3cf0a649e7bc</a>
ä¸¾ä¸€ä¸ªç®€å•çš„å°ä¾‹å­ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">12</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">13</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">exec</span><span class="p">(</span><span class="s2">&#34;answer=i*j&#34;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="s2">&#34;Answer is </span><span class="si">%s</span><span class="s2">&#34;</span><span class="o">%</span><span class="n">answer</span><span class="p">)</span>
<span class="n">Answer</span> <span class="ow">is</span> <span class="mi">156</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™è¡¨æ˜ç¬¬ä¸‰å¥çš„exec()å‡½æ•°èƒ½å¤Ÿæ­£ç¡®åœ°æ‰§è¡ŒPythonä»£ç ï¼Œå¹¶ä¸”èƒ½å°†è®¡ç®—ç»“æœèµ‹äºˆanswerå˜é‡ï¼Œå°±åƒçœŸæ­£çš„Pythonä»£ç ä¸€æ ·ã€‚
é‚£ä¹ˆï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½è®©exec()å‡½æ•°æ‰§è¡Œä¸€ä¸ªå¤æ‚çš„Pythonä»£ç å‘¢ï¼ŸWhy not?è¯·çœ‹ä¸€ä¸‹ä¾‹å­ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">func</span> <span class="o">=</span> <span class="s2">&#34;def fact(n):</span><span class="se">\n\t</span><span class="s2">return 1 if n==1 else n*fact(n-1)&#34;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">exec</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">fact</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="mi">120</span>
</code></pre></td></tr></table>
</div>
</div><p>å¯èƒ½æœ‰äº›è¯»è€…çº³äº†é—·äº†ï¼Œè¿™äº›ä»£ç ä¸æ˜¯ç›´æ¥èƒ½å¤Ÿåœ¨Pythonä¸­æ‰§è¡Œå—ï¼Œä¸ºä½•è¿˜è¦å¤šæ­¤ä¸€ä¸¾åœ°æŠŠå®ƒå†™æˆå­—ç¬¦ä¸²ï¼Œå¹¶ç”¨exec()æ‰§è¡Œå‘¢ï¼Ÿç¬”è€…çš„ç­”æ¡ˆæ˜¯ï¼Œåˆšæ‰çš„ä¾‹å­åªæ˜¯ä¸ºäº†æ¼”ç¤ºexec()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•ï¼Œå®ƒçš„å¼ºå¤§ä¹‹å¤„è¿œä¸æ­¢äºæ­¤ã€‚
åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬æœ‰äº›æ—¶å€™ä¼šå°†Pythonä»£ç å†™å…¥ä¸€äº›æ–‡ä»¶ä¸­ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå¦‚ä»¥ä¸‹çš„eg.txt,å®ƒå‚¨å­˜äº†æˆ‘ä»¬æƒ³è¦çš„Pythonä»£ç ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">fact</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">n</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">n</span><span class="o">*</span><span class="n">fact</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="n">fact</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>è¯·å†æ¬¡æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªtxtæ ¼å¼çš„Pythonä»£ç ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•è°ƒç”¨å®ƒå‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯exec()å‡½æ•°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;E://eg.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">exec</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="mi">720</span>
</code></pre></td></tr></table>
</div>
</div><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å…ˆè¯»å–eg.txtæ–‡ä»¶çš„å†…å®¹ï¼Œå†è½¬äº¤exec()å‡½æ•°æ‰§è¡Œã€‚</p>
<p>æ˜¯ä¸æ˜¯æœ‰ç‚¹æ£’å‘¢ï¼Ÿé™¤äº†èƒ½æ‰§è¡Œstringå’Œcode objectå¤–ï¼Œè¿˜å¯ä»¥åœ¨exec()å‡½æ•°ä¸­åŠ å…¥å‚æ•°,å‚æ•°çš„ä¼ é€’å¯ä»¥å†™æˆå­—å…¸(dict)å½¢å¼ã€‚å…·ä½“çš„ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚è€ƒä¸‹é¢çš„ä¾‹å­ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">expr</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;
</span><span class="s2">        z = 30
</span><span class="s2">        sum = x + y + z
</span><span class="s2">        print(sum)
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
        <span class="n">y</span> <span class="o">=</span> <span class="mi">20</span>
        <span class="k">exec</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
        <span class="k">exec</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
        <span class="k">exec</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
    <span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">func</span><span class="p">()</span>
<span class="mi">60</span>
<span class="mi">33</span>
<span class="mi">34</span>
</code></pre></td></tr></table>
</div>
</div><p>åœ¨exprè¯­å¥ä¸­ï¼Œæœ‰ä¸‰ä¸ªå˜é‡x,y,z,å…¶ä¸­zå€¼å·²ç»™å®šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨exec()å‡½æ•°å¤–æŒ‡å®šx,yçš„å€¼ï¼Œä¹Ÿå¯ä»¥åœ¨exec()å‡½æ•°ä¸­ä»¥å­—å…¸çš„å½¢å¼æŒ‡å®šx,yçš„å€¼ã€‚åœ¨æœ€åçš„è¯­å¥ä¸­ï¼Œæˆ‘ä»¬ç»™å‡ºäº†x,y,zçš„å€¼ï¼Œå¹¶ä¸”yå€¼é‡å¤ï¼Œexec()å‡½æ•°æ¥æ”¶åé¢ä¸€ä¸ªyå€¼ï¼Œä¸”zå€¼ä¼ é€’ä¸èµ·ä½œç”¨ï¼Œå› æ­¤è¾“å‡ºç»“æœä¸º34ã€‚</p>
<p><code>exec()</code>å‡½æ•°çš„æ ‡å‡†æ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">exec</span><span class="p">(</span><span class="nb">object</span><span class="p">[,</span> <span class="nb">globals</span><span class="p">[,</span> <span class="nb">locals</span><span class="p">]])</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>è¿™ä¸ªå‡½æ•°æ”¯æŒåŠ¨æ€æ‰§è¡Œ Python ä»£ç ã€‚object å¿…é¡»æ˜¯å­—ç¬¦ä¸²æˆ–è€…ä»£ç å¯¹è±¡ã€‚å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆè¯¥å­—ç¬¦ä¸²å°†è¢«è§£æä¸ºä¸€ç³»åˆ— Python è¯­å¥å¹¶æ‰§è¡Œï¼ˆé™¤éå‘ç”Ÿè¯­æ³•é”™è¯¯ï¼‰ã€‚1 å¦‚æœæ˜¯ä»£ç å¯¹è±¡ï¼Œå®ƒå°†è¢«ç›´æ¥æ‰§è¡Œã€‚åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œè¢«æ‰§è¡Œçš„ä»£ç éƒ½éœ€è¦å’Œæ–‡ä»¶è¾“å…¥ä¸€æ ·æ˜¯æœ‰æ•ˆçš„ï¼ˆè§å‚è€ƒæ‰‹å†Œä¸­å…³äºæ–‡ä»¶è¾“å…¥çš„ç« èŠ‚ï¼‰ã€‚è¯·æ³¨æ„å³ä½¿åœ¨ä¼ é€’ç»™ exec() å‡½æ•°çš„ä»£ç çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œreturn å’Œ yield è¯­å¥ä¹Ÿä¸èƒ½åœ¨å‡½æ•°å®šä¹‰ä¹‹å¤–ä½¿ç”¨ã€‚è¯¥å‡½æ•°è¿”å›å€¼æ˜¯ None ã€‚</p>
</blockquote>
<p>execå’Œevaléƒ½å¯ä»¥æ‰§è¡Œsingle modeçš„ä»£ç ï¼›execåªæ˜¯è®¡ç®—è¡¨è¾¾å¼ï¼Œæœ¬èº«è¿”å›ä¸ºNoneï¼Œå› æ­¤ä½¿ç”¨execè®¡ç®—è¡¨è¾¾å¼è™½ç„¶å¯ä»¥è®¡ç®—å‡ºç»“æœï¼Œä½†æ˜¯è¿”å›å€¼ä¸ºNoneã€‚è€Œevalåªèƒ½æ‰§è¡Œå•ä¸ªçš„è¡¨è¾¾å¼ï¼Œè¿”å›è¡¨è¾¾å¼çš„ç»“æœã€‚</p>
]]></content><category scheme="https://raycoder.me/categories/python/" term="Python" label="Python"/><category scheme="https://raycoder.me/categories/python%E5%85%B3%E9%94%AE%E5%AD%97/" term="Pythonå…³é”®å­—" label="Pythonå…³é”®å­—"/><category scheme="https://raycoder.me/categories/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" term="Pythonå­¦ä¹ ç¬”è®°" label="Pythonå­¦ä¹ ç¬”è®°"/><category scheme="https://raycoder.me/tags/%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0/" term="å†…ç½®å‡½æ•°" label="å†…ç½®å‡½æ•°"/><category scheme="https://raycoder.me/tags/python/" term="Python" label="Python"/><category scheme="https://raycoder.me/tags/python%E8%BF%9B%E9%98%B6/" term="Pythonè¿›é˜¶" label="Pythonè¿›é˜¶"/><category scheme="https://raycoder.me/tags/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" term="Pythonå­¦ä¹ ç¬”è®°" label="Pythonå­¦ä¹ ç¬”è®°"/></entry><entry><title type="text">Pythonå­¦ä¹ ç¬”è®°ä¹‹eval()å‡½æ•°ç®€æ</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/python-eval/"/><id>https://raycoder.me/p/python-eval/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-03-05T20:20:53+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html"><![CDATA[ä¸€ä¸ªæœ€åŸºæœ¬çš„eval()å‡½æ•°çš„æ ¼å¼åº”è¯¥å¦‚ä¸‹ï¼š 1 2 3 &gt;&gt;&gt; command = &#39;print(\&#39;Hello world!\&#39;)&#39; &gt;&gt;&gt; eval(command) Hello world! æ²¡é”™ï¼Œevalå‡½æ•°æ˜¯ä¸€ä¸ªå¯ä»¥è®©å­—ç¬¦ä¸²è½¬æ¢ä¸ºè¡¨è¾¾å¼çš„å†…ç½®å‡½æ•°ï¼ˆæ³¨æ„eval()ä¸æ”¯æŒä»»ä½•å½¢å¼çš„èµ‹å€¼æ“ä½œï¼Œè€Œä¸èƒ½æ˜¯å¤æ‚çš„ä»£ç é€»è¾‘ï¼‰ã€‚ evâ€¦â€¦]]></summary><content type="html"><![CDATA[<p>ä¸€ä¸ªæœ€åŸºæœ¬çš„<code>eval()</code>å‡½æ•°çš„æ ¼å¼åº”è¯¥å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">command</span> <span class="o">=</span> <span class="s1">&#39;print(</span><span class="se">\&#39;</span><span class="s1">Hello world!</span><span class="se">\&#39;</span><span class="s1">)&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">eval</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
<span class="n">Hello</span> <span class="n">world</span><span class="err">!</span>
</code></pre></td></tr></table>
</div>
</div><p>æ²¡é”™ï¼Œevalå‡½æ•°æ˜¯ä¸€ä¸ªå¯ä»¥è®©å­—ç¬¦ä¸²è½¬æ¢ä¸ºè¡¨è¾¾å¼çš„å†…ç½®å‡½æ•°ï¼ˆæ³¨æ„<code>eval()</code>ä¸æ”¯æŒä»»ä½•å½¢å¼çš„èµ‹å€¼æ“ä½œï¼Œè€Œä¸èƒ½æ˜¯å¤æ‚çš„ä»£ç é€»è¾‘ï¼‰ã€‚
<code>eval()</code>å‡½æ•°ä¸ä»…å¯ä»¥æ‰§è¡Œä»£ç ï¼Œè¿˜å¯ä»¥ä½œå¦‚ä¸‹æ“ä½œï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;[1, 2, 3]&#39;</span><span class="p">)</span> <span class="c1">#å­—ç¬¦ä¸²è½¬åˆ—è¡¨</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;(1, 2, 3)&#39;</span><span class="p">)</span> <span class="c1">#å­—ç¬¦ä¸²è½¬å…ƒç»„</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;{&#34;one&#34;: 1, &#34;two&#34;: 2, &#34;three&#34;: 3}&#39;</span><span class="p">)</span> <span class="c1">#å­—ç¬¦ä¸²è½¬å­—å…¸</span>
<span class="p">{</span><span class="s1">&#39;one&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;0o187&#39;</span><span class="p">)</span>
<span class="mi">0</span><span class="n">o187</span>
</code></pre></td></tr></table>
</div>
</div><p><code>eval()</code>å‡½æ•°çš„å®Œæ•´æ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="nb">eval</span><span class="p">(</span><span class="n">expression</span><span class="p">[,</span> <span class="nb">globals</span><span class="p">[,</span> <span class="nb">locals</span><span class="p">]])</span>
</code></pre></td></tr></table>
</div>
</div><p><code>expression</code>: è¡¨è¾¾å¼ã€‚
<code>globals</code>:  å˜é‡ä½œç”¨åŸŸï¼Œå…¨å±€å‘½åç©ºé—´ï¼Œå¦‚æœè¢«æä¾›ï¼Œåˆ™å¿…é¡»æ˜¯ä¸€ä¸ªå­—å…¸å¯¹è±¡ã€‚
<code>locals</code>:  å˜é‡ä½œç”¨åŸŸï¼Œå±€éƒ¨å‘½åç©ºé—´ï¼Œå¦‚æœè¢«æä¾›ï¼Œå¯ä»¥æ˜¯ä»»ä½•æ˜ å°„å¯¹è±¡ã€‚</p>
<p>å½“åä¸¤ä¸ªå‚æ•°éƒ½ä¸ºç©ºæ—¶ï¼Œå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯ä¸€ä¸ªstringç±»å‹çš„ç®—æœ¯è¡¨è¾¾å¼ï¼Œè®¡ç®—å‡ºç»“æœå³å¯ã€‚ç­‰ä»·äºeval(expression)ã€‚
å½“localså‚æ•°ä¸ºç©ºï¼Œglobalså‚æ•°ä¸ä¸ºç©ºæ—¶ï¼Œå…ˆæŸ¥æ‰¾globalså‚æ•°ä¸­æ˜¯å¦å­˜åœ¨å˜é‡ï¼Œå¹¶è®¡ç®—ã€‚
å½“ä¸¤ä¸ªå‚æ•°éƒ½ä¸ä¸ºç©ºæ—¶ï¼Œå…ˆæŸ¥æ‰¾localså‚æ•°ï¼Œå†æŸ¥æ‰¾globalså‚æ•°ã€‚
<del>æ— è‰¯</del>å¼•ç”¨ä¸€æ®µPythonå®˜æ–¹çš„æ–‡æ¡£ï¼š</p>
<blockquote>
<p>eval(expression[, globals[, locals]])
å®å‚æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»¥åŠå¯é€‰çš„ globals å’Œ localsã€‚globals å®å‚å¿…é¡»æ˜¯ä¸€ä¸ªå­—å…¸ã€‚locals å¯ä»¥æ˜¯ä»»ä½•æ˜ å°„å¯¹è±¡ã€‚
expression å‚æ•°ä¼šä½œä¸ºä¸€ä¸ª Python è¡¨è¾¾å¼ï¼ˆä»æŠ€æœ¯ä¸Šè¯´æ˜¯ä¸€ä¸ªæ¡ä»¶åˆ—è¡¨ï¼‰è¢«è§£æå¹¶æ±‚å€¼ï¼Œå¹¶ä½¿ç”¨globals å’Œ locals å­—å…¸ä½œä¸ºå…¨å±€å’Œå±€éƒ¨å‘½åç©ºé—´ã€‚ å¦‚æœ globals å­—å…¸å­˜åœ¨ä¸”ä¸åŒ…å«ä»¥ <code>__builtins__ </code>ä¸ºé”®çš„å€¼ï¼Œåˆ™ä¼šåœ¨è§£æ expression ä¹‹å‰æ’å…¥ä»¥æ­¤ä¸ºé”®çš„å¯¹å†…ç½®æ¨¡å— <a href="https://docs.python.org/zh-cn/3/library/builtins.html#module-builtins">builtins</a> çš„å¼•ç”¨ã€‚ è¿™æ„å‘³ç€ expression é€šå¸¸å…·æœ‰å¯¹æ ‡å‡† <a href="https://docs.python.org/zh-cn/3/library/builtins.html#module-builtins">builtins</a> æ¨¡å—çš„å®Œå…¨è®¿é—®æƒé™ä¸”å—é™çš„ç¯å¢ƒä¼šè¢«ä¼ æ’­ã€‚ å¦‚æœçœç•¥ locals å­—å…¸åˆ™å…¶é»˜è®¤å€¼ä¸º globals å­—å…¸ã€‚ å¦‚æœä¸¤ä¸ªå­—å…¸åŒæ—¶çœç•¥ï¼Œåˆ™è¡¨è¾¾å¼æ‰§è¡Œæ—¶ä¼šä½¿ç”¨ eval() è¢«è°ƒç”¨çš„ç¯å¢ƒä¸­çš„ globals å’Œ localsã€‚ è¯·æ³¨æ„ï¼Œeval() å¹¶æ²¡æœ‰å¯¹å¤–å›´ç¯å¢ƒä¸‹çš„ (éå±€éƒ¨)<a href="https://docs.python.org/zh-cn/3/glossary.html#term-nested-scope">åµŒå¥—ä½œç”¨åŸŸ</a> çš„è®¿é—®æƒé™ã€‚
è¿”å›å€¼å°±æ˜¯è¡¨è¾¾å¼çš„æ±‚å€¼ç»“æœã€‚ è¯­æ³•é”™è¯¯å°†ä½œä¸ºå¼‚å¸¸è¢«æŠ¥å‘Šã€‚ ä¾‹å¦‚ï¼š
&gt;&gt;&gt; x = 1
&gt;&gt;&gt; eval('x+1')
2
è¿™ä¸ªå‡½æ•°ä¹Ÿå¯ä»¥ç”¨æ¥æ‰§è¡Œä»»ä½•ä»£ç å¯¹è±¡ï¼ˆå¦‚<a href="https://docs.python.org/zh-cn/3/library/functions.html#compile">compile()</a>åˆ›å»ºçš„ï¼‰ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå‚æ•°æ˜¯ä»£ç å¯¹è±¡ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²ã€‚å¦‚æœç¼–è¯‘è¯¥å¯¹è±¡æ—¶çš„ mode å®å‚æ˜¯<code>'exec'</code> é‚£ä¹ˆ eval() è¿”å›å€¼ä¸º <code>None </code>
æç¤ºï¼š exec() å‡½æ•°æ”¯æŒåŠ¨æ€æ‰§è¡Œè¯­å¥ã€‚ <a href="https://docs.python.org/zh-cn/3/library/functions.html#globals">globals()</a> å’Œ <a href="https://docs.python.org/zh-cn/3/library/functions.html#locals">locals()</a> å‡½æ•°å„è‡ªè¿”å›å½“å‰çš„å…¨å±€å’Œæœ¬åœ°å­—å…¸ï¼Œå› æ­¤æ‚¨å¯ä»¥å°†å®ƒä»¬ä¼ é€’ç»™ eval() æˆ– <a href="https://docs.python.org/zh-cn/3/library/functions.html#exec">exec()</a> æ¥ä½¿ç”¨ã€‚</p>
</blockquote>
<hr>
<p>å®æˆ˜ï¼š</p>
<h3 id="ä¼ é€’å…¨å±€å˜é‡">ä¼ é€’å…¨å±€å˜é‡</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s2">&#34;{&#39;name&#39;:&#39;linux&#39;,&#39;age&#39;:age}&#34;</span><span class="p">,{</span><span class="s2">&#34;age&#34;</span><span class="p">:</span><span class="mi">1822</span><span class="p">}))</span>
<span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;linux&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">1822</span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="ä¼ é€’æœ¬åœ°å˜é‡">ä¼ é€’æœ¬åœ°å˜é‡</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">age</span><span class="o">=</span><span class="mi">18</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s2">&#34;{&#39;name&#39;:&#39;linux&#39;,&#39;age&#39;:age}&#34;</span><span class="p">,{</span><span class="s2">&#34;age&#34;</span><span class="p">:</span><span class="mi">1822</span><span class="p">},</span><span class="nb">locals</span><span class="p">()))</span>
<span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;linux&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">18</span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="ä¼ é€’å‚æ•°å…¶å®å¯ä»¥å¦‚ä¸‹å®ç°ä¼ª">ä¼ é€’å‚æ•°å…¶å®å¯ä»¥å¦‚ä¸‹å®ç°ï¼ˆä¼ªï¼‰</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;print&#39;</span><span class="p">)(</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>
<span class="mi">123</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="ä¸å¯è¿›è¡Œä»»ä½•å½¢å¼çš„èµ‹å€¼">ä¸å¯è¿›è¡Œä»»ä½•å½¢å¼çš„èµ‹å€¼</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;a=1&#39;</span><span class="p">)</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&#34;&lt;pyshell#0&gt;&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;a=1&#39;</span><span class="p">)</span>
  <span class="n">File</span> <span class="s2">&#34;&lt;string&gt;&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="n">a</span><span class="o">=</span><span class="mi">1</span>
     <span class="o">^</span>
<span class="ne">SyntaxError</span><span class="p">:</span> <span class="n">invalid</span> <span class="n">syntax</span>
</code></pre></td></tr></table>
</div>
</div>]]></content><category scheme="https://raycoder.me/categories/python/" term="Python" label="Python"/><category scheme="https://raycoder.me/categories/python%E5%85%B3%E9%94%AE%E5%AD%97/" term="Pythonå…³é”®å­—" label="Pythonå…³é”®å­—"/><category scheme="https://raycoder.me/categories/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" term="Pythonå­¦ä¹ ç¬”è®°" label="Pythonå­¦ä¹ ç¬”è®°"/><category scheme="https://raycoder.me/tags/python/" term="Python" label="Python"/><category scheme="https://raycoder.me/tags/python%E8%BF%9B%E9%98%B6/" term="Pythonè¿›é˜¶" label="Pythonè¿›é˜¶"/><category scheme="https://raycoder.me/tags/%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0/" term="å†…ç½®å‡½æ•°" label="å†…ç½®å‡½æ•°"/><category scheme="https://raycoder.me/tags/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" term="Pythonå­¦ä¹ ç¬”è®°" label="Pythonå­¦ä¹ ç¬”è®°"/></entry><entry><title type="text">ä»é›¶å¼€å§‹å†™ä¸€ä¸ªéŸ³ä¹çˆ¬è™«-4ï¼šQQéŸ³ä¹</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/qqmusic-spider-artlist/"/><id>https://raycoder.me/p/qqmusic-spider-artlist/</id><updated>2020-04-09T17:41:16+08:00</updated><published>2020-03-05T10:43:15+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">åˆ’äº†è¿™ä¹ˆå¤šå¤©æ°´ï¼Œæˆ‘ç»ˆäºå›æ¥äº†â€¦â€¦ æ¯•ç«Ÿåšä¸»ä¹Ÿæ˜¯è¦ä¸Šè¯¾çš„,QwQã€‚ æœ€è¿‘ç»ˆäºæŠ½å‡ºä¸€äº›æ—¶é—´äº†ï¼Œç ”ç©¶ç ”ç©¶QQéŸ³ä¹çš„çˆ¬è™«ã€‚ æˆ‘ä»¬éšä¾¿æ‰“å¼€ä¸€ä¸ªæ­Œå•(https://y.qq.com/n/yqq/playlist/68â€¦â€¦</summary><content type="html"><![CDATA[<p>åˆ’äº†è¿™ä¹ˆå¤šå¤©æ°´ï¼Œæˆ‘ç»ˆäºå›æ¥äº†â€¦â€¦
<img src="https://raycoder.me/post-images/1583376357108.jpg" alt="">
æ¯•ç«Ÿåšä¸»ä¹Ÿæ˜¯è¦ä¸Šè¯¾çš„,QwQã€‚
æœ€è¿‘ç»ˆäºæŠ½å‡ºä¸€äº›æ—¶é—´äº†ï¼Œç ”ç©¶ç ”ç©¶QQéŸ³ä¹çš„çˆ¬è™«ã€‚
æˆ‘ä»¬éšä¾¿æ‰“å¼€ä¸€ä¸ªæ­Œå•(<a href="https://y.qq.com/n/yqq/playlist/6809716883.html">https://y.qq.com/n/yqq/playlist/6809716883.html</a>)ï¼Œç™»å½•è‡ªå·±çš„QQï¼š
<img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200316130255.png" alt="https://y.qq.com/n/yqq/playlist/6809716883.html" title="https://y.qq.com/n/yqq/playlist/6809716883.html">
ï¼ŸQQéŸ³ä¹ç«Ÿç„¶è¿˜å¯¹ç½‘é¡µç«¯åšé™åˆ¶ï¼<img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200316130506.png" alt="">
æ ¹æ®æˆ‘å¤šå¹´çš„å‰(æ‘¸)ç«¯(çˆ¬)å¼€(æ»š)å‘(æ‰“)ç»éªŒï¼Œè¿™ç§ç½‘ç«™ä¸€å®šæ˜¯é€šè¿‡<code>JS</code>åšé™åˆ¶ï¼Œå¹¶ä¸”åœ¨æµè§ˆå™¨çš„<code>Network</code>ä¸­ä¸€å®šä¼šæœ‰ç›¸å…³çš„æ•°æ®ã€‚
æˆ‘ä»¬å…ˆæ‰“å¼€ä¸€ä¸ªéŸ³ä¹é“¾æ¥(<a href="https://y.qq.com/n/yqq/song/004WKx9W0E7skj.html">https://y.qq.com/n/yqq/song/004WKx9W0E7skj.html</a> ==&gt; æ’­æ”¾)ï¼š
<img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200316130739.png" alt="">
å‘ç°æ‰€æœ‰çš„éŸ³ä¹æœ€åéƒ½æŒ‡å‘<a href="https://y.qq.com/portal/player.html">https://y.qq.com/portal/player.html</a>è¿™ä¸ªç½‘å€ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åšå¦‚ä¸‹åˆ¤æ–­ï¼šè¿™ä¸ªä¸œè¥¿æ˜¯é€šè¿‡ä¼ <code>Cookie</code>æ¥æ’­æ”¾éŸ³ä¹çš„ï¼Œæ‰€ä»¥å®ƒçš„<code>Network</code>ä¸­ç»å¯¹ä¼šæœ‰ç›¸åº”çš„<code>éŸ³ä¹æ–‡ä»¶</code>    ã€‚
æœä¸å…¶ç„¶ï¼Œé‡Œè¾¹æœ‰ä¸€ä¸ªå¦‚ä¸‹çš„é“¾æ¥ï¼š
<code>https://isure.stream.qqmusic.qq.com/C400003jblv923cckE.m4a?guid=2092345306&amp;vkey=0C2C0214E13FDAA60DF4560C8CAFB591C5C8D31854F25B79A59E07FE292AFF133E2B053C4A96C190ACA1582BD0476710ECCF87F6826D15A2&amp;uin=4354&amp;fromtag=66</code>
ç»è¿‡è§‚å¯Ÿï¼Œå‘ç°å®ƒçš„æ ¼å¼å¦‚ä¸‹ï¼š
<code>https://isure.stream.qqmusic.qq.com/C400&lt;MID&gt;.m4a?guid=&lt;GUID&gt;&amp;vkey=&lt;VKEY&gt;&amp;uin=4354&amp;fromtag=66</code>ï¼Œ<code>uin</code>å’Œ<code>fromtag</code>æ˜¯ä¸å˜çš„ã€‚
æ‰€ä»¥æˆ‘ä»¬å†è¿”å›æ­Œå•é¡µï¼Œæ‰“å¼€æ§åˆ¶å°ï¼Œæ‰¾åˆ°äº†å¦‚ä¸‹æ–‡ä»¶ï¼š
<img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200316130803.png" alt="">
å¥½çš„ï¼Œæˆ‘ä»¬é€šè¿‡è§‚å¯Ÿï¼Œå‘ç°è¿™æ˜¯ä¸€ä¸ªæ ¼å¼ç±»ä¼¼äºå¦‚ä¸‹çš„æ–‡ä»¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span><span class="err">&#39;accessed_favbase&#39;:</span> <span class="err">1,</span>
 <span class="err">&#39;accessed_plaza_cache&#39;:</span> <span class="err">0,</span>
 <span class="err">&#39;cdlist&#39;:</span> <span class="err">[{&#39;album_pic_mid&#39;:</span> <span class="err">&#39;&#39;,</span>
             <span class="err">&#39;buynum&#39;:</span> <span class="err">0,</span>
             <span class="err">&#39;cmtnum&#39;:</span> <span class="err">0,</span>
             <span class="err">&#39;coveradurl&#39;:</span> <span class="err">&#39;&#39;,</span>
             <span class="err">&#39;ctime&#39;:</span> <span class="err">1552789122,</span>
             <span class="err">&#39;cur_song_num&#39;:</span> <span class="err">70,</span>
             <span class="err">&#39;desc&#39;:</span> <span class="err">&#39;YouTuberé˜¿ç¥èƒŒæ™¯éŸ³ä¹ï¼ŒBobä»¬å¿«æ¥å¬å¬å§ï¼é˜¿ç¥åŠ æ²¹ï¼Œæˆ‘ä»¬ä¼šæ°¸è¿œæ”¯æŒä½ çš„ï¼&#39;,</span>
             <span class="err">&#39;dir_pic_url2&#39;:</span> <span class="err">&#39;&#39;,</span>
             <span class="err">&#39;dir_show&#39;:</span> <span class="err">1,</span>
             <span class="err">&#39;dirid&#39;:</span> <span class="err">2,</span>
             <span class="err">&#39;dissid&#39;:</span> <span class="err">6809716,</span>
             <span class="err">&#39;dissname&#39;:</span> <span class="err">&#39;é˜¿ç¥å¸¸ç”¨BGM&#39;,</span>
             <span class="err">&#39;disstid&#39;:</span> <span class="err">&#39;6809716883&#39;,</span>
             <span class="err">&#39;disstype&#39;:</span> <span class="err">0,</span>
             <span class="err">&#39;encrypt_uin&#39;:</span> <span class="err">&#39;oK6kowEAoK4z7eSiNevzoivlov**&#39;,</span>
             <span class="err">&#39;headurl&#39;:</span> <span class="err">&#39;http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK1iaxx2AdrAQDGlibrNZicyaYspzibEWTeCIHOGHPpMOau3MFofE1e5oJwEGHTrBUzrLegbPYiaNOicPaQ/132&#39;,</span>
             <span class="err">&#39;ifpicurl&#39;:</span> <span class="err">&#39;&#39;,</span>
             <span class="err">&#39;isAd&#39;:</span> <span class="err">0,</span>
             <span class="err">&#39;isdj&#39;:</span> <span class="err">0,</span>
             <span class="err">&#39;isvip&#39;:</span> <span class="err">0,</span>
             <span class="err">&#39;login&#39;:</span> <span class="err">&#39;oK-57KEA7w4ion**&#39;,</span>
             <span class="err">&#39;logo&#39;:</span> <span class="err">&#39;http://qpic.y.qq.com/music_cover/huYTu7R6ZfqKlvicEsOAPc5D6PTtzz0caVENpSkmJnF4IbCCI7iaWqnz7SQXcf474k/300?n=1&#39;,</span>
             <span class="err">&#39;mtime&#39;:</span> <span class="err">0,</span>
             <span class="err">&#39;nick&#39;:</span> <span class="err">&#39;Max&#39;,</span>
             <span class="err">&#39;nickname&#39;:</span> <span class="err">&#39;Max&#39;,</span>
             <span class="err">&#39;owndir&#39;:</span> <span class="err">0,</span>
             <span class="err">&#39;pic_dpi&#39;:</span> <span class="err">300,</span>
             <span class="err">&#39;pic_mid&#39;:</span> <span class="err">&#39;&#39;,</span>
             <span class="err">&#39;scoreavage&#39;:</span> <span class="err">&#39;0.0&#39;,</span>
             <span class="err">&#39;scoreusercount&#39;:</span> <span class="err">0,</span>
             <span class="err">&#39;singerid&#39;:</span> <span class="err">0,</span>
             <span class="err">&#39;singermid&#39;:</span> <span class="err">&#39;&#39;,</span>
             <span class="err">&#39;song_begin&#39;:</span> <span class="err">0,</span>
             <span class="err">&#39;song_update_num&#39;:</span> <span class="err">0,</span>
             <span class="err">&#39;song_update_time&#39;:</span> <span class="err">0,</span>
             <span class="err">&#39;songids&#39;:</span> <span class="err">&#39;108412441,108412318,236593788,212656442,204897711,203546728,101688454,201272163,215240933,201272176,105055346,125803989,201287859,4998977,220183309,1875424,200448238,107600922,202985843,201272151,102994348,4941179,200980117,102179620,108412364,1144219,108920995,4799526,200316483,125586926,108547678,214531352,214483351,108412363,225361408,201272168,201272164,213407792,215240934,108031940,109296153,102215437,203021286,104769082,201272157,200980118,213407791,201272160,200980114,201272153,200980111,201438505,201272165,109996034,202916713,202617948,109296152,201422059,200604508,203836723,9072513,201255271,201287877,102222132,105389125,108412359,215360418,109225063,102206145,219032454&#39;,</span>
             <span class="err">&#39;songlist&#39;:</span> <span class="err">[{&#39;action&#39;:</span> <span class="err">{&#39;alert&#39;:</span> <span class="err">2,</span>
                                      <span class="err">&#39;icons&#39;:</span> <span class="err">8535932,</span>
                                      <span class="err">&#39;msgid&#39;:</span> <span class="err">14,</span>
                                      <span class="err">&#39;msgpay&#39;:</span> <span class="err">6,</span>
                                      <span class="err">&#39;switch&#39;:</span> <span class="err">17409795</span><span class="p">}</span><span class="err">,</span>
                           <span class="err">&#39;album&#39;:</span> <span class="p">{</span><span class="err">&#39;id&#39;:</span> <span class="err">1594129,</span>
                                     <span class="err">&#39;mid&#39;:</span> <span class="err">&#39;001j2IHy2CkIaz&#39;,</span>
                                     <span class="err">&#39;name&#39;:</span> <span class="err">&#39;UNDERTALE</span> <span class="err">Soundtrack&#39;,</span>
                                     <span class="err">&#39;pmid&#39;:</span> <span class="err">&#39;001j2IHy2CkIaz_2&#39;,</span>
                                     <span class="err">&#39;subtitle&#39;:</span> <span class="err">&#39;&#39;,</span>
                                     <span class="err">&#39;title&#39;:</span> <span class="err">&#39;UNDERTALE</span> <span class="err">Soundtrack&#39;</span><span class="p">}</span><span class="err">,</span>
                           <span class="err">&#39;file&#39;:</span> <span class="p">{</span><span class="err">&#39;b_30s&#39;:</span> <span class="err">0,</span>
                                    <span class="err">&#39;e_30s&#39;:</span> <span class="err">0,</span>
                                    <span class="err">&#39;media_mid&#39;:</span> <span class="err">&#39;003jblv923cckE&#39;,</span>
                                    <span class="err">&#39;size_128&#39;:</span> <span class="err">724989,</span>
                                    <span class="err">&#39;size_128mp3&#39;:</span> <span class="err">724989,</span>
                                    <span class="err">&#39;size_192aac&#39;:</span> <span class="err">1046138,</span>
                                    <span class="err">&#39;size_192ogg&#39;:</span> <span class="err">807221,</span>
                                    <span class="err">&#39;size_24aac&#39;:</span> <span class="err">0,</span>
                                    <span class="err">&#39;size_320&#39;:</span> <span class="err">1812101,</span>
                                    <span class="err">&#39;size_320mp3&#39;:</span> <span class="err">1812101,</span>
                                    <span class="err">&#39;size_48aac&#39;:</span> <span class="err">264852,</span>
                                    <span class="err">&#39;size_96aac&#39;:</span> <span class="err">523498,</span>
                                    <span class="err">&#39;size_aac&#39;:</span> <span class="err">264852,</span>
                                    <span class="err">&#39;size_ape&#39;:</span> <span class="err">0,</span>
                                    <span class="err">&#39;size_dts&#39;:</span> <span class="err">0,</span>
                                    <span class="err">&#39;size_flac&#39;:</span> <span class="err">2120013,</span>
                                    <span class="err">&#39;size_ogg&#39;:</span> <span class="err">807221,</span>
                                    <span class="err">&#39;size_try&#39;:</span> <span class="err">0,</span>
                                    <span class="err">&#39;try_begin&#39;:</span> <span class="err">0,</span>
                                    <span class="err">&#39;try_end&#39;:</span> <span class="err">0</span><span class="p">}</span><span class="err">,</span>
                           <span class="err">&#39;fnote&#39;:</span> <span class="mi">4009</span><span class="err">,</span>
                           <span class="err">&#39;genre&#39;:</span> <span class="mi">37</span><span class="err">,</span>
                           <span class="err">&#39;id&#39;:</span> <span class="mi">108412441</span><span class="err">,</span>
                           <span class="err">&#39;index_album&#39;:</span> <span class="mi">44</span><span class="err">,</span>
                           <span class="err">&#39;index_cd&#39;:</span> <span class="mi">0</span><span class="err">,</span>
                           <span class="err">&#39;interval&#39;:</span> <span class="mi">45</span><span class="err">,</span>
                           <span class="err">&#39;isonly&#39;:</span> <span class="mi">0</span><span class="err">,</span>
                           <span class="err">&#39;ksong&#39;:</span> <span class="p">{</span><span class="err">&#39;id&#39;:</span> <span class="err">0,</span> <span class="err">&#39;mid&#39;:</span> <span class="err">&#39;&#39;</span><span class="p">}</span><span class="err">,</span>
                           <span class="err">&#39;language&#39;:</span> <span class="mi">9</span><span class="err">,</span>
                           <span class="err">&#39;mid&#39;:</span> <span class="err">&#39;</span><span class="mi">004</span><span class="err">WKx</span><span class="mi">9</span><span class="err">W</span><span class="mf">0E7</span><span class="err">skj&#39;,</span>
                           <span class="err">&#39;mv&#39;:</span> <span class="p">{</span><span class="err">&#39;id&#39;:</span> <span class="err">0,</span> <span class="err">&#39;vid&#39;:</span> <span class="err">&#39;&#39;</span><span class="p">}</span><span class="err">,</span>
                           <span class="err">&#39;name&#39;:</span> <span class="err">&#39;Tem</span> <span class="err">Shop&#39;,</span>
                           <span class="err">&#39;ov&#39;:</span> <span class="mi">0</span><span class="err">,</span>
                           <span class="err">&#39;pay&#39;:</span> <span class="p">{</span><span class="err">&#39;pay_down&#39;:</span> <span class="err">1,</span>
                                   <span class="err">&#39;pay_month&#39;:</span> <span class="err">1,</span>
                                   <span class="err">&#39;pay_play&#39;:</span> <span class="err">0,</span>
                                   <span class="err">&#39;pay_status&#39;:</span> <span class="err">0,</span>
                                   <span class="err">&#39;price_album&#39;:</span> <span class="err">0,</span>
                                   <span class="err">&#39;price_track&#39;:</span> <span class="err">200,</span>
                                   <span class="err">&#39;time_free&#39;:</span> <span class="err">0</span><span class="p">}</span><span class="err">,</span>
                           <span class="err">&#39;sa&#39;:</span> <span class="mi">16</span><span class="err">,</span>
                           <span class="err">&#39;singer&#39;:</span> <span class="p">[{</span><span class="err">&#39;id&#39;:</span> <span class="err">1204192,</span>
                                       <span class="err">&#39;mid&#39;:</span> <span class="err">&#39;0045aGTp3XRXLD&#39;,</span>
                                       <span class="err">&#39;name&#39;:</span> <span class="err">&#39;Toby</span> <span class="err">Fox&#39;,</span>
                                       <span class="err">&#39;title&#39;:</span> <span class="err">&#39;Toby</span> <span class="err">Fox&#39;</span><span class="p">}]</span><span class="err">,</span>
                           <span class="err">&#39;songtype&#39;:</span> <span class="mi">13</span><span class="err">,</span>
                           <span class="err">&#39;status&#39;:</span> <span class="mi">0</span><span class="err">,</span>
                           <span class="err">&#39;subtitle&#39;:</span> <span class="err">&#39;&#39;,</span>
                           <span class="err">&#39;tid&#39;:</span> <span class="mi">0</span><span class="err">,</span>
                           <span class="err">&#39;time_public&#39;:</span> <span class="err">&#39;</span><span class="mi">2015-09-15</span><span class="err">&#39;,</span>
                           <span class="err">&#39;title&#39;:</span> <span class="err">&#39;Tem</span> <span class="err">Shop&#39;,</span>
                           <span class="err">&#39;type&#39;:</span> <span class="mi">0</span><span class="err">,</span>
                           <span class="err">&#39;url&#39;:</span> <span class="err">&#39;&#39;,</span>
                           <span class="err">&#39;volume&#39;:</span> <span class="p">{</span><span class="err">&#39;gain&#39;:</span> <span class="err">0.0,</span> <span class="err">&#39;lra&#39;:</span> <span class="err">0.0,</span> <span class="err">&#39;peak&#39;:</span> <span class="err">0.0</span><span class="p">}</span><span class="err">},</span>
             <span class="err">&#39;songnum&#39;:</span> <span class="mi">70</span><span class="err">,</span>
             <span class="err">&#39;songtypes&#39;:</span> <span class="err">&#39;</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">,</span><span class="mi">13</span><span class="err">&#39;,</span>
             <span class="err">&#39;tags&#39;:</span> <span class="p">[{</span><span class="err">&#39;id&#39;:</span> <span class="err">199,</span> <span class="err">&#39;name&#39;:</span> <span class="err">&#39;èƒŒæ™¯éŸ³ä¹&#39;,</span> <span class="err">&#39;pid&#39;:</span> <span class="err">199</span><span class="p">},</span>
                      <span class="p">{</span><span class="err">&#39;id&#39;:</span> <span class="err">117,</span> <span class="err">&#39;name&#39;:</span> <span class="err">&#39;å¿«ä¹&#39;,</span> <span class="err">&#39;pid&#39;:</span> <span class="err">117</span><span class="p">},</span>
                      <span class="p">{</span><span class="err">&#39;id&#39;:</span> <span class="err">116,</span> <span class="err">&#39;name&#39;:</span> <span class="err">&#39;æ²»æ„ˆ&#39;,</span> <span class="err">&#39;pid&#39;:</span> <span class="err">116</span><span class="p">}]</span><span class="err">,</span>
             <span class="err">&#39;total_song_num&#39;:</span> <span class="mi">70</span><span class="err">,</span>
             <span class="err">&#39;type&#39;:</span> <span class="mi">0</span><span class="err">,</span>
             <span class="err">&#39;uin&#39;:</span> <span class="err">&#39;oK</span><span class="mi">6</span><span class="err">kowEAoK</span><span class="mi">4</span><span class="err">z</span><span class="mi">7</span><span class="err">eSiNevzoivlov**&#39;,</span>
             <span class="err">&#39;visitnum&#39;:</span> <span class="mi">170366</span><span class="err">}],</span>
 <span class="err">&#39;cdnum&#39;:</span> <span class="mi">1</span><span class="err">,</span>
 <span class="err">&#39;code&#39;:</span> <span class="mi">0</span><span class="err">,</span>
 <span class="err">&#39;login&#39;:</span> <span class="err">&#39;oK</span><span class="mi">-57</span><span class="err">KEA</span><span class="mi">7</span><span class="err">w</span><span class="mi">4</span><span class="err">ion**&#39;,</span>
 <span class="err">&#39;realcdnum&#39;:</span> <span class="mi">1</span><span class="err">,</span>
 <span class="err">&#39;subcode&#39;:</span> <span class="mi">0</span><span class="err">}</span>
</code></pre></td></tr></table>
</div>
</div><p>å¾ˆå®¹æ˜“çœ‹å‡ºï¼Œé‡Œé¢æœ‰æˆ‘ä»¬æ‰€éœ€çš„<code>&lt;MID&gt;</code>ã€‚ä½†æ˜¯<code>&lt;VKEY&gt;</code>å¹¶æ²¡æœ‰å‡ºç°ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¿…é¡»æ¢ä¸€ç§æ€è·¯äº†ã€‚
æŸ¥æ‰¾äº†ç½‘ç»œä¸Šçš„èµ„æ–™ï¼Œå‘ç°æœ‰ä¸€ä¸ªéŸ³ä¹ä¿¡æ¯å¤–é“¾ï¼š
<code>https://u.y.qq.com/cgi-bin/musicu.fcg?format=json&amp;data=%7B%22req_0%22%3A%7B%22module%22%3A%22vkey.GetVkeyServer%22%2C%22method%22%3A%22CgiGetVkey%22%2C%22param%22%3A%7B%22guid%22%3A%22358840384%22%2C%22songmid%22%3A%5B%22&lt;MID&gt;%22%5D%2C%22songtype%22%3A%5B0%5D%2C%22uin%22%3A%221443481947%22%2C%22loginflag%22%3A1%2C%22platform%22%3A%2220%22%7D%7D%2C%22comm%22%3A%7B%22uin%22%3A%2218585073516%22%2C%22format%22%3A%22json%22%2C%22ct%22%3A24%2C%22cv%22%3A0%7D%7D</code>
è¿™ä¸ªæ˜¯ç»è¿‡<code>URLç¼–ç </code>çš„ï¼Œè§£å¯†åç»“æœå¦‚ä¸‹ï¼š
<code>https://u.y.qq.com/cgi-bin/musicu.fcg?format=json&amp;data={&quot;req_0&quot;:{&quot;module&quot;:&quot;vkey.GetVkeyServer&quot;,&quot;method&quot;:&quot;CgiGetVkey&quot;,&quot;param&quot;:{&quot;guid&quot;:&quot;358840384&quot;,&quot;songmid&quot;:[&quot;&lt;MID&gt;&quot;],&quot;songtype&quot;:[0],&quot;uin&quot;:&quot;1443481947&quot;,&quot;loginflag&quot;:1,&quot;platform&quot;:&quot;20&quot;}},&quot;comm&quot;:{&quot;uin&quot;:&quot;18585073516&quot;,&quot;format&quot;:&quot;json&quot;,&quot;ct&quot;:24,&quot;cv&quot;:0}}</code>
å¥½çš„ï¼Œçœ‹æ¥æˆ‘ä»¬åªéœ€è¦è¿™ä¸ª<code>&lt;MID&gt;</code>å³å¯ã€‚
æˆ‘ä»¬åœ¨ä¸Šé¢çš„æ­¥éª¤å·²ç»è·å¾—äº†<code>&lt;MID&gt;</code>ï¼ŒæŠŠå®ƒæ”¾è¿›é‚£ä¸ªURLï¼Œä¼šæ‰¾åˆ°ä¸€ä¸ªæ•°æ®æ–‡ä»¶ã€‚å¦‚ä¸‹(é“¾æ¥ï¼š<a href="https://u.y.qq.com/cgi-bin/musicu.fcg?format=json&amp;data=%7B%22req_0%22%3A%7B%22module%22%3A%22vkey.GetVkeyServer%22%2C%22method%22%3A%22CgiGetVkey%22%2C%22param%22%3A%7B%22guid%22%3A%22358840384%22%2C%22songmid%22%3A%5B%22004WKx9W0E7skj%22%5D%2C%22songtype%22%3A%5B0%5D%2C%22uin%22%3A%221443481947%22%2C%22loginflag%22%3A1%2C%22platform%22%3A%2220%22%7D%7D%2C%22comm%22%3A%7B%22uin%22%3A%2218585073516%22%2C%22format%22%3A%22json%22%2C%22ct%22%3A24%2C%22cv%22%3A0%7D%7D">https://u.y.qq.com/cgi-bin/musicu.fcg?format=json&amp;data=%7B%22req_0%22%3A%7B%22module%22%3A%22vkey.GetVkeyServer%22%2C%22method%22%3A%22CgiGetVkey%22%2C%22param%22%3A%7B%22guid%22%3A%22358840384%22%2C%22songmid%22%3A%5B%22004WKx9W0E7skj%22%5D%2C%22songtype%22%3A%5B0%5D%2C%22uin%22%3A%221443481947%22%2C%22loginflag%22%3A1%2C%22platform%22%3A%2220%22%7D%7D%2C%22comm%22%3A%7B%22uin%22%3A%2218585073516%22%2C%22format%22%3A%22json%22%2C%22ct%22%3A24%2C%22cv%22%3A0%7D%7D</a>)ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span><span class="nt">&#34;code&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&#34;ts&#34;</span><span class="p">:</span><span class="mi">1583379252481</span><span class="p">,</span><span class="nt">&#34;req_0&#34;</span><span class="p">:{</span><span class="nt">&#34;code&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&#34;data&#34;</span><span class="p">:{</span> <span class="nt">&#34;expiration&#34;</span><span class="p">:</span> <span class="mi">80400</span><span class="p">,</span> <span class="nt">&#34;login_key&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="nt">&#34;midurlinfo&#34;</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nt">&#34;common_downfromtag&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nt">&#34;errtype&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="nt">&#34;filename&#34;</span><span class="p">:</span> <span class="s2">&#34;C400003jblv923cckE.m4a&#34;</span><span class="p">,</span> <span class="nt">&#34;flowfromtag&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="nt">&#34;flowurl&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="nt">&#34;hisbuy&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nt">&#34;hisdown&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nt">&#34;isbuy&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nt">&#34;isonly&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nt">&#34;onecan&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nt">&#34;opi128kurl&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="nt">&#34;opi192koggurl&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="nt">&#34;opi192kurl&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="nt">&#34;opi30surl&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="nt">&#34;opi48kurl&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="nt">&#34;opi96kurl&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="nt">&#34;opiflackurl&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="nt">&#34;p2pfromtag&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nt">&#34;pdl&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nt">&#34;pneed&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nt">&#34;pneedbuy&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nt">&#34;premain&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nt">&#34;purl&#34;</span><span class="p">:</span> <span class="s2">&#34;C400003jblv923cckE.m4a?guid=358840384&amp;vkey=9B9B50B3B25F0A5B339075E830EDE2E10FDC429A412FD272C65C2C0BA96846C98CF95F046C4B6E76BB16191F791104AB1B949E0C5168C3D0&amp;uin=0&amp;fromtag=66&#34;</span><span class="p">,</span> <span class="nt">&#34;qmdlfromtag&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nt">&#34;result&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nt">&#34;songmid&#34;</span><span class="p">:</span> <span class="s2">&#34;004WKx9W0E7skj&#34;</span><span class="p">,</span> <span class="nt">&#34;tips&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="nt">&#34;uiAlert&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nt">&#34;vip_downfromtag&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nt">&#34;vkey&#34;</span><span class="p">:</span> <span class="s2">&#34;9B9B50B3B25F0A5B339075E830EDE2E10FDC429A412FD272C65C2C0BA96846C98CF95F046C4B6E76BB16191F791104AB1B949E0C5168C3D0&#34;</span><span class="p">,</span> <span class="nt">&#34;wififromtag&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="nt">&#34;wifiurl&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span> <span class="p">}</span> <span class="p">],</span> <span class="nt">&#34;msg&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;IP&gt;&#34;</span><span class="p">,</span> <span class="nt">&#34;retcode&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nt">&#34;servercheck&#34;</span><span class="p">:</span> <span class="s2">&#34;0502f67d8cf451662c4b46417d571295&#34;</span><span class="p">,</span> <span class="nt">&#34;sip&#34;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&#34;http:\/\/ws.stream.qqmusic.qq.com\/&#34;</span><span class="p">,</span> <span class="s2">&#34;http:\/\/isure.stream.qqmusic.qq.com\/&#34;</span> <span class="p">],</span> <span class="nt">&#34;testfile2g&#34;</span><span class="p">:</span> <span class="s2">&#34;C400003mAan70zUy5O.m4a?guid=358840384&amp;vkey=62F3CE198C73F66E7207E03BFB4F4C29BC086BF77E55DDC7C81ECEB156B8736E26F5B8360E5C63E0B6ADAB89779732648AF943136A70DC05&amp;uin=&amp;fromtag=3&#34;</span><span class="p">,</span> <span class="nt">&#34;testfilewifi&#34;</span><span class="p">:</span> <span class="s2">&#34;C400003mAan70zUy5O.m4a?guid=358840384&amp;vkey=62F3CE198C73F66E7207E03BFB4F4C29BC086BF77E55DDC7C81ECEB156B8736E26F5B8360E5C63E0B6ADAB89779732648AF943136A70DC05&amp;uin=&amp;fromtag=3&#34;</span><span class="p">,</span> <span class="nt">&#34;thirdip&#34;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="s2">&#34;&#34;</span> <span class="p">],</span> <span class="nt">&#34;uin&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="nt">&#34;verify_type&#34;</span><span class="p">:</span> <span class="mi">0</span> <span class="p">}}}</span>
</code></pre></td></tr></table>
</div>
</div><p>å†æŠŠ<code>purl</code>ä»£å…¥å¤–é“¾<code>https://isure.stream.qqmusic.qq.com</code>(<code>http://ws.stream.qqmusic.qq.com</code>ä¹Ÿå¯ä»¥)ï¼Œå¾—åˆ°å¦‚ä¸‹é“¾æ¥ï¼š
<code>https://isure.stream.qqmusic.qq.com/C400003jblv923cckE.m4a?guid=358840384&amp;vkey=9B9B50B3B25F0A5B339075E830EDE2E10FDC429A412FD272C65C2C0BA96846C98CF95F046C4B6E76BB16191F791104AB1B949E0C5168C3D0&amp;uin=0&amp;fromtag=66</code>
æ‰“å¼€ï¼Œä¾¿æ˜¯æˆ‘ä»¬æƒ³è¦çš„éŸ³ä¹æ–‡ä»¶äº†ã€‚ä¸‹è½½éŸ³ä¹ï¼Œè¯·å‚è€ƒæˆ‘çš„å‰ä¸¤ç¯‡æ–‡ç« ï¼š
<a href="/post/CUlLXMwcx/" class="LinkCard">ä»é›¶å¼€å§‹å†™ä¸€ä¸ªéŸ³ä¹çˆ¬è™«-2-ç½‘æ˜“äº‘éŸ³ä¹ï¼šä¸‹è½½éŸ³ä¹æ–‡ä»¶</a>
<a href="/post/lOWHTeAPC/" class="LinkCard">ä»é›¶å¼€å§‹å†™ä¸€ä¸ªéŸ³ä¹çˆ¬è™«-3-é…·ç‹—éŸ³ä¹</a>
ä»£ç ä¹‹åæ”¾ä¸Šæ¥ã€‚</p>
]]></content><category scheme="https://raycoder.me/categories/python/" term="Python" label="Python"/><category scheme="https://raycoder.me/categories/%E7%88%AC%E8%99%AB/" term="çˆ¬è™«" label="çˆ¬è™«"/><category scheme="https://raycoder.me/tags/python/" term="Python" label="Python"/><category scheme="https://raycoder.me/tags/%E7%88%AC%E8%99%AB/" term="çˆ¬è™«" label="çˆ¬è™«"/><category scheme="https://raycoder.me/tags/qq%E9%9F%B3%E4%B9%90/" term="QQéŸ³ä¹" label="QQéŸ³ä¹"/><category scheme="https://raycoder.me/tags/%E7%A6%8F%E5%88%A9/" term="ç¦åˆ©" label="ç¦åˆ©"/><category scheme="https://raycoder.me/tags/%E7%A0%B4%E8%A7%A3/" term="ç ´è§£" label="ç ´è§£"/><category scheme="https://raycoder.me/tags/%E9%9F%B3%E4%B9%90/" term="éŸ³ä¹" label="éŸ³ä¹"/><category scheme="https://raycoder.me/tags/%E4%BC%9A%E5%91%98/" term="ä¼šå‘˜" label="ä¼šå‘˜"/><category scheme="https://raycoder.me/tags/python%E8%BF%9B%E9%98%B6/" term="Pythonè¿›é˜¶" label="Pythonè¿›é˜¶"/></entry><entry><title type="text">ä»é›¶å¼€å§‹å†™ä¸€ä¸ªéŸ³ä¹çˆ¬è™«-2ï¼šä¸‹è½½éŸ³ä¹æ–‡ä»¶</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/music-spider-downloader/"/><id>https://raycoder.me/p/music-spider-downloader/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-02-25T08:27:44+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘å†™äº†çˆ¬å–ç½‘æ˜“äº‘éŸ³ä¹æ­Œå•ä¸­éŸ³ä¹IDåŠä¸‹è½½é“¾æ¥çš„æ•™ç¨‹ï¼Œè¿™ä¸€æœŸæˆ‘ä»¬å°±åº”è¯¥æŠŠæ–‡ä»¶ä¸‹è½½ä¸‹æ¥äº†ã€‚ ä¸‹è½½æ–‡ä»¶ï¼Œæˆ‘ä»¬é€šè¿‡Python3çš„urllibæ¨¡å—å¯ä»¥å¾ˆè½»æ¾åœ°å®ç°ã€‚ æ–°å»ºä¸€ä¸ªdownload.pyæ–‡ä»¶ã€‚â€¦â€¦</summary><content type="html"><![CDATA[<p><strong>ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘å†™äº†çˆ¬å–ç½‘æ˜“äº‘éŸ³ä¹æ­Œå•ä¸­éŸ³ä¹IDåŠä¸‹è½½é“¾æ¥çš„æ•™ç¨‹ï¼Œè¿™ä¸€æœŸæˆ‘ä»¬å°±åº”è¯¥æŠŠæ–‡ä»¶ä¸‹è½½ä¸‹æ¥äº†ã€‚</strong></p>
<p>ä¸‹è½½æ–‡ä»¶ï¼Œæˆ‘ä»¬é€šè¿‡Python3çš„<code>urllib</code>æ¨¡å—å¯ä»¥å¾ˆè½»æ¾åœ°å®ç°ã€‚
æ–°å»ºä¸€ä¸ª<code>download.py</code>æ–‡ä»¶ã€‚</p>
<p>ä¸‹è½½éŸ³ä¹ä¸»è¦çš„ä»£ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"> <span class="c1">#!/usr/bin/env python</span>
<span class="c1">#-*- coding:utf8 -*-</span>
<span class="s1">&#39;&#39;&#39;
</span><span class="s1">@Author  :   Ray
</span><span class="s1">@Contact :   ray@raycoder.me
</span><span class="s1">@Software:   PyCharm
</span><span class="s1">@File    :   download.py
</span><span class="s1">@Time    :   2019/11/4 21:19
</span><span class="s1">&#39;&#39;&#39;</span>
<span class="kn">import</span> <span class="nn">urllib</span><span class="o">,</span> <span class="nn">time</span><span class="o">,</span> <span class="nn">os</span>

<span class="k">def</span> <span class="nf">downloadMusic</span><span class="p">(</span><span class="n">music_dictionary</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span> <span class="c1">#ä¸‹è½½éŸ³ä¹</span>
    <span class="n">exist</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">exist</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">complete</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">failed</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">music_dictionary</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;æ­£åœ¨ä¸‹è½½ï¼š&#39;</span> <span class="o">+</span> <span class="n">i</span><span class="p">)</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="nb">str</span><span class="o">.</span><span class="n">maketrans</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">/*?:&#34;|&lt;&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;         &#39;</span><span class="p">)</span>
            <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="n">music_dictionary</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">path</span> <span class="o">+</span> <span class="n">i</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">trans</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.mp3&#39;</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;ä¸‹è½½å®Œæˆï¼&#39;</span><span class="p">)</span>
            <span class="n">complete</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;ä¸‹è½½å¤±è´¥ï¼š&#39;</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="sa">u</span><span class="s1">&#39;å¤±è´¥åŸå› ï¼š&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
            <span class="n">failed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">complete</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&#34;ä¸‹è½½æˆåŠŸï¼š&#34;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">complete</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">complete</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.</span><span class="se">\t</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">i</span><span class="p">)</span>
        <span class="k">print</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&#34;æ— ä¸‹è½½æˆåŠŸ&#34;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">failed</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&#34;ä¸‹è½½å¤±è´¥ï¼š&#34;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">failed</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">failed</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.</span><span class="se">\t</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">i</span><span class="p">)</span>
        <span class="k">print</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&#34;æ— ä¸‹è½½å¤±è´¥&#34;</span><span class="p">)</span>

</code></pre></td></tr></table>
</div>
</div><p>æµ‹è¯•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">CloudMusicSpider</span>
<span class="k">def</span> <span class="nf">_test</span><span class="p">():</span>
    <span class="n">spider</span> <span class="o">=</span> <span class="n">CloudMusicSpider</span><span class="p">()</span>
    <span class="n">downloadMusic</span><span class="p">(</span><span class="n">spider</span><span class="o">.</span><span class="n">getArtUrl</span><span class="p">(</span><span class="s1">&#39;https://music.163.com/#/playlist?id=4874770876&#39;</span><span class="p">))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">_test</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><p>ç»“æœï¼š</p>
<pre><code>æ­£åœ¨ä¸‹è½½ï¼šPrelude
ä¸‹è½½å®Œæˆï¼
æ­£åœ¨ä¸‹è½½ï¼šMarble Soda [Explicit]
ä¸‹è½½å®Œæˆï¼
æ­£åœ¨ä¸‹è½½ï¼šSnowdin Town
ä¸‹è½½å®Œæˆï¼
æ­£åœ¨ä¸‹è½½ï¼šMonkeys Spinning Monkeys
ä¸‹è½½å®Œæˆï¼
æ­£åœ¨ä¸‹è½½ï¼šOverworld Theme (GFM Trap Remix)
ä¸‹è½½å®Œæˆï¼
æ­£åœ¨ä¸‹è½½ï¼šPizza
ä¸‹è½½å®Œæˆï¼
æ­£åœ¨ä¸‹è½½ï¼šKing Dedede
ä¸‹è½½å®Œæˆï¼
æ­£åœ¨ä¸‹è½½ï¼šUndertale
ä¸‹è½½å®Œæˆï¼
æ­£åœ¨ä¸‹è½½ï¼šsans.
ä¸‹è½½å®Œæˆï¼
æ­£åœ¨ä¸‹è½½ï¼šTem Shop
ä¸‹è½½å®Œæˆï¼
æ­£åœ¨ä¸‹è½½ï¼šUndertale - Snowdin Town (****** Bootleg)
ä¸‹è½½å¤±è´¥ï¼šUndertale - Snowdin Town (****** Bootleg)	å¤±è´¥åŸå› ï¼š[Errno 22] Invalid argument: 'Undertale - Snowdin Town (****** Bootleg).mp3'
æ­£åœ¨ä¸‹è½½ï¼šIt's Not Like I Like You!!(Instrumental)
ä¸‹è½½å®Œæˆï¼
æ­£åœ¨ä¸‹è½½ï¼šä¼¼é¡”çµµåºƒå ´ (ä¼¼é¡”çµµãƒãƒ£ãƒ³ãƒãƒ«)
ä¸‹è½½å®Œæˆï¼
æ­£åœ¨ä¸‹è½½ï¼šã‚¹ãƒ†ãƒ¼ã‚¸ï¼šã‚³ãƒŸã‚«ãƒ« (ã‚µãƒ³ãƒ‰ã‚­ãƒ£ãƒ‹ã‚ªãƒ³)
ä¸‹è½½å®Œæˆï¼
æ­£åœ¨ä¸‹è½½ï¼šI Love You
ä¸‹è½½å®Œæˆï¼
æ­£åœ¨ä¸‹è½½ï¼šIce Cream
ä¸‹è½½å®Œæˆï¼
æ­£åœ¨ä¸‹è½½ï¼šDying
ä¸‹è½½å®Œæˆï¼
ä¸‹è½½æˆåŠŸï¼š
1.	Prelude
2.	Marble Soda [Explicit]
3.	Snowdin Town
4.	Monkeys Spinning Monkeys
5.	Overworld Theme (GFM Trap Remix)
6.	Pizza
7.	King Dedede
8.	Undertale
9.	sans.
10.	Tem Shop
11.	It's Not Like I Like You!!(Instrumental)
12.	ä¼¼é¡”çµµåºƒå ´ (ä¼¼é¡”çµµãƒãƒ£ãƒ³ãƒãƒ«)
13.	ã‚¹ãƒ†ãƒ¼ã‚¸ï¼šã‚³ãƒŸã‚«ãƒ« (ã‚µãƒ³ãƒ‰ã‚­ãƒ£ãƒ‹ã‚ªãƒ³)
14.	I Love You
15.	Ice Cream
16.	Dying

ä¸‹è½½å¤±è´¥ï¼š
1.	Undertale - Snowdin Town (****** Bootleg)
</code></pre><p>ä¹‹åå°±å¯ä»¥åœ¨ä¿å­˜æºæ–‡ä»¶çš„ç›®å½•ä¸‹<code>downloads</code>æ–‡ä»¶å¤¹çœ‹åˆ°éŸ³ä¹æ–‡ä»¶äº†ã€‚</p>
<p>æƒ³è¦ä¸‹è½½æ­Œè¯çš„åªéœ€ä¿®æ”¹<code>getArtUrl()</code>å‡½æ•°å³å¯ï¼Œå¤–é“¾ä¸º<code>http://music.163.com/api/song/lyric?id=éŸ³ä¹ID&amp;lv=1&amp;kv=1&amp;tv=-1</code>ã€‚</p>
<p>P.Sï¼šä¸Šé¢é‚£ä¸ªä¸‹è½½å¤±è´¥çš„æ˜¯å› ä¸ºæ–‡ä»¶åä¸­æœ‰<code>*</code>å·ï¼Œè€ŒWindowsæ˜¯ä¸è®©ä¿å­˜çš„ã€‚æ‰€ä»¥æˆ‘è¦ç”¨<code>str.translate()</code>æ–¹æ³•å°†è¿™äº›å­—ç¬¦æ‰¹é‡æ›¿æ¢ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/env python</span>
<span class="c1">#-*- coding:utf8 -*-</span>
<span class="s1">&#39;&#39;&#39;
</span><span class="s1">@Author  :   Ray
</span><span class="s1">@Contact :   nn_201412@qq.com
</span><span class="s1">@Software:   PyCharm
</span><span class="s1">@File    :   init.py
</span><span class="s1">@Time    :   2019/11/4 21:19
</span><span class="s1">&#39;&#39;&#39;</span>
<span class="kn">import</span> <span class="nn">requests</span><span class="o">,</span> <span class="nn">re</span><span class="o">,</span> <span class="nn">urllib</span><span class="o">,</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">fake_useragent</span> <span class="kn">import</span> <span class="n">UserAgent</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="n">exist</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s1">&#39;downloads/&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">exist</span><span class="p">:</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s1">&#39;downloads/&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">CloudmusicSpider</span><span class="p">():</span>
    <span class="n">HEADER</span> <span class="o">=</span> <span class="p">{</span>  <span class="c1"># ä¼ªé€ è¯·æ±‚å¤´ï¼Œé˜²æ­¢è¢«å°</span>
        <span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;*/*&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Accept-Encoding&#39;</span><span class="p">:</span> <span class="s1">&#39;gzip,deflate,sdch&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Accept-Language&#39;</span><span class="p">:</span> <span class="s1">&#39;zh-CN,zh;q=0.8,gl;q=0.6,zh-TW;q=0.4&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Connection&#39;</span><span class="p">:</span> <span class="s1">&#39;keep-alive&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/x-www-form-urlencoded&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Host&#39;</span><span class="p">:</span> <span class="s1">&#39;music.163.com&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Referer&#39;</span><span class="p">:</span> <span class="s1">&#39;https://music.163.com/&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="n">UserAgent</span><span class="p">()</span><span class="o">.</span><span class="n">random</span>
    <span class="p">}</span>
    <span class="k">def</span> <span class="nf">getUrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">artlist_url</span><span class="p">):</span> <span class="c1">#è·å–éŸ³ä¹çœŸå®IDçš„å‡½æ•°</span>
        <span class="n">outerUrl</span> <span class="o">=</span> <span class="s2">&#34;http://music.163.com/song/media/outer/url?id={0:s}.mp3&#34;</span> <span class="c1">#å¤–é“¾åœ°å€</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">artlist_url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;#/&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">HEADER</span><span class="p">)</span> <span class="c1">#ç½‘æ˜“äº‘éŸ³ä¹ä½¿ç”¨å¼‚æ­¥åŠ è½½ï¼Œéœ€è¦å»æ‰&#34;#/&#34;</span>
        <span class="n">songs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;a href=&#34;/song\?id=(\d+)&#34;&gt;(.*?)&lt;/a&gt;&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">):</span>
            <span class="n">songs</span><span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">outerUrl</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">songs</span>
    <span class="k">def</span> <span class="nf">downloadMusic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">music_dictionary</span><span class="p">):</span> <span class="c1">#ä¸‹è½½éŸ³ä¹</span>
        <span class="n">complete</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">failed</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">music_dictionary</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;æ­£åœ¨ä¸‹è½½ï¼š&#39;</span> <span class="o">+</span> <span class="n">i</span><span class="p">)</span>
                <span class="n">trans</span> <span class="o">=</span> <span class="nb">str</span><span class="o">.</span><span class="n">maketrans</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">/*?:&#34;|&lt;&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;         &#39;</span><span class="p">)</span> <span class="c1">#ä¸€ä¸€å¯¹åº”</span>
                <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="n">music_dictionary</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="s1">&#39;downloads/&#39;</span> <span class="o">+</span> <span class="n">i</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">trans</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.mp3&#39;</span><span class="p">)</span> <span class="c1">#å­—ç¬¦æ›¿æ¢</span>
                <span class="k">print</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;ä¸‹è½½å®Œæˆï¼&#39;</span><span class="p">)</span>
                <span class="n">complete</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;ä¸‹è½½å¤±è´¥ï¼š&#39;</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="sa">u</span><span class="s1">&#39;å¤±è´¥åŸå› ï¼š&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
                <span class="n">failed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">complete</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&#34;ä¸‹è½½æˆåŠŸï¼š&#34;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">complete</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">complete</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.</span><span class="se">\t</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">i</span><span class="p">)</span>
            <span class="k">print</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&#34;æ— ä¸‹è½½æˆåŠŸ&#34;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">failed</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&#34;ä¸‹è½½å¤±è´¥ï¼š&#34;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">failed</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">failed</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.</span><span class="se">\t</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">i</span><span class="p">)</span>
            <span class="k">print</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&#34;æ— ä¸‹è½½å¤±è´¥&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªä»£ç ä¹Ÿéœ€è¦ä¿å­˜ä¸ºæ¨¡å—ï¼Œå‘½åä¸º<code>download.py</code>ï¼Œä»¥åä½œä¸ºæ¨¡å—å¤‡ç”¨ã€‚</p>
]]></content><category scheme="https://raycoder.me/categories/python/" term="Python" label="Python"/><category scheme="https://raycoder.me/categories/%E7%88%AC%E8%99%AB/" term="çˆ¬è™«" label="çˆ¬è™«"/><category scheme="https://raycoder.me/tags/python/" term="Python" label="Python"/><category scheme="https://raycoder.me/tags/%E7%88%AC%E8%99%AB/" term="çˆ¬è™«" label="çˆ¬è™«"/><category scheme="https://raycoder.me/tags/%E7%A6%8F%E5%88%A9/" term="ç¦åˆ©" label="ç¦åˆ©"/><category scheme="https://raycoder.me/tags/%E7%BD%91%E6%98%93/" term="ç½‘æ˜“" label="ç½‘æ˜“"/><category scheme="https://raycoder.me/tags/%E7%A0%B4%E8%A7%A3/" term="ç ´è§£" label="ç ´è§£"/><category scheme="https://raycoder.me/tags/%E9%9F%B3%E4%B9%90/" term="éŸ³ä¹" label="éŸ³ä¹"/><category scheme="https://raycoder.me/tags/%E4%BC%9A%E5%91%98/" term="ä¼šå‘˜" label="ä¼šå‘˜"/><category scheme="https://raycoder.me/tags/python%E8%BF%9B%E9%98%B6/" term="Pythonè¿›é˜¶" label="Pythonè¿›é˜¶"/></entry><entry><title type="text">ä»é›¶å¼€å§‹å†™ä¸€ä¸ªéŸ³ä¹çˆ¬è™«-1-ç½‘æ˜“äº‘éŸ³ä¹ï¼šæ‰¹é‡è·å–æ­Œå•éŸ³ä¹ä¸‹è½½é“¾æ¥</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/cloudmusic-spider-artlist/"/><id>https://raycoder.me/p/cloudmusic-spider-artlist/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-02-22T15:59:37+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">æœ¬æ–‡å°†ä¼šè¯¦ç»†çš„å†™ä»é›¶å¼€å§‹åˆ¶ä½œç½‘æ˜“äº‘éŸ³ä¹çˆ¬è™«çš„è¿‡ç¨‹ï¼Œå¯ä»¥ä¸‹è½½ç½‘æ˜“äº‘éŸ³ä¹éŸ³ä¹ä»˜è´¹æ­Œæ›²ï¼Œä½¿ç”¨Python3å¼€å‘ã€‚ å£°æ˜ï¼šæœ¬æ–‡ä»å‰ç«¯å…¥æ‰‹ï¼Œå†è·å¾—æ­Œæ›²æ•°æ®ã€‚å¦‚æœæ‚¨ä¸æƒ³èµ°é‚£ä¹ˆå¤šå¼¯è·¯ï¼Œè¯·å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šhttps://â€¦â€¦</summary><content type="html"><![CDATA[<p><strong>æœ¬æ–‡å°†ä¼šè¯¦ç»†çš„å†™ä»é›¶å¼€å§‹åˆ¶ä½œç½‘æ˜“äº‘éŸ³ä¹çˆ¬è™«çš„è¿‡ç¨‹ï¼Œå¯ä»¥ä¸‹è½½ç½‘æ˜“äº‘éŸ³ä¹éŸ³ä¹ä»˜è´¹æ­Œæ›²ï¼Œä½¿ç”¨Python3å¼€å‘ã€‚</strong></p>
<blockquote>
<p><strong>å£°æ˜ï¼šæœ¬æ–‡ä»å‰ç«¯å…¥æ‰‹ï¼Œå†è·å¾—æ­Œæ›²æ•°æ®ã€‚å¦‚æœæ‚¨ä¸æƒ³èµ°é‚£ä¹ˆå¤šå¼¯è·¯ï¼Œè¯·å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š<a href="https://zhuanlan.zhihu.com/p/30246788">https://zhuanlan.zhihu.com/p/30246788</a>å’Œè¿™ç¯‡æ–‡ç« ï¼š<a href="https://www.shangyexinzhi.com/article/details/id-297404">https://www.shangyexinzhi.com/article/details/id-297404</a></strong></p>
<!-- more -->
</blockquote>
<p>æœ¬æ–‡é‡‡ç”¨ç¯å¢ƒï¼š</p>
<ul>
<li>Pycharm + Python 3.7.5</li>
</ul>
<p>æ‰€éœ€æ¨¡å—ï¼š</p>
<ol>
<li>fake-useragent</li>
<li>requests</li>
<li>re</li>
</ol>
<p>å®‰è£…æ–¹æ³•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">pip</span> <span class="n">install</span> <span class="n">beautifulsoup4</span> <span class="n">fake</span><span class="o">-</span><span class="n">useragent</span> <span class="n">requests</span>
</code></pre></td></tr></table>
</div>
</div><p>çˆ¬è™«æ€è·¯ï¼š</p>
<div class="mermaid">
graph TD;
    åˆå§‹åŒ–ç¨‹åº-->è·å–é“¾æ¥;
    è·å–é“¾æ¥-->éå†é“¾æ¥;
    éå†é“¾æ¥-->è·å–çœŸå®ä¸‹è½½é“¾æ¥;
    è·å–çœŸå®ä¸‹è½½é“¾æ¥-->ä¸‹è½½éŸ³ä¹;
</div>
<p>çœ‹èµ·æ¥å¹¶ä¸æ˜¯éå¸¸å›°éš¾ï¼Œæ˜¯å§ï¼Ÿ(^o^)/~</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200316121330.gif" alt="">
ç»è¿‡åˆ†æï¼Œå‘ç°ç½‘æ˜“äº‘æ­Œå•ä¸­çš„éŸ³ä¹æ ¼å¼å¦‚ä¸‹ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200316121355.png" alt=""></p>
<p>å¥½ã€‚æˆ‘ä»¬æ–°å»ºä¸€ä¸ª<code>CloudMusicSpider.py</code>ï¼Œå¼€å§‹ç ä»£ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/env python</span>
<span class="c1">#-*- coding:utf8 -*-</span>
<span class="kn">import</span> <span class="nn">requests</span> <span class="c1">#å¯¼å…¥æ¨¡å—</span>
<span class="kn">from</span> <span class="nn">fake_useragent</span> <span class="kn">import</span> <span class="n">UserAgent</span> <span class="c1">#å¯¼å…¥æ¨¡å—</span>

<span class="k">def</span> <span class="nf">getArtUrl</span><span class="p">(</span><span class="n">artlist_url</span><span class="p">):</span> <span class="c1">#è·å–éŸ³ä¹çœŸå®IDçš„å‡½æ•°</span>
    <span class="n">outerUrl</span> <span class="o">=</span> <span class="s2">&#34;http://music.163.com/song/media/outer/url?id={0:s}.mp3&#34;</span> <span class="c1">#å¤–é“¾åœ°å€</span>
    <span class="n">HEADER</span> <span class="o">=</span> <span class="p">{</span> <span class="c1">#ä¼ªé€ è¯·æ±‚å¤´ï¼Œé˜²æ­¢è¢«å°</span>
        <span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;*/*&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Accept-Encoding&#39;</span><span class="p">:</span> <span class="s1">&#39;gzip,deflate,sdch&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Accept-Language&#39;</span><span class="p">:</span> <span class="s1">&#39;zh-CN,zh;q=0.8,gl;q=0.6,zh-TW;q=0.4&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Connection&#39;</span><span class="p">:</span> <span class="s1">&#39;keep-alive&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/x-www-form-urlencoded&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Host&#39;</span><span class="p">:</span> <span class="s1">&#39;music.163.com&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Referer&#39;</span><span class="p">:</span> <span class="s1">&#39;https://music.163.com/search/&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="n">UserAgent</span><span class="p">()</span><span class="o">.</span><span class="n">random</span>
    <span class="p">}</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;#/&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="n">HEADER</span><span class="p">)</span> <span class="c1">#ç½‘æ˜“äº‘éŸ³ä¹ä½¿ç”¨å¼‚æ­¥åŠ è½½ï¼Œéœ€è¦å»æ‰&#34;#/&#34;</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">&#34;html.parser&#34;</span><span class="p">)</span> <span class="c1">#bs4è¯»å–</span>
    <span class="n">aList</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">)</span> <span class="c1">#è·å–å…¨éƒ¨aæ ‡ç­¾</span>
    <span class="n">Songs</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1">#æ ¼å¼ä¸º{éŸ³ä¹å: &#34;å¤–é“¾åœ°å€&#34;}çš„å­—å…¸</span>
    <span class="k">for</span> <span class="n">music</span> <span class="ow">in</span> <span class="n">aList</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">music</span><span class="o">.</span><span class="n">has_attr</span><span class="p">(</span><span class="s2">&#34;href&#34;</span><span class="p">):</span> <span class="c1">#åˆ¤æ–­æ˜¯å¦æœ‰hrefå±æ€§</span>
            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">music</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&#34;href&#34;</span><span class="p">])</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&#34;/song?id=&#34;</span><span class="p">):</span> <span class="c1">#æ˜¯ä¸æ˜¯éŸ³ä¹ID</span>
                <span class="nb">id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">music</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&#34;href&#34;</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;/song?id=&#34;</span><span class="p">,</span> <span class="s2">&#34;&#34;</span><span class="p">)</span> <span class="c1">#è·å–çœŸå®ID</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">Songs</span><span class="p">[</span><span class="n">music</span><span class="o">.</span><span class="n">text</span><span class="p">]</span> <span class="o">=</span> <span class="n">outerUrl</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="c1">#æ”¾å…¥å­—å…¸</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
    <span class="k">return</span> <span class="n">Songs</span> <span class="c1">#è¿”å›è¿™ä¸ªå­—å…¸</span>
</code></pre></td></tr></table>
</div>
</div><p>æµ‹è¯•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">print</span><span class="p">(</span><span class="n">getUrl</span><span class="p">(</span><span class="s1">&#39;https://music.163.com/#/playlist?id=4874770876&#39;</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>ç»“æœåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="p">{</span><span class="s1">&#39;Undertale&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=39227624.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;sans.&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=39224615.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Tem Shop&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=39224629.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Undertale - Snowdin Town (****** Bootleg)&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=463498197.mp3&#39;</span><span class="p">,</span> <span class="s2">&#34;It&#39;s Not Like I Like You!!(Instrumental)&#34;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=1385676402.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;ä¼¼é¡”çµµåºƒå ´ (ä¼¼é¡”çµµãƒãƒ£ãƒ³ãƒãƒ«)&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=1378269172.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;ã‚¹ãƒ†ãƒ¼ã‚¸ï¼šã‚³ãƒŸã‚«ãƒ« (ã‚µãƒ³ãƒ‰ã‚­ãƒ£ãƒ‹ã‚ªãƒ³)&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=28546263.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;I Love You&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=31460297.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Ice Cream&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=35407675.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Dying&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=506092100.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;${song.name|mark}-${listArtists(song.artists)}&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=${song.id}.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;${soil(x.name)}&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=${x.id}.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;{if x.album}{/if}&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=${x.id}.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;${x.name}&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=${x.id}.mp3&#39;</span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>ä¸ºå•¥ä¼šæœ‰<code>'${x.id}'</code>å’Œ<code>'${song.id}'</code>ï¼Ÿï¼Ÿæˆ‘ä¹Ÿä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œä½†æ˜¯åªè¦æŠŠå®ƒè¿‡æ»¤å°±è¡Œäº†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">getArtUrl</span><span class="p">(</span><span class="n">artlist_url</span><span class="p">):</span> <span class="c1">#è·å–éŸ³ä¹çœŸå®IDçš„å‡½æ•°</span>
	<span class="n">outerUrl</span> <span class="o">=</span> <span class="s2">&#34;http://music.163.com/song/media/outer/url?id={0:s}.mp3&#34;</span> <span class="c1">#å¤–é“¾åœ°å€</span>
    <span class="n">HEADER</span> <span class="o">=</span> <span class="p">{</span> <span class="c1">#ä¼ªé€ è¯·æ±‚å¤´ï¼Œé˜²æ­¢è¢«å°</span>
        <span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;*/*&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Accept-Encoding&#39;</span><span class="p">:</span> <span class="s1">&#39;gzip,deflate,sdch&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Accept-Language&#39;</span><span class="p">:</span> <span class="s1">&#39;zh-CN,zh;q=0.8,gl;q=0.6,zh-TW;q=0.4&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Connection&#39;</span><span class="p">:</span> <span class="s1">&#39;keep-alive&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/x-www-form-urlencoded&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Host&#39;</span><span class="p">:</span> <span class="s1">&#39;music.163.com&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Referer&#39;</span><span class="p">:</span> <span class="s1">&#39;https://music.163.com/search/&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="n">UserAgent</span><span class="p">()</span><span class="o">.</span><span class="n">random</span>
    <span class="p">}</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;#/&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="n">HEADER</span><span class="p">)</span> <span class="c1">#ç½‘æ˜“äº‘éŸ³ä¹ä½¿ç”¨å¼‚æ­¥iframeåŠ è½½ï¼Œéœ€è¦å»æ‰&#34;#/&#34;</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">&#34;html.parser&#34;</span><span class="p">)</span> <span class="c1">#bs4è¯»å–</span>
    <span class="n">aList</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">)</span> <span class="c1">#è·å–å…¨éƒ¨aæ ‡ç­¾</span>
    <span class="n">Songs</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1">#æ ¼å¼ä¸º{éŸ³ä¹å: &#34;å¤–é“¾åœ°å€&#34;}çš„å­—å…¸</span>
    <span class="k">for</span> <span class="n">music</span> <span class="ow">in</span> <span class="n">aList</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">music</span><span class="o">.</span><span class="n">has_attr</span><span class="p">(</span><span class="s2">&#34;href&#34;</span><span class="p">):</span> <span class="c1">#åˆ¤æ–­æ˜¯å¦æœ‰hrefå±æ€§</span>
            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">music</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&#34;href&#34;</span><span class="p">])</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&#34;/song?id=&#34;</span><span class="p">):</span> <span class="c1">#æ˜¯ä¸æ˜¯éŸ³ä¹ID</span>
                <span class="nb">id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">music</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&#34;href&#34;</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;/song?id=&#34;</span><span class="p">,</span> <span class="s2">&#34;&#34;</span><span class="p">)</span> <span class="c1">#è·å–çœŸå®ID</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;${x.id}&#39;</span> <span class="ow">in</span> <span class="nb">id</span> <span class="ow">and</span> <span class="ow">not</span> <span class="s1">&#39;${song.id}&#39;</span> <span class="ow">in</span> <span class="nb">id</span><span class="p">:</span> <span class="c1">#è¿‡æ»¤</span>
                        <span class="n">Songs</span><span class="p">[</span><span class="n">music</span><span class="o">.</span><span class="n">text</span><span class="p">]</span> <span class="o">=</span> <span class="n">outerUrl</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="c1">#æ”¾å…¥å­—å…¸</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
    <span class="k">return</span> <span class="n">Songs</span> <span class="c1">#è¿”å›è¿™ä¸ªå­—å…¸</span>
</code></pre></td></tr></table>
</div>
</div><p>ç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="p">{</span><span class="s1">&#39;Undertale&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=39227624.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;sans.&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=39224615.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Tem Shop&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=39224629.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Undertale - Snowdin Town (****** Bootleg)&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=463498197.mp3&#39;</span><span class="p">,</span> <span class="s2">&#34;It&#39;s Not Like I Like You!!(Instrumental)&#34;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=1385676402.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;ä¼¼é¡”çµµåºƒå ´ (ä¼¼é¡”çµµãƒãƒ£ãƒ³ãƒãƒ«)&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=1378269172.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;ã‚¹ãƒ†ãƒ¼ã‚¸ï¼šã‚³ãƒŸã‚«ãƒ« (ã‚µãƒ³ãƒ‰ã‚­ãƒ£ãƒ‹ã‚ªãƒ³)&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=28546263.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;I Love You&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=31460297.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Ice Cream&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=35407675.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Dying&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=506092100.mp3&#39;</span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™å°±å¾ˆå¥½äº†ã€‚ä¸è¿‡è¿™ç§æ–¹å¼æ€»è§‰å¾—ä¸æ˜¯å¾ˆå¦¥ã€‚æ¯•ç«Ÿè¿™ä¸ªé—®é¢˜æˆ‘ä»¬ä¸çŸ¥é“è¿˜ä¼šæœ‰å¤šå°‘ä¸ªç±»ä¼¼é”™è¯¯ã€‚äºæ˜¯æˆ‘è¦ç¥­å‡ºæˆ‘çš„æ­£åˆ™è¡¨è¾¾å¼å¤§æ³•äº†ï¼ï¼ˆçœ‹æ¥BeautifulSoupä¹Ÿä¸éœ€è¦äº†ï¼‰</p>
<p>å¯¼å…¥æ¨¡å—ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">requests</span><span class="o">,</span> <span class="nn">re</span> <span class="c1">#å¯¼å…¥æ¨¡å—</span>
<span class="kn">from</span> <span class="nn">fake_useragent</span> <span class="kn">import</span> <span class="n">UserAgent</span> <span class="c1">#å¯¼å…¥æ¨¡å—</span>
</code></pre></td></tr></table>
</div>
</div><p>æ­£åˆ™è¡¨è¾¾å¼ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&#34;/song\?id=(\d+)&#34;</span><span class="o">&gt;</span><span class="p">(</span><span class="o">.*</span><span class="err">?</span><span class="p">)</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p><code>\?</code>ï¼šé—®å·è¦è½¬ä¹‰ï¼Œä¸ç„¶ä¼šè¢«è®¤ä¸ºæ˜¯åŒ¹é…æ“ä½œç¬¦ã€‚</p>
<p><code>(\d+)</code>ï¼šå¤šä¸ªæ•°å­—å½¢æˆçš„å­ç»„ã€‚</p>
<p><code>(.*?)</code>ï¼šåŒ¹é…ä»»ä½•æ–‡å­—ï¼ˆæ­Œæ›²åç§°ï¼‰ã€‚</p>
<p>è¿™æ ·ï¼ŒåŒ¹é…ä¸€ä¸ªï¼Œå®ƒå°±ä¼šè¿”å›ä¸€ä¸ªæ ¼å¼ä¸º<code>(æ­Œæ›²ID, æ­Œæ›²åç§°)</code>çš„å…ƒç»„ã€‚</p>
<p>äºæ˜¯æˆ‘ä»¬æœ€ç»ˆçš„ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/env python</span>
<span class="c1">#-*- coding:utf8 -*-</span>
<span class="s1">&#39;&#39;&#39;
</span><span class="s1">@Author  :   Ray
</span><span class="s1">@Contact :   ray@raycoder.me
</span><span class="s1">@Software:   PyCharm
</span><span class="s1">@File    :   init.py
</span><span class="s1">@Time    :   2020/2/23 21:19
</span><span class="s1">&#39;&#39;&#39;</span>
<span class="kn">import</span> <span class="nn">requests</span><span class="o">,</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">fake_useragent</span> <span class="kn">import</span> <span class="n">UserAgent</span>

<span class="k">def</span> <span class="nf">getArtUrl</span><span class="p">(</span><span class="n">artlist_url</span><span class="p">):</span> <span class="c1">#è·å–éŸ³ä¹çœŸå®IDçš„å‡½æ•°</span>
    <span class="n">outerUrl</span> <span class="o">=</span> <span class="s2">&#34;http://music.163.com/song/media/outer/url?id={0:s}.mp3&#34;</span> <span class="c1">#å¤–é“¾åœ°å€</span>
    <span class="n">HEADER</span> <span class="o">=</span> <span class="p">{</span> <span class="c1">#ä¼ªé€ è¯·æ±‚å¤´ï¼Œé˜²æ­¢è¢«å°</span>
        <span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;*/*&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Accept-Encoding&#39;</span><span class="p">:</span> <span class="s1">&#39;gzip,deflate,sdch&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Accept-Language&#39;</span><span class="p">:</span> <span class="s1">&#39;zh-CN,zh;q=0.8,gl;q=0.6,zh-TW;q=0.4&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Connection&#39;</span><span class="p">:</span> <span class="s1">&#39;keep-alive&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/x-www-form-urlencoded&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Host&#39;</span><span class="p">:</span> <span class="s1">&#39;music.163.com&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Referer&#39;</span><span class="p">:</span> <span class="s1">&#39;https://music.163.com/search/&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="n">UserAgent</span><span class="p">()</span><span class="o">.</span><span class="n">random</span>
    <span class="p">}</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;#/&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="n">HEADER</span><span class="p">)</span> <span class="c1">#ç½‘æ˜“äº‘éŸ³ä¹ä½¿ç”¨å¼‚æ­¥iframeåŠ è½½ï¼Œéœ€è¦å»æ‰&#34;#/&#34;</span>
    <span class="n">songs</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1">#å«æœ‰éŸ³ä¹IDåŠåç§°çš„å­—å…¸</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;a href=&#34;/song\?id=(\d+)&#34;&gt;(.*?)&lt;/a&gt;&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">):</span><span class="c1">#éå†åŒ¹é…çš„å¯¹è±¡</span>
        <span class="n">songs</span><span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">outerUrl</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1">#å­˜å…¥å­—å…¸</span>
    <span class="k">return</span> <span class="n">songs</span>
</code></pre></td></tr></table>
</div>
</div><p>æµ‹è¯•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">print</span><span class="p">(</span><span class="n">getUrl</span><span class="p">(</span><span class="s1">&#39;https://music.163.com/#/playlist?id=4874770876&#39;</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿”å›å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="p">{</span><span class="s1">&#39;Prelude&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=441612739.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Marble Soda [Explicit]&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=400876011.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Snowdin Town&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=39227596.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Monkeys Spinning Monkeys&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=403711640.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Overworld Theme (GFM Trap Remix)&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=467590509.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Pizza&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=1302090422.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;King Dedede&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=27518579.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Undertale&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=39227624.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;sans.&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=39224615.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Tem Shop&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=39224629.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Undertale - Snowdin Town (****** Bootleg)&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=463498197.mp3&#39;</span><span class="p">,</span> <span class="s2">&#34;It&#39;s Not Like I Like You!!(Instrumental)&#34;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=1385676402.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;ä¼¼é¡”çµµåºƒå ´ (ä¼¼é¡”çµµãƒãƒ£ãƒ³ãƒãƒ«)&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=1378269172.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;ã‚¹ãƒ†ãƒ¼ã‚¸ï¼šã‚³ãƒŸã‚«ãƒ« (ã‚µãƒ³ãƒ‰ã‚­ãƒ£ãƒ‹ã‚ªãƒ³)&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=28546263.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;I Love You&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=31460297.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Ice Cream&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=35407675.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Dying&#39;</span><span class="p">:</span> <span class="s1">&#39;http://music.163.com/song/media/outer/url?id=506092100.mp3&#39;</span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>æœ€å¥½å°†å…¶åšæˆä¸€ä¸ª<code>class</code>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/env python</span>
<span class="c1">#-*- coding:utf8 -*-</span>
<span class="s1">&#39;&#39;&#39;
</span><span class="s1">@Author  :   Ray
</span><span class="s1">@Contact :   ray@raycoder.me
</span><span class="s1">@Software:   PyCharm
</span><span class="s1">@File    :   init.py
</span><span class="s1">@Time    :   2020/2/23 21:19
</span><span class="s1">&#39;&#39;&#39;</span>
<span class="kn">import</span> <span class="nn">requests</span><span class="o">,</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">fake_useragent</span> <span class="kn">import</span> <span class="n">UserAgent</span>

<span class="k">class</span> <span class="nc">CloudMusicSpider</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">getArtUrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">artlist_url</span><span class="p">):</span> <span class="c1">#è·å–éŸ³ä¹çœŸå®IDçš„å‡½æ•°</span>
        <span class="n">outerUrl</span> <span class="o">=</span> <span class="s2">&#34;http://music.163.com/song/media/outer/url?id={0:s}.mp3&#34;</span> <span class="c1">#å¤–é“¾åœ°å€</span>
        <span class="n">HEADER</span> <span class="o">=</span> <span class="p">{</span> <span class="c1">#ä¼ªé€ è¯·æ±‚å¤´ï¼Œé˜²æ­¢è¢«å°</span>
            <span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;*/*&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Accept-Encoding&#39;</span><span class="p">:</span> <span class="s1">&#39;gzip,deflate,sdch&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Accept-Language&#39;</span><span class="p">:</span> <span class="s1">&#39;zh-CN,zh;q=0.8,gl;q=0.6,zh-TW;q=0.4&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Connection&#39;</span><span class="p">:</span> <span class="s1">&#39;keep-alive&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/x-www-form-urlencoded&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Host&#39;</span><span class="p">:</span> <span class="s1">&#39;music.163.com&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Referer&#39;</span><span class="p">:</span> <span class="s1">&#39;https://music.163.com/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="n">UserAgent</span><span class="p">()</span><span class="o">.</span><span class="n">random</span>
        <span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;#/&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="n">HEADER</span><span class="p">)</span> <span class="c1">#ç½‘æ˜“äº‘éŸ³ä¹ä½¿ç”¨å¼‚æ­¥iframeåŠ è½½ï¼Œéœ€è¦å»æ‰&#34;#/&#34;</span>
        <span class="n">songs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;a href=&#34;/song\?id=(\d+)&#34;&gt;(.*?)&lt;/a&gt;&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">):</span>
            <span class="n">songs</span><span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">outerUrl</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">songs</span>
</code></pre></td></tr></table>
</div>
</div><p>æµ‹è¯•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">CloudMusicSpider</span> <span class="kn">import</span> <span class="n">CloudMusicSpider</span>
<span class="n">spider</span><span class="o">=</span><span class="n">CloudMusicSpider</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">spider</span><span class="o">.</span><span class="n">getArtUrl</span><span class="p">(</span><span class="s1">&#39;https://music.163.com/#/playlist?id=4874770876&#39;</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>å¥½çš„ï¼Œæˆ‘ä»¬è¿™æ ·å­æŠŠå®ƒåšæˆä¸€ä¸ªæ¨¡å—å¤‡ç”¨ã€‚</p>
<p>ä¸‹ä¸€ç¯‡æ–‡ç« æˆ‘ä¼šå’Œå¤§å®¶è®²çˆ¬è™«<code>ä¸‹è½½æ–‡ä»¶</code>çš„æ–¹æ³•ã€‚æˆ‘ä¹‹åä¼šå†™ä¸€ç¯‡æœ‰å…³<code>æ­£åˆ™è¡¨è¾¾å¼</code>çš„æ–‡ç« ã€‚</p>
]]></content><category scheme="https://raycoder.me/categories/python/" term="Python" label="Python"/><category scheme="https://raycoder.me/categories/%E7%88%AC%E8%99%AB/" term="çˆ¬è™«" label="çˆ¬è™«"/><category scheme="https://raycoder.me/tags/python/" term="Python" label="Python"/><category scheme="https://raycoder.me/tags/%E7%88%AC%E8%99%AB/" term="çˆ¬è™«" label="çˆ¬è™«"/><category scheme="https://raycoder.me/tags/%E7%A6%8F%E5%88%A9/" term="ç¦åˆ©" label="ç¦åˆ©"/><category scheme="https://raycoder.me/tags/%E7%BD%91%E6%98%93/" term="ç½‘æ˜“" label="ç½‘æ˜“"/><category scheme="https://raycoder.me/tags/%E7%A0%B4%E8%A7%A3/" term="ç ´è§£" label="ç ´è§£"/><category scheme="https://raycoder.me/tags/%E9%9F%B3%E4%B9%90/" term="éŸ³ä¹" label="éŸ³ä¹"/><category scheme="https://raycoder.me/tags/%E4%BC%9A%E5%91%98/" term="ä¼šå‘˜" label="ä¼šå‘˜"/><category scheme="https://raycoder.me/tags/python%E8%BF%9B%E9%98%B6/" term="Pythonè¿›é˜¶" label="Pythonè¿›é˜¶"/></entry><entry><title type="text">ä»é›¶å¼€å§‹å†™ä¸€ä¸ªéŸ³ä¹çˆ¬è™«-3ï¼šé…·ç‹—éŸ³ä¹</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/kugoumusic-spider-artlist/"/><id>https://raycoder.me/p/kugoumusic-spider-artlist/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-02-18T21:48:00+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">æœ¬æ–‡å°†ä¼šè¯¦ç»†çš„å†™ä»é›¶å¼€å§‹åˆ¶ä½œé…·ç‹—éŸ³ä¹çˆ¬è™«çš„è¿‡ç¨‹ï¼Œå¯ä»¥ä¸‹è½½é…·ç‹—éŸ³ä¹éŸ³ä¹ä»˜è´¹æ­Œæ›²ï¼Œä½¿ç”¨Python3å¼€å‘ã€‚ éšä¾¿æ‰“å¼€ä¸€ä¸ªæ­Œå•ï¼Œå³é”®æ£€æŸ¥å±æ€§å‘ç°è¿™ä¸ª&amp;lt;a&amp;gt;æ ‡ç­¾ä¸­å«æœ‰dataã€‚ ç‚¹è¿›å»æ’­æ”¾ï¼Œä¼šå‘ç°ï¼š çœ‹â€¦â€¦</summary><content type="html"><![CDATA[<p><strong>æœ¬æ–‡å°†ä¼šè¯¦ç»†çš„å†™ä»é›¶å¼€å§‹åˆ¶ä½œé…·ç‹—éŸ³ä¹çˆ¬è™«çš„è¿‡ç¨‹ï¼Œå¯ä»¥ä¸‹è½½é…·ç‹—éŸ³ä¹éŸ³ä¹ä»˜è´¹æ­Œæ›²ï¼Œä½¿ç”¨Python3å¼€å‘ã€‚</strong></p>
<!-- more -->
<p>éšä¾¿æ‰“å¼€ä¸€ä¸ªæ­Œå•ï¼Œå³é”®æ£€æŸ¥å±æ€§å‘ç°è¿™ä¸ª<code>&lt;a&gt;</code>æ ‡ç­¾ä¸­å«æœ‰<code>data</code>ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200316114956.png" alt=""></p>
<p>ç‚¹è¿›å»æ’­æ”¾ï¼Œä¼šå‘ç°ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200316115025.png" alt=""></p>
<p>çœ‹æ¥ï¼ŒéŸ³ä¹å¤–é“¾å’Œè¿™ä¸ª<code>hash</code>å“ˆå¸Œå€¼æ˜¯è„±ä¸äº†å…³ç³»çš„äº†ã€‚</p>
<p>äº‹å®ä¸Šï¼Œé…·ç‹—éŸ³ä¹æ­Œæ›²æ•°æ®å¤–é“¾å¦‚ä¸‹ï¼š</p>
<pre><code>http://www.kugou.com/yy/index.php?r=play/getdata&amp;hash=&lt;åˆšæ‰çœ‹åˆ°çš„å“ˆå¸Œå€¼&gt;
</code></pre><p>å¡«å…¥åˆšåˆšçœ‹åˆ°çš„å€¼ï¼ˆURLï¼š<code>https://www.kugou.com/yy/index.php?r=play/getdata&amp;hash=FE2A4AC53981BB3FAF077CCA2461401A</code>ï¼‰ï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹ç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
	<span class="nt">&#34;status&#34;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
	<span class="nt">&#34;err_code&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
	<span class="nt">&#34;data&#34;</span><span class="p">:{</span>
		<span class="nt">&#34;hash&#34;</span><span class="p">:</span><span class="s2">&#34;FE2A4AC53981BB3FAF077CCA2461401A&#34;</span><span class="p">,</span>
		<span class="nt">&#34;timelength&#34;</span><span class="p">:</span><span class="mi">76000</span><span class="p">,</span>
		<span class="nt">&#34;filesize&#34;</span><span class="p">:</span><span class="mi">1220066</span><span class="p">,</span>
		<span class="nt">&#34;audio_name&#34;</span><span class="p">:</span><span class="s2">&#34;Toby Fox - Snowdin Town&#34;</span><span class="p">,</span>
		<span class="nt">&#34;have_album&#34;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
		<span class="nt">&#34;album_name&#34;</span><span class="p">:</span><span class="s2">&#34;UNDERTALE Soundtrack&#34;</span><span class="p">,</span>
		<span class="nt">&#34;album_id&#34;</span><span class="p">:</span><span class="s2">&#34;1983482&#34;</span><span class="p">,</span>
		<span class="nt">&#34;img&#34;</span><span class="p">:</span><span class="s2">&#34;http:\/\/imge.kugou.com\/stdmusic\/20170320\/20170320173006740587.jpg&#34;</span><span class="p">,</span>
		<span class="nt">&#34;have_mv&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
		<span class="nt">&#34;video_id&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
		<span class="nt">&#34;author_name&#34;</span><span class="p">:</span><span class="s2">&#34;Toby Fox&#34;</span><span class="p">,</span>
		<span class="nt">&#34;song_name&#34;</span><span class="p">:</span><span class="s2">&#34;Snowdin Town&#34;</span><span class="p">,</span>
		<span class="nt">&#34;lyrics&#34;</span><span class="p">:</span><span class="s2">&#34;\ufeff[id:$00000000]\r\n[ar:arkady sevidov]\r\n[ti:June]\r\n[by:]\r\n[hash:4399c9872c7235b60b58ce88dc487897]\r\n[al:]\r\n[sign:]\r\n[qq:]\r\n[total:320317]\r\n[offset:0]\r\n[00:01.58]\u7eaf\u97f3\u4e50\uff0c\u8bf7\u6b23\u8d4f\r\n&#34;</span><span class="p">,</span>
		<span class="nt">&#34;author_id&#34;</span><span class="p">:</span><span class="s2">&#34;579236&#34;</span><span class="p">,</span>
		<span class="nt">&#34;privilege&#34;</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span>
		<span class="nt">&#34;privilege2&#34;</span><span class="p">:</span><span class="s2">&#34;1000&#34;</span><span class="p">,</span>
		<span class="nt">&#34;play_url&#34;</span><span class="p">:</span><span class="s2">&#34;https:\/\/webfs.yun.kugou.com\/202002251957\/d2bff4d2209ca251954d38990445b8d2\/G057\/M08\/1A\/17\/GZQEAFaVAR6AYuQ_ABKd4lSFeUo118.mp3&#34;</span><span class="p">,</span>
		<span class="nt">&#34;authors&#34;</span><span class="p">:[</span>
			<span class="p">{</span>
			<span class="nt">&#34;author_id&#34;</span><span class="p">:</span><span class="s2">&#34;579236&#34;</span><span class="p">,</span>
			<span class="nt">&#34;sizable_avatar&#34;</span><span class="p">:</span><span class="s2">&#34;http:\/\/singerimg.kugou.com\/uploadpic\/softhead\/{size}\/20171223\/20171223024709440.jpg&#34;</span><span class="p">,</span>
			<span class="nt">&#34;is_publish&#34;</span><span class="p">:</span><span class="s2">&#34;1&#34;</span><span class="p">,</span>
			<span class="nt">&#34;author_name&#34;</span><span class="p">:</span><span class="s2">&#34;Toby Fox&#34;</span><span class="p">,</span>
			<span class="nt">&#34;avatar&#34;</span><span class="p">:</span><span class="s2">&#34;http:\/\/singerimg.kugou.com\/uploadpic\/softhead\/400\/20171223\/20171223024709440.jpg&#34;</span>
			<span class="p">}</span>
		<span class="p">],</span>
		<span class="nt">&#34;is_free_part&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
		<span class="nt">&#34;bitrate&#34;</span><span class="p">:</span><span class="mi">128</span><span class="p">,</span>
		<span class="nt">&#34;audio_id&#34;</span><span class="p">:</span><span class="s2">&#34;20519359&#34;</span><span class="p">,</span>
		<span class="nt">&#34;play_backup_url&#34;</span><span class="p">:</span><span class="s2">&#34;https:\/\/webfs.cloud.kugou.com\/202002251957\/5d639c7a92c6750b759cab7e718ede04\/G057\/M08\/1A\/17\/GZQEAFaVAR6AYuQ_ABKd4lSFeUo118.mp3&#34;</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬æ‰“å¼€è¿™ä¸ª<code>play_url</code>ï¼ˆ<code>https:\/\/webfs.yun.kugou.com\/202002251957\/d2bff4d2209ca251954d38990445b8d2\/G057\/M08\/1A\/17\/GZQEAFaVAR6AYuQ_ABKd4lSFeUo118.mp3</code>ï¼‰ï¼Œå°±ä¼šæ‰“å¼€çœŸå®çš„éŸ³ä¹åœ°å€ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬é…·ç‹—éŸ³ä¹è·å–çœŸå®ä¸‹è½½é“¾æ¥çš„æµç¨‹å¦‚ä¸‹ï¼š</p>
<div class="mermaid">
graph TD;
    åˆå§‹åŒ–ç¨‹åºï¼Œå¼•å…¥æ¨¡å—-->æ‰¹é‡è·å–å“ˆå¸Œå€¼;
    æ‰¹é‡è·å–å“ˆå¸Œå€¼-->æ‰“å¼€jsonæ–‡ä»¶;
    æ‰“å¼€jsonæ–‡ä»¶-->å¾—åˆ°play_url;
    å¾—åˆ°play_url--ä¸‹è½½éŸ³ä¹;
</div>
<p>å…ˆå°è¯•æ€§è·å–hashï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/env python</span>
<span class="c1">#-*- coding:utf8 -*-</span>
<span class="s1">&#39;&#39;&#39;
</span><span class="s1">@Author  :   Ray
</span><span class="s1">@Contact :   ray@raycoder.me
</span><span class="s1">@Software:   PyCharm
</span><span class="s1">@File    :   KugouSpider.py
</span><span class="s1">@Time    :   2019/11/4 21:19
</span><span class="s1">&#39;&#39;&#39;</span>

<span class="kn">import</span> <span class="nn">requests</span><span class="o">,</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">fake_useragent</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>

<span class="k">class</span> <span class="nc">KugouSpider</span><span class="p">():</span>
    <span class="n">HEADER</span> <span class="o">=</span> <span class="p">{</span>  <span class="c1"># ä¼ªé€ è¯·æ±‚å¤´ï¼Œé˜²æ­¢è¢«å°IP</span>
        <span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;*/*&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Accept-Encoding&#39;</span><span class="p">:</span> <span class="s1">&#39;gzip,deflate,sdch&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Accept-Language&#39;</span><span class="p">:</span> <span class="s1">&#39;zh-CN,zh;q=0.8,gl;q=0.6,zh-TW;q=0.4&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Connection&#39;</span><span class="p">:</span> <span class="s1">&#39;keep-alive&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/x-www-form-urlencoded&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Referer&#39;</span><span class="p">:</span> <span class="s1">&#39;https://kugou.com/&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="n">UserAgent</span><span class="p">()</span><span class="o">.</span><span class="n">random</span>
    <span class="p">}</span>

    <span class="k">def</span> <span class="nf">getArtUrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">artlist_url</span><span class="p">):</span>
        <span class="n">jsonUrl</span> <span class="o">=</span> <span class="s1">&#39;http://www.kugou.com/yy/index.php?r=play/getdata&amp;hash={0:s}&#39;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="n">artlist_url</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">HEADER</span><span class="p">)</span>
        <span class="n">songs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1">#print(response.text)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;a title=&#34;.+&#34; hidefocus=&#34;true&#34; href=&#34;javascript:;&#34; data=&#34;(\w+)\|\d+&#34;&gt;&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">):</span>
            <span class="c1">#print(jsonUrl.format(i))</span>
            <span class="n">jsonfile</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="n">jsonUrl</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">HEADER</span><span class="p">,</span> <span class="n">cookies</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cookies</span><span class="p">)</span>
            <span class="n">jsondata</span> <span class="o">=</span> <span class="n">jsonfile</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="c1">#print(jsondata)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">songs</span><span class="p">[</span><span class="n">jsondata</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;audio_name&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">jsondata</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;play_url&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">return</span> <span class="n">songs</span>
</code></pre></td></tr></table>
</div>
</div><p>å“å‘€ï¼æœ€åè¿”å›äº†ä¸€ä¸ªç©ºå­—å…¸ï¼<code>{}</code>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘è§‚å¯Ÿåå‘ç°ï¼Œé…·ç‹—éœ€è¦æ·»åŠ ä¸€ä¸ª<code>cookie</code>æ‰å¯ä»¥è®¿é—®åˆ°æ•°æ®ã€‚</p>
<p>æˆ‘ä»¬åŠ ä¸€ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">    <span class="k">def</span> <span class="nf">getUrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">artlist_url</span><span class="p">):</span>
        <span class="n">jsonUrl</span> <span class="o">=</span> <span class="s1">&#39;http://www.kugou.com/yy/index.php?r=play/getdata&amp;hash={0:s}&#39;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="n">artlist_url</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">HEADER</span><span class="p">)</span>
        <span class="n">songs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;a title=&#34;.+&#34; hidefocus=&#34;true&#34; href=&#34;javascript:;&#34; data=&#34;(\w+)\|\d+&#34;&gt;&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">):</span>
            <span class="n">jsonfile</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="n">jsonUrl</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">HEADER</span><span class="p">,</span> <span class="n">cookies</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;kg_mid&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">})</span>
            <span class="n">jsondata</span> <span class="o">=</span> <span class="n">jsonfile</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">songs</span><span class="p">[</span><span class="n">jsondata</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;audio_name&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">jsondata</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;play_url&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">return</span> <span class="n">songs</span>
</code></pre></td></tr></table>
</div>
</div><p>å—¯ï¼Ÿè¿˜æ˜¯æ²¡æœ‰æ•°æ®ï¼æˆ‘è§‰å¾—å¯èƒ½æ˜¯<code>HEADER</code>ä¸­çš„<code>host</code>çš„é—®é¢˜ã€‚</p>
<p>æŠŠå®ƒå»æ‰ï¼</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">KugouSpider</span><span class="p">():</span>
    <span class="n">HEADER</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;*/*&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Accept-Encoding&#39;</span><span class="p">:</span> <span class="s1">&#39;gzip,deflate,sdch&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Accept-Language&#39;</span><span class="p">:</span> <span class="s1">&#39;zh-CN,zh;q=0.8,gl;q=0.6,zh-TW;q=0.4&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Connection&#39;</span><span class="p">:</span> <span class="s1">&#39;keep-alive&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/x-www-form-urlencoded&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Referer&#39;</span><span class="p">:</span> <span class="s1">&#39;https://kugou.com/&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="n">UserAgent</span><span class="p">()</span><span class="o">.</span><span class="n">random</span>
    <span class="p">}</span>
    <span class="k">def</span> <span class="nf">getUrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">artlist_url</span><span class="p">):</span>
        <span class="n">jsonUrl</span> <span class="o">=</span> <span class="s1">&#39;http://www.kugou.com/yy/index.php?r=play/getdata&amp;hash={0:s}&#39;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="n">artlist_url</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">HEADER</span><span class="p">)</span>
        <span class="n">songs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1">#print(response.text)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;a title=&#34;.+&#34; hidefocus=&#34;true&#34; href=&#34;javascript:;&#34; data=&#34;(\w+)\|\d+&#34;&gt;&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">):</span>
            <span class="c1">#print(jsonUrl.format(i))</span>
            <span class="n">jsonfile</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="n">jsonUrl</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">HEADER</span><span class="p">,</span> <span class="n">cookies</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;kg_mid&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">})</span>
            <span class="n">jsondata</span> <span class="o">=</span> <span class="n">jsonfile</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">songs</span><span class="p">[</span><span class="n">jsondata</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;audio_name&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">jsondata</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;play_url&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">return</span> <span class="n">songs</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±è·å¾—äº†çœŸå®çš„æ•°æ®ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="p">{</span><span class="s1">&#39;Toby Fox - Snowy&#39;</span><span class="p">:</span> <span class="s1">&#39;https://webfs.yun.kugou.com/202002280800/8b338c7c966f73984a16d332fe0a1905/G053/M04/0C/10/dQ0DAFaVAPCAdhQcABl6n5DvBc0140.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Toby Fox - Undertale&#39;</span><span class="p">:</span> <span class="s1">&#39;https://webfs.yun.kugou.com/202002280800/91772c1108ab0627888c84f9fb6380f1/G057/M04/17/05/eQ0DAFaiNEWAXZVoAF0rmY34-tU840.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Toby Fox - Tem Shop&#39;</span><span class="p">:</span> <span class="s1">&#39;https://webfs.yun.kugou.com/202002280800/02fb916f700f9df912d93daa77c9d420/G055/M0A/06/07/14YBAFaVAdyIb_RdAAsQ0yCL9vEAAAorgG2O-IACxDr193.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Toby Fox - sans.&#39;</span><span class="p">:</span> <span class="s1">&#39;https://webfs.yun.kugou.com/202002280800/3580fcc155cd84b346acc9465504b01a/G052/M02/0C/07/1IYBAFaVAOWINLXsAAxhJsPWw2UAAAy4gIAOs0ADGE-807.mp3&#39;</span><span class="p">,</span> <span class="s1">&#39;Toby Fox - Dogsong&#39;</span><span class="p">:</span> <span class="s1">&#39;https://webfs.yun.kugou.com/202002280800/399c52d789e7f659001ab84e2bcfa823/G055/M00/06/11/F5QEAFaVARWIZFBMAAkgfyVHyJ4AAAoqAMZ4XYACSCX641.mp3&#39;</span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>ä¸å¯¹å‘€ï¼ä¸ºä»€ä¹ˆåªæ‰¾åˆ°äº†å‡ é¦–éŸ³ä¹ï¼Ÿæˆ‘ä»¬æ‰“å°ä¸€ä¸‹<code>jsondata</code>ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">getUrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">artlist_url</span><span class="p">):</span>
    <span class="n">jsonUrl</span> <span class="o">=</span> <span class="s1">&#39;http://www.kugou.com/yy/index.php?r=play/getdata&amp;hash={0:s}&#39;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="n">artlist_url</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">HEADER</span><span class="p">)</span>
    <span class="n">songs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;a title=&#34;.+&#34; hidefocus=&#34;true&#34; href=&#34;javascript:;&#34; data=&#34;(\w+)\|\d+&#34;&gt;&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">):</span>
        <span class="n">jsonfile</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="n">jsonUrl</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">HEADER</span><span class="p">,</span> <span class="n">cookies</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;kg_mid&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">})</span>
        <span class="n">jsondata</span> <span class="o">=</span> <span class="n">jsonfile</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="n">jsondata</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">pass</span>
            <span class="c1">#songs[jsondata[&#39;data&#39;][&#39;audio_name&#39;]] = jsondata[&#39;data&#39;][&#39;play_url&#39;]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="k">return</span> <span class="n">songs</span>
</code></pre></td></tr></table>
</div>
</div><p>WocåŸæ¥è¿™ä¸ªä¸œè¥¿è¿”å›çš„æ˜¯è¿™ç§æ•°æ®ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;err_code&#39;</span><span class="p">:</span> <span class="mi">30020</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;SSA-CODE&#39;</span><span class="p">:</span> <span class="s1">&#39;bj_event_ee07e35318276c48c519523c26d9f4ce&#39;</span><span class="p">,</span> <span class="s1">&#39;SSA-HMID&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">}}</span>
</code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬éšä¾¿æ‰“å¼€ä¸€ä¸ª<code>hash</code>æºé“¾ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200316115218.png" alt=""></p>
<p>ä¹Ÿæ˜¯è¿™ç§æƒ…å†µã€‚</p>
<p>æˆ‘ä»¬å†æ‰“å¼€æ’­æ”¾åœ°å€<code>https://www.kugou.com/song/#hash=FE2A4AC53981BB3FAF077CCA2461401A&amp;album_id=1983482</code>ï¼šå–”ï¼å®ƒå‡ºç°äº†ä¸€ä¸ªéªŒè¯ç ã€‚è¿™ä¸ªä¸œè¥¿å°±æ˜¯ç½ªé­ç¥¸é¦–ã€‚</p>
<p>éªŒè¯ä¹‹åå†æ‰“å¼€<code>hashæºé“¾</code>ï¼Œæ•°æ®å°±å‡ºç°äº†ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ¤æ–­é…·ç‹—éŸ³ä¹è¿™ä¸ª<code>cookie</code>ä¸æ­¢<code>kg_mid</code>ä¸€ä¸ªã€‚</p>
<p>æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200316115245.png" alt=""></p>
<p>è¿™é‡Œæœ‰æ¶å¿ƒçš„<code>cookie</code>ï¼</p>
<p>æŠŠå®ƒä»¬å¤åˆ¶åˆ°ç¨‹åºä¸­å»ã€‚</p>
<p>ä¹ƒå¾—ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">KugouSpider</span><span class="p">():</span>
    <span class="n">HEADER</span> <span class="o">=</span> <span class="p">{</span>  <span class="c1"># ä¼ªé€ è¯·æ±‚å¤´ï¼Œé˜²æ­¢è¢«å°IP</span>
        <span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;*/*&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Accept-Encoding&#39;</span><span class="p">:</span> <span class="s1">&#39;gzip,deflate,sdch&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Accept-Language&#39;</span><span class="p">:</span> <span class="s1">&#39;zh-CN,zh;q=0.8,gl;q=0.6,zh-TW;q=0.4&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Connection&#39;</span><span class="p">:</span> <span class="s1">&#39;keep-alive&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/x-www-form-urlencoded&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Referer&#39;</span><span class="p">:</span> <span class="s1">&#39;https://kugou.com/&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="n">UserAgent</span><span class="p">()</span><span class="o">.</span><span class="n">random</span>
    <span class="p">}</span>
    <span class="n">cookies</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;kg_mid&#39;</span><span class="p">:</span> <span class="s1">&#39;44c117b70a8abbe992b50ee90d19784f&#39;</span><span class="p">,</span>
               <span class="s1">&#39;kg_dfid&#39;</span><span class="p">:</span> <span class="s1">&#39;2SoQgm4W6BHT0eH1EP3qAt3X&#39;</span><span class="p">,</span>
                <span class="s1">&#39;kg_dfid_collect&#39;</span><span class="p">:</span> <span class="s1">&#39;d41d8cd98f00b204e9800998ecf8427e&#39;</span><span class="p">,</span>
                <span class="s1">&#39;KuGooRandom&#39;</span><span class="p">:</span> <span class="s1">&#39;66781582627339920&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Hm_lvt_aedee6983d4cfc62f509129360d6bb3d	1582&#39;</span><span class="p">:</span> <span class="s1">&#39;1582627291,1582630139,1582674521&#39;</span><span class="p">,</span>
                <span class="s1">&#39;kg_mid_temp&#39;</span><span class="p">:</span> <span class="s1">&#39;44c117b70a8abbe992b50ee90d19784f&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Hm_lpvt_aedee6983d4cfc62f509129360d6bb3d&#39;</span><span class="p">:</span> <span class="s1">&#39;1582676297&#39;</span><span class="p">,</span>
                <span class="s1">&#39;ACK_SERVER_10016&#39;</span><span class="p">:</span> <span class="s1">&#39;%7B</span><span class="si">%22li</span><span class="s1">st</span><span class="si">%22%</span><span class="s1">3A%5B%5B</span><span class="si">%22g</span><span class="s1">zreg-user.kugou.com</span><span class="si">%22%</span><span class="s1">5D%5D%7D&#39;</span><span class="p">,</span>
                <span class="s1">&#39;ACK_SERVER_10015&#39;</span><span class="p">:</span> <span class="s1">&#39;%7B</span><span class="si">%22li</span><span class="s1">st</span><span class="si">%22%</span><span class="s1">3A%5B%5B%22bjlogin-user.kugou.com</span><span class="si">%22%</span><span class="s1">5D%5D%7D&#39;</span><span class="p">,</span>
                <span class="s1">&#39;ACK_SERVER_10017&#39;</span><span class="p">:</span> <span class="s1">&#39;%7B</span><span class="si">%22li</span><span class="s1">st</span><span class="si">%22%</span><span class="s1">3A%5B%5B</span><span class="si">%22g</span><span class="s1">zverifycode.service.kugou.com</span><span class="si">%22%</span><span class="s1">5D%5D%7D&#39;</span>
               <span class="p">}</span>

    <span class="k">def</span> <span class="nf">getUrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">artlist_url</span><span class="p">):</span>
        <span class="n">jsonUrl</span> <span class="o">=</span> <span class="s1">&#39;http://www.kugou.com/yy/index.php?r=play/getdata&amp;hash={0:s}&#39;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="n">artlist_url</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">HEADER</span><span class="p">,</span> <span class="n">cookies</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cookies</span><span class="p">)</span>
        <span class="n">songs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;a title=&#34;.+&#34; hidefocus=&#34;true&#34; href=&#34;javascript:;&#34; data=&#34;(\w+)\|\d+&#34;&gt;&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">):</span>
            <span class="n">jsonfile</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="n">jsonUrl</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">HEADER</span><span class="p">,</span> <span class="n">cookies</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cookies</span><span class="p">)</span>
            <span class="n">jsondata</span> <span class="o">=</span> <span class="n">jsonfile</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">songs</span><span class="p">[</span><span class="n">jsondata</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;audio_name&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">jsondata</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;play_url&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">return</span> <span class="n">songs</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ª<code>cookie</code>æ˜¯å¯ä»¥é‡å¤ä½¿ç”¨çš„ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æ•°æ®æ— æ³•æå–æ—¶å»éªŒè¯ä¸€ä¸‹å³å¯ã€‚</p>
<p>ä¸‹è½½éŸ³ä¹å¯ä»¥å»çœ‹æˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼š</p>
<p><a href="https://raycoder.me/p/2538.html" class="LinkCard">ä»é›¶å¼€å§‹å†™ä¸€ä¸ªéŸ³ä¹çˆ¬è™«-2-ç½‘æ˜“äº‘éŸ³ä¹ï¼šä¸‹è½½éŸ³ä¹æ–‡ä»¶</a></p>
<p>æ‰€ä»¥æˆ‘ä»¬å®Œæˆçš„ç¨‹åºå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/env python</span>
<span class="c1">#-*- coding:utf8 -*-</span>
<span class="s1">&#39;&#39;&#39;
</span><span class="s1">@Author  :   Ray
</span><span class="s1">@Contact :   ray@raycoder.me
</span><span class="s1">@Software:   PyCharm
</span><span class="s1">@File    :   KugouSpider.py
</span><span class="s1">@Time    :   2019/11/4 21:19
</span><span class="s1">&#39;&#39;&#39;</span>

<span class="kn">import</span> <span class="nn">requests</span><span class="o">,</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">fake_useragent</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>

<span class="k">class</span> <span class="nc">KugouSpider</span><span class="p">():</span>
    <span class="n">HEADER</span> <span class="o">=</span> <span class="p">{</span>  <span class="c1"># ä¼ªé€ è¯·æ±‚å¤´ï¼Œé˜²æ­¢è¢«å°IP</span>
        <span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;*/*&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Accept-Encoding&#39;</span><span class="p">:</span> <span class="s1">&#39;gzip,deflate,sdch&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Accept-Language&#39;</span><span class="p">:</span> <span class="s1">&#39;zh-CN,zh;q=0.8,gl;q=0.6,zh-TW;q=0.4&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Connection&#39;</span><span class="p">:</span> <span class="s1">&#39;keep-alive&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/x-www-form-urlencoded&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Referer&#39;</span><span class="p">:</span> <span class="s1">&#39;https://kugou.com/&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="n">UserAgent</span><span class="p">()</span><span class="o">.</span><span class="n">random</span>
    <span class="p">}</span>
    <span class="n">cookies</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;kg_mid&#39;</span><span class="p">:</span> <span class="s1">&#39;d7d2db42653ccb5262c6b3a53d3e513e&#39;</span><span class="p">,</span>
               <span class="s1">&#39;kg_dfid&#39;</span><span class="p">:</span> <span class="s1">&#39;4E1aaE0U1ZlH0aaWYz3Z7N6n&#39;</span><span class="p">,</span>
               <span class="s1">&#39;kg_dfid_collect&#39;</span><span class="p">:</span> <span class="s1">&#39;d41d8cd98f00b204e9800998ecf8427e&#39;</span><span class="p">,</span>
               <span class="s1">&#39;KuGooRandom&#39;</span><span class="p">:</span> <span class="s1">&#39;66781582627339920&#39;</span><span class="p">,</span>
               <span class="s1">&#39;Hm_lvt_aedee6983d4cfc62f509129360d6bb3d	1582&#39;</span><span class="p">:</span> <span class="s1">&#39;1583409383&#39;</span><span class="p">,</span>
               <span class="s1">&#39;kg_mid_temp&#39;</span><span class="p">:</span> <span class="s1">&#39;d7d2db42653ccb5262c6b3a53d3e513e&#39;</span><span class="p">,</span>
               <span class="s1">&#39;Hm_lpvt_aedee6983d4cfc62f509129360d6bb3d&#39;</span><span class="p">:</span> <span class="s1">&#39;1583409803&#39;</span><span class="p">,</span>
               <span class="s1">&#39;ACK_SERVER_10016&#39;</span><span class="p">:</span> <span class="s1">&#39;%7B</span><span class="si">%22li</span><span class="s1">st</span><span class="si">%22%</span><span class="s1">3A%5B%5B</span><span class="si">%22g</span><span class="s1">zreg-user.kugou.com</span><span class="si">%22%</span><span class="s1">5D%5D%7D&#39;</span><span class="p">,</span>
               <span class="s1">&#39;ACK_SERVER_10015&#39;</span><span class="p">:</span> <span class="s1">&#39;%7B</span><span class="si">%22li</span><span class="s1">st</span><span class="si">%22%</span><span class="s1">3A%5B%5B%22bjlogin-user.kugou.com</span><span class="si">%22%</span><span class="s1">5D%5D%7D&#39;</span><span class="p">,</span>
               <span class="s1">&#39;ACK_SERVER_10017&#39;</span><span class="p">:</span> <span class="s1">&#39;%7B</span><span class="si">%22li</span><span class="s1">st</span><span class="si">%22%</span><span class="s1">3A%5B%5B</span><span class="si">%22g</span><span class="s1">zverifycode.service.kugou.com</span><span class="si">%22%</span><span class="s1">5D%5D%7D&#39;</span>
              <span class="p">}</span>

    <span class="k">def</span> <span class="nf">getArtUrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">artlist_url</span><span class="p">):</span>
        <span class="n">jsonUrl</span> <span class="o">=</span> <span class="s1">&#39;http://www.kugou.com/yy/index.php?r=play/getdata&amp;hash={0:s}&#39;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="n">artlist_url</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">HEADER</span><span class="p">)</span>
        <span class="n">songs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1">#print(response.text)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&lt;a title=&#34;.+&#34; hidefocus=&#34;true&#34; href=&#34;javascript:;&#34; data=&#34;(\w+)\|\d+&#34;&gt;&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">):</span>
            <span class="c1">#print(jsonUrl.format(i))</span>
            <span class="n">jsonfile</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="n">jsonUrl</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">HEADER</span><span class="p">,</span> <span class="n">cookies</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cookies</span><span class="p">)</span>
            <span class="n">jsondata</span> <span class="o">=</span> <span class="n">jsonfile</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="c1">#print(jsondata)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">songs</span><span class="p">[</span><span class="n">jsondata</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;audio_name&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">jsondata</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;play_url&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">return</span> <span class="n">songs</span>
</code></pre></td></tr></table>
</div>
</div><p>æµ‹è¯•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">KugouSpider</span> <span class="kn">import</span> <span class="n">KugouSpider</span>
<span class="kn">from</span> <span class="nn">download</span> <span class="kn">import</span> <span class="n">downloadMusic</span>

<span class="k">def</span> <span class="nf">_test</span><span class="p">():</span>
    <span class="n">spider</span> <span class="o">=</span> <span class="n">KugouSpider</span><span class="p">()</span>
    <span class="n">downloadMusic</span><span class="p">(</span><span class="n">spider</span><span class="o">.</span><span class="n">getUrl</span><span class="p">(</span><span class="s1">&#39;https://www.kugou.com/yy/special/single/1094256.html&#39;</span><span class="p">))</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">_test</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªä¹Ÿè¦å†™ä¸ºä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ï¼š<code>test.py</code>ã€‚
P.S.æˆ‘å‘ç°è²Œä¼¼éšæœºCookieæœ‰æ•ˆï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">    <span class="n">randten</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">large</span><span class="p">:</span> <span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="n">large</span><span class="p">)</span>
    <span class="n">cookies</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;kg_mid&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">randten</span><span class="p">(</span><span class="mi">30</span><span class="p">)),</span>
               <span class="s1">&#39;kg_dfid&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">randten</span><span class="p">(</span><span class="mi">30</span><span class="p">)),</span>
               <span class="s1">&#39;kg_dfid_collect&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">randten</span><span class="p">(</span><span class="mi">30</span><span class="p">)),</span>
               <span class="s1">&#39;KuGooRandom&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">randten</span><span class="p">(</span><span class="mi">12</span><span class="p">)),</span>
               <span class="s1">&#39;Hm_lvt_aedee6983d4cfc62f509129360d6bb3d	1582&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">randten</span><span class="p">(</span><span class="mi">10</span><span class="p">)),</span>
               <span class="s1">&#39;kg_mid_temp&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">randten</span><span class="p">(</span><span class="mi">30</span><span class="p">)),</span>
               <span class="s1">&#39;Hm_lpvt_aedee6983d4cfc62f509129360d6bb3d&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">randten</span><span class="p">(</span><span class="mi">30</span><span class="p">)),</span>
               <span class="s1">&#39;ACK_SERVER_10016&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">randten</span><span class="p">(</span><span class="mi">30</span><span class="p">)),</span>
               <span class="s1">&#39;ACK_SERVER_10015&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">randten</span><span class="p">(</span><span class="mi">30</span><span class="p">)),</span>
               <span class="s1">&#39;ACK_SERVER_10017&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">randten</span><span class="p">(</span><span class="mi">30</span><span class="p">))</span>
              <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥è¯•è¯•ã€‚</p>
]]></content><category scheme="https://raycoder.me/categories/python/" term="Python" label="Python"/><category scheme="https://raycoder.me/categories/%E7%88%AC%E8%99%AB/" term="çˆ¬è™«" label="çˆ¬è™«"/><category scheme="https://raycoder.me/tags/python/" term="Python" label="Python"/><category scheme="https://raycoder.me/tags/%E7%88%AC%E8%99%AB/" term="çˆ¬è™«" label="çˆ¬è™«"/><category scheme="https://raycoder.me/tags/%E7%A6%8F%E5%88%A9/" term="ç¦åˆ©" label="ç¦åˆ©"/><category scheme="https://raycoder.me/tags/%E9%9F%B3%E4%B9%90/" term="éŸ³ä¹" label="éŸ³ä¹"/><category scheme="https://raycoder.me/tags/%E7%A0%B4%E8%A7%A3/" term="ç ´è§£" label="ç ´è§£"/><category scheme="https://raycoder.me/tags/%E4%BC%9A%E5%91%98/" term="ä¼šå‘˜" label="ä¼šå‘˜"/><category scheme="https://raycoder.me/tags/python%E8%BF%9B%E9%98%B6/" term="Pythonè¿›é˜¶" label="Pythonè¿›é˜¶"/><category scheme="https://raycoder.me/tags/%E9%85%B7%E7%8B%97/" term="é…·ç‹—" label="é…·ç‹—"/></entry><entry><title type="text">ä¸€äº›å…³äºGitHubå›¾åƒæ— æ³•æ­£å¸¸æ˜¾ç¤ºå’Œè®¿é—®é€Ÿåº¦æ…¢çš„è§£å†³æ–¹æ¡ˆ</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/github-hosts/"/><id>https://raycoder.me/p/github-hosts/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-02-18T08:08:42+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">ä»Šå¤©æˆ‘åœ¨è®¿é—®GayHubçš„Issueæ—¶å‘ç°è®¿é—®é€Ÿåº¦å¥‡æ…¢æ— æ¯”ï¼ŒåŠ è½½å¥½åä¹Ÿæ— æ³•æ­£å¸¸æ˜¾ç¤ºå›¾ç‰‡ï¼Œraw.githubusercontent.comä¹Ÿæ— æ³•è¿›å…¥ã€‚ä¸Šç½‘æŸ¥æ‰¾ç›¸å…³èµ„æ–™åç»ˆäºæœ‰äº†ç›¸å…³çš„è§£å†³æ–¹æ³•ã€‚ ç½‘ä¸Šä¸€èˆ¬â€¦â€¦</summary><content type="html"><![CDATA[<p><strong>ä»Šå¤©æˆ‘åœ¨è®¿é—®GayHubçš„Issueæ—¶å‘ç°è®¿é—®é€Ÿåº¦å¥‡æ…¢æ— æ¯”ï¼ŒåŠ è½½å¥½åä¹Ÿæ— æ³•æ­£å¸¸æ˜¾ç¤ºå›¾ç‰‡ï¼Œraw.githubusercontent.comä¹Ÿæ— æ³•è¿›å…¥ã€‚ä¸Šç½‘æŸ¥æ‰¾ç›¸å…³èµ„æ–™åç»ˆäºæœ‰äº†ç›¸å…³çš„è§£å†³æ–¹æ³•ã€‚</strong></p>
<p>ç½‘ä¸Šä¸€èˆ¬æµä¼ çš„Hostså·²ç»ä¸å¥½ä½¿äº†ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># GitHub Start</span>
192.30.253.112 github.com
192.30.253.118 gist.github.com
151.101.112.133 assets-cdn.github.com
151.101.184.133 raw.githubusercontent.com
151.101.112.133 gist.githubusercontent.com
151.101.184.133 cloud.githubusercontent.com
151.101.112.133 camo.githubusercontent.com
151.101.112.133 avatars0.githubusercontent.com
151.101.112.133 avatars1.githubusercontent.com
151.101.184.133 avatars2.githubusercontent.com
151.101.12.133 avatars3.githubusercontent.com
151.101.12.133 avatars4.githubusercontent.com
151.101.184.133 avatars5.githubusercontent.com
151.101.184.133 avatars6.githubusercontent.com
151.101.184.133 avatars7.githubusercontent.com
151.101.12.133 avatars8.githubusercontent.com
<span class="c1"># GitHub End</span>
</code></pre></td></tr></table>
</div>
</div><p><code>ipconfig /flushdns</code>åæ— æ•ˆã€‚</p>
<p>åæ¥åˆå»<a href="https://github.com/chenxuhua/issues-blog/issues/3">è¿™é‡Œ</a>ç¿»äº†ç¿»ï¼Œåˆå‘ç°äº†ä¸€ä¸ªå¥½ç”¨çš„ä¸œè¥¿ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">140.82.113.4 github.com
140.82.113.19 assets-cdn.github.com
151.101.185.194 github.global.ssl.fastly.net
185.199.108.153 assets-cdn.github.com
185.199.108.153 github.github.io
151.101.184.133 githubusercontent.com
192.30.253.118 gist.github.com
</code></pre></td></tr></table>
</div>
</div><p>å‘ç°è¿™ä¸ªç«Ÿç„¶æ˜¯æœ‰ç”¨çš„ï¼æ‰€ä»¥åªéœ€è¦ä½¿ç”¨è¿™ä¸ªHostså³å¯ï¼</p>
<p><code>ipconfig /flushdns</code>èµ°èµ·~</p>
<p>ä¸è¿‡è¿™äº›IPæ¯äººéƒ½<code>å„ä¸ç›¸åŒ</code>ï¼Œå‡å¦‚ä½ è¿˜ä¸èƒ½æ­£å¸¸è®¿é—®ï¼Œé‚£è¯·å»<a href="https://www.ipaddress.com">https://www.ipaddress.com</a></p>
<p>æŸ¥è¯¢ç›¸å¯¹åº”GayHub ipåœ°å€ï¼ŒæŠŠä¹‹å‰hostsä¸­çš„<code>æ›¿æ¢</code>æ‰ï¼Œå°±åº”è¯¥å¯ä»¥æ­£å¸¸è®¿é—®äº†ã€‚</p>
]]></content><category scheme="https://raycoder.me/categories/hosts/" term="Hosts" label="Hosts"/><category scheme="https://raycoder.me/categories/github/" term="GitHub" label="GitHub"/><category scheme="https://raycoder.me/tags/github/" term="GitHub" label="GitHub"/><category scheme="https://raycoder.me/tags/hosts/" term="Hosts" label="Hosts"/><category scheme="https://raycoder.me/tags/%E5%8A%A0%E9%80%9F/" term="åŠ é€Ÿ" label="åŠ é€Ÿ"/></entry><entry><title type="text">ä½¿ç”¨CentOS 7 + Kodcloud(å¯é“äº‘) æ­å»ºä¸ªäººç½‘ç›˜</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/kodcloud-with-centos7/"/><id>https://raycoder.me/p/kodcloud-with-centos7/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-02-14T17:10:53+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html"><![CDATA[<p><strong>ç½‘ç›˜æ¥äºŒè¿ä¸‰çš„å€’ä¸‹ï¼Œ*åº¦ç½‘ç›˜åˆå¼€å§‹é™é€Ÿï¼ŒçœŸä¸è®©äººæ»¡æ„ğŸ·ã€‚ã€‚</strong></p>
<p><strong>è¿˜æ˜¯è‡ªå·±æ­å»ºçš„ç½‘ç›˜æ¯”è¾ƒé è°±â€¦â€¦ğŸ˜‚</strong></p>â€¦â€¦]]></summary><content type="html"><![CDATA[<p><strong>ç½‘ç›˜æ¥äºŒè¿ä¸‰çš„å€’ä¸‹ï¼Œ*åº¦ç½‘ç›˜åˆå¼€å§‹é™é€Ÿï¼ŒçœŸä¸è®©äººæ»¡æ„ğŸ·ã€‚ã€‚</strong></p>
<p><strong>è¿˜æ˜¯è‡ªå·±æ­å»ºçš„ç½‘ç›˜æ¯”è¾ƒé è°±â€¦â€¦ğŸ˜‚</strong></p>
<h3 id="å‡†å¤‡ææ–™">å‡†å¤‡ææ–™</h3>
<hr>
<ol>
<li>
<p>å¸¦æœ‰CentOSçš„æœåŠ¡å™¨ä¸€ä»½</p>
</li>
<li>
<p>è£…æœ‰PHP</p>
</li>
<li>
<p>æœ‰Apache</p>
<p><del>ä¸‹é”…ä¹±ç‚–ï¼</del></p>
</li>
</ol>
<p>æˆ‘è¿™é‡Œé‡‡ç”¨è…¾è®¯äº‘çš„CVMã€‚</p>
<h3 id="step1-å®‰è£…xmapp">Step.1 å®‰è£…XMAPP</h3>
<hr>
<h4 id="1-ä¸‹è½½">1. ä¸‹è½½</h4>
<p>ä¸‹è½½å‘½ä»¤ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">wget -c https://www.apachefriends.org/xampp-files/7.4.2/xampp-linux-x64-7.4.2-0-installer.run
</code></pre></td></tr></table>
</div>
</div><p>ä¸è¿‡æœ‰äººè¯´è¿æ¥è¶…æ—¶(æˆ‘ä¹Ÿæ˜¯)ï¼Œè¿˜å¥½æˆ‘æ˜¯ä¸ªå¥½åšä¸»ğŸ˜‚(å¤§ä¹‰å‡›ç„¶)ï¼Œæä¾›ä¸ª<code>æˆ‘çš„ä¸‹è½½æº</code>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">wget -c http://111.229.174.206/kodexplorer/data/User/admin/home/Coding/xampp-linux-x64-7.4.2-0-installer.run
</code></pre></td></tr></table>
</div>
</div><p>ä¹Ÿè®¸æ¯”è¾ƒæ…¢ï¼Œä½†æ€»æ¯”ä¸‹è½½ä¸äº†å¥½å¤šäº†</p>
<p>ä¸‹è½½ä¹‹åä¼šçœ‹åˆ°ä¸€ä¸ª<code>.run</code>å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå…ˆæ·»åŠ ç›¸åº”çš„æƒé™ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">chmod +x xampp-linux-x64-7.4.2-0-installer.run
</code></pre></td></tr></table>
</div>
</div><h4 id="2å®‰è£…">2.å®‰è£…</h4>
<p>è¿è¡Œï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo ./xampp-linux-x64-7.4.2-0-installer.run
</code></pre></td></tr></table>
</div>
</div><p>æŒ‰ç…§æç¤ºä¸€è·¯<code>y/å›è½¦</code>å³å¯</p>
<h3 id="step-2å®‰è£…å¯é“äº‘">Step 2.å®‰è£…å¯é“äº‘</h3>
<hr>
<p>å®˜æ–¹ä¸‹è½½é¡µé¢ï¼šhttps://kodcloud.com/download/ã€‚å…¶ä¸­æœ‰è·å–æœ€æ–°ç‰ˆå¯é“äº‘çš„ç›¸å…³å‘½ä»¤ã€‚</p>
<h4 id="ä¸‹è½½">ä¸‹è½½ï¼š</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">wget http://static.kodcloud.com/update/download/kodexplorer4.40.zip
</code></pre></td></tr></table>
</div>
</div><h3 id="å®‰è£…">å®‰è£…ï¼š</h3>
<h5 id="åˆ›å»ºç›®å½•">åˆ›å»ºç›®å½•ï¼š</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo mkdir kodexplorer
</code></pre></td></tr></table>
</div>
</div><h5 id="è§£å‹">è§£å‹ï¼š</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">unzip kodexplorer4.40.zip -d ./kodexplorer
</code></pre></td></tr></table>
</div>
</div><h5 id="è®¾ç½®æƒé™">è®¾ç½®æƒé™ï¼š</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">cd</span> ./kodexplorer
chmod -Rf <span class="m">777</span> ./*
</code></pre></td></tr></table>
</div>
</div><h5 id="å®Œæˆå®‰è£…">å®Œæˆå®‰è£…ï¼š</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo cp -r kodexplorer/ /opt/lampp/htdocs/
<span class="nb">cd</span> /opt/lampp/htdocs
chmod <span class="m">777</span> kodexplorer
chmod -R <span class="m">777</span> kodexplorer/data/
</code></pre></td></tr></table>
</div>
</div><h3 id="step-3-enjoy">Step 3. Enjoy!</h3>
<hr>
<pre><code>sudo /opt/lampp/xampp start
</code></pre><p>æµè§ˆå™¨æ‰“å¼€<code>IPåœ°å€/kodexplorer/</code>ï¼Œè®¾ç½®ç®¡ç†å‘˜å¯†ç ï¼Œå¼€å§‹ä½¿ç”¨ã€‚</p>]]></content><category scheme="https://raycoder.me/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/" term="æœåŠ¡å™¨" label="æœåŠ¡å™¨"/><category scheme="https://raycoder.me/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" term="æœåŠ¡å™¨" label="æœåŠ¡å™¨"/><category scheme="https://raycoder.me/tags/centos/" term="CentOS" label="CentOS"/><category scheme="https://raycoder.me/tags/%E6%90%9E%E6%9C%BA/" term="ææœº" label="ææœº"/><category scheme="https://raycoder.me/tags/%E7%BD%91%E7%9B%98/" term="ç½‘ç›˜" label="ç½‘ç›˜"/><category scheme="https://raycoder.me/tags/%E6%95%99%E7%A8%8B/" term="æ•™ç¨‹" label="æ•™ç¨‹"/></entry><entry><title type="text">æƒ³æ‹¥æœ‰è‡ªå·±çš„åŸŸåé‚®ç®±ä¹ˆï¼Ÿï¼</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/domain-mail/"/><id>https://raycoder.me/p/domain-mail/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-02-01T14:20:35+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">å‡å¦‚ä½ æœ‰ä¸€ä¸ªåŸŸåï¼Œä½ æƒ³ç”¨å®ƒæ¥å¼„ä¸€ä¸ªåŸŸåé‚®ç®±ä¹ˆ?! ç”±äºQQé‚®ç®±åœ¨2020å¹´1æœˆ20å·å–æ¶ˆäº†æ–°å»ºåŸŸåé‚®ç®±åŠŸèƒ½ï¼Œè€Œä¼ä¸šé‚®ç®±æ³¨å†Œåˆéå¸¸éº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘å†³å®šé‡‡ç”¨ä¸€ä¸ªå›½å¤–çš„åŸŸåé‚®ç®±æä¾›å•†â€”â€”Pinglyã€‚ Step 1.æ‰“å¼€Pâ€¦â€¦</summary><content type="html"><![CDATA[<blockquote>
<p><strong><i class="fa fa-envelope"></i>å‡å¦‚ä½ æœ‰ä¸€ä¸ªåŸŸåï¼Œä½ æƒ³ç”¨å®ƒæ¥å¼„ä¸€ä¸ªåŸŸåé‚®ç®±ä¹ˆ?!<i class="fa fa-envelope"></i></strong></p>
<!-- more -->
</blockquote>
<p>ç”±äºQQé‚®ç®±åœ¨2020å¹´1æœˆ20å·å–æ¶ˆäº†æ–°å»ºåŸŸåé‚®ç®±åŠŸèƒ½ï¼Œè€Œä¼ä¸šé‚®ç®±æ³¨å†Œåˆéå¸¸éº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘å†³å®šé‡‡ç”¨ä¸€ä¸ªå›½å¤–çš„åŸŸåé‚®ç®±æä¾›å•†â€”â€”<a href="https://pingly.com">Pingly</a>ã€‚</p>
<h3 id="step-1æ‰“å¼€pinglyhttpspinglycomsignupæ³¨å†Œä¸€ä¸ªè´¦å·å·²æœ‰è´¦å·çš„ç‚¹å‡»ç™»å½•httpspinglycomlogin">Step 1.æ‰“å¼€<a href="https:/pingly.com/signup">Pingly</a>ï¼Œæ³¨å†Œä¸€ä¸ªè´¦å·ã€‚ï¼ˆå·²æœ‰è´¦å·çš„ç‚¹å‡»<a href="https://pingly.com/login">ç™»å½•</a>ï¼‰</h3>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200401131540.png" alt=""></p>
<h3 id="step-2ç™»å½•æ³¨å†Œå®ŒåæŒ‰ç…§ç³»ç»Ÿçš„æç¤ºè®¾ç½®åŸŸåçš„txtcnameåŠmxè½¬å‘è®¾ç½®æˆåŠŸåç‚¹å‡»verifyå¯èƒ½è¦ä¸€æ®µæ—¶é—´">Step 2.ç™»å½•/æ³¨å†Œå®ŒåæŒ‰ç…§ç³»ç»Ÿçš„æç¤ºè®¾ç½®åŸŸåçš„TXTã€CNAMEåŠMXè½¬å‘ï¼Œè®¾ç½®æˆåŠŸåç‚¹å‡»Verifyï¼ˆå¯èƒ½è¦ä¸€æ®µæ—¶é—´ï¼‰</h3>
<p><img src="https://cdn.jsdelivr.net/gh/FFRaycoder/cdn/imgs/20200401131541.png" alt=""></p>
<h3 id="step-3ç„¶åæ‰“å¼€ä½ æ³¨å†Œæ—¶çš„é‚®ç®±ç‚¹å‡»å…¶ä¸­çš„é“¾æ¥è¿›è¡Œè´¦å·çš„éªŒè¯">Step 3.ç„¶åæ‰“å¼€ä½ æ³¨å†Œæ—¶çš„é‚®ç®±ï¼Œç‚¹å‡»å…¶ä¸­çš„é“¾æ¥è¿›è¡Œè´¦å·çš„éªŒè¯</h3>
<h3 id="finalå¥½äº†ä¹‹åæ‰€æœ‰å‘åˆ°ä½ çš„åŸŸåé‚®ç®±çš„é‚®ä»¶éƒ½ä¼šåœ¨æ”¶ä»¶ç®±httpspinglycominboxå‡ºç°">Finalï¼šå¥½äº†ï¼Œä¹‹åæ‰€æœ‰å‘åˆ°ä½ çš„åŸŸåé‚®ç®±çš„é‚®ä»¶éƒ½ä¼šåœ¨<a href="https://pingly.com/#inbox">æ”¶ä»¶ç®±</a>å‡ºç°ï¼</h3>
<p>å¼€å§‹ä½¿ç”¨å§ï¼æˆ‘çš„é‚®ç®±ï¼š<a href="mailto:ray@raycoder.me">ray@raycoder.me</a></p>
<hr>
<p>2020.4.1æ›´æ–°ï¼šæ¨èä½¿ç”¨å›½å†…çš„<em class="emphasis-point">ç½‘æ˜“äº‘ä¼ä¸šé‚®</em>æˆ–<em class="emphasis-point">é˜¿é‡Œäº‘é‚®ç®±</em>ã€‚</p>
]]></content><category scheme="https://raycoder.me/categories/%E5%9F%9F%E5%90%8D/" term="åŸŸå" label="åŸŸå"/><category scheme="https://raycoder.me/categories/%E9%82%AE%E7%AE%B1/" term="é‚®ç®±" label="é‚®ç®±"/><category scheme="https://raycoder.me/tags/%E5%9F%9F%E5%90%8D/" term="åŸŸå" label="åŸŸå"/><category scheme="https://raycoder.me/tags/%E8%87%AA%E5%AE%9A%E4%B9%89/" term="è‡ªå®šä¹‰" label="è‡ªå®šä¹‰"/><category scheme="https://raycoder.me/tags/%E6%90%9E%E6%9C%BA/" term="ææœº" label="ææœº"/></entry><entry><title type="text">PicGo + Gitee(ç äº‘)å®ç°markdownå›¾åºŠ</title><link rel="alternate" type="text/html" href="https://raycoder.me/p/picgo-and-gitee-markdown-pic/"/><id>https://raycoder.me/p/picgo-and-gitee-markdown-pic/</id><updated>2020-04-09T09:07:57+08:00</updated><published>2020-01-22T14:53:20+08:00</published><author><name>Ray</name><uri>https://raycoder.me/</uri><email>ray@raycoder.me</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">PicGo+Gitee=markdownå›¾åºŠ</summary><content type="html"><![CDATA[<blockquote>
<p><strong>è½¬è½½è‡ª: <a href="https://www.jianshu.com/u/f81ef1ee8360">LeonG7</a>çš„<a href="https://www.jianshu.com/p/b69950a49ae2">ç®€ä¹¦åšå®¢</a>ã€‚</strong>
<strong>å‰è¨€ï¼šæ·±æ„Ÿåœ¨çº¿åšå®¢çš„ç¼–è¾‘å™¨å‘å¤ªå¤šäº†ï¼Œæ–‡æ¡£ä¸¢å¤±ã€å¿…é¡»è”ç½‘ã€å¯ç§»æ¤æ€§å¤ªå·®ï¼Œæ‰€ä»¥å¼€å§‹å¯»æ‰¾å¯æ›¿ä»£çš„æ–¹æ¡ˆã€‚</strong></p>
</blockquote>
<p>å’±ä»¬å†™åšå®¢çš„æ—¶å€™ï¼Œæ€»æ˜¯éœ€è¦<code>æ’å…¥å›¾ç‰‡</code>çš„ï¼Œå›¾ç‰‡å­˜åœ¨æœ¬åœ°çš„è¯ä¸Šä¼ åˆ°åšå®¢ç½‘ç«™å»å°±æ²¡æ³•æ˜¾ç¤ºäº†ï¼Œå°±ç®—ä¸€ä¸ªå›¾ä¸€ä¸ªå›¾çš„å¤åˆ¶ç²˜è´´ä¸Šå»ï¼Œæƒ³ç§»æ¤åˆ°å…¶ä»–çš„åšå®¢ç½‘ç«™ï¼Œå›¾å°±ä¼šå¤±æ•ˆï¼Œæˆ‘ä»¬å°±éœ€è¦å›¾åºŠã€‚</p>
<p>å›¾åºŠæ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ å›¾åºŠå°±æ˜¯ä¸€ä¸ªä¾¿äºåœ¨åšæ–‡ä¸­æ’å…¥åœ¨çº¿å›¾ç‰‡è¿æ¥çš„ä¸ªäººå›¾ç‰‡ä»“åº“ã€‚è®¾ç½®å›¾åºŠä¹‹åï¼Œåœ¨è‡ªå·±åšå®¢ä¸­æ’å…¥çš„å›¾ç‰‡é“¾æ¥å°±å¯ä»¥éšæ—¶éšåœ°åœ¨çº¿é¢„è§ˆäº†ï¼Œå¹¶ä¸”ä¸ä¼šå› ä¸ºä»»ä½•æ„å¤–åŸå› æ— æ³•æŸ¥çœ‹ï¼Œé™¤éè‡ªå·±äº²è‡ªåˆ é™¤ã€‚</p>
<h4 id="ç¥å¥‡çš„picgoå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è¯ç”Ÿçš„å®ƒå¯ä»¥å°†å›¾ç‰‡ä¸Šä¼ åˆ°æŒ‡å®šçš„å›¾åºŠä¸Šç„¶åè¿”å›markdowné“¾æ¥ç›´æ¥ç²˜è´´åˆ°ä½ çš„æ–‡æ¡£ä¸­å°±æå®šå•¦">ç¥å¥‡çš„PicGoå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è¯ç”Ÿçš„ï¼Œå®ƒå¯ä»¥å°†å›¾ç‰‡ä¸Šä¼ åˆ°æŒ‡å®šçš„å›¾åºŠä¸Šï¼Œç„¶åè¿”å›markdowné“¾æ¥ï¼Œç›´æ¥ç²˜è´´åˆ°ä½ çš„æ–‡æ¡£ä¸­ï¼Œå°±æå®šå•¦~~~</h4>
<p>é—®é¢˜åˆæ¥äº†ï¼Œç½‘ä¸Šæ¨èä¸ƒç‰›äº‘é˜¿é‡Œäº‘éƒ½æ˜¯è¦ç§ŸèµæœåŠ¡å™¨çš„ï¼Œå¤ªéº»çƒ¦è¿˜è¦é’±ï¼Œå¾®åšç°åœ¨æŒ‚é“¾æ¥åˆå¾ˆå‰å®³ã€‚å¤§éƒ¨åˆ†äººé€‰æ‹©ç”¨githubï¼Œä½†æ˜¯githubè™½å¥½å´æ˜¯å›½å¤–çš„ç½‘ç«™ï¼Œé€Ÿåº¦ç»ˆç©¶æ¯”ä¸ä¸Šå›½å†…ç½‘ç«™ï¼Œç ”ç©¶äº†å°åŠå¤©ï¼Œç»ˆäºå‘ç°å®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 id="æœ€ç»ˆå†³å®šä½¿ç”¨picgohttpsgithubcommolunerfinnpicgo--å›½å†…çš„github---ç äº‘httpsgiteecomæ¥å®ç°markdownå›¾åºŠ">æœ€ç»ˆå†³å®šä½¿ç”¨<a href="https://github.com/Molunerfinn/PicGo"><code>PicGo</code></a> + <a href="https://gitee.com"><code>å›½å†…çš„github - ç äº‘</code></a>æ¥å®ç°<code>markdownå›¾åºŠ</code></h2>
<h2 id="1-å®‰è£…">1. å®‰è£…</h2>
<ul>
<li>PicGo</li>
<li>picgo-plugin-gitee-uploaderæ’ä»¶</li>
</ul>
<h3 id="é¦–å…ˆæ‰“å¼€picgoå®˜ç½‘httpsgithubcommolunerfinnpicgoä¸‹è½½å®‰è£…åŒ…">é¦–å…ˆæ‰“å¼€<a href="https://github.com/Molunerfinn/PicGo">PicGoå®˜ç½‘</a>ï¼Œä¸‹è½½å®‰è£…åŒ…</h3>
<center><img src="https://gitee.com/dogleft/blogsrc/raw/master/img/picgo1.jpg"/></center>
<p><del>é€Ÿåº¦è¿˜æŒºå¿«</del></p>
<h3 id="å®‰è£…ä¹‹åæ‰“å¼€ä¸»ç•Œé¢">å®‰è£…ä¹‹åæ‰“å¼€ä¸»ç•Œé¢</h3>
<center><img src="https://gitee.com/dogleft/blogsrc/raw/master/img/picgo2.jpg"/></center>
<h3 id="é€‰æ‹©æœ€åº•ä¸‹çš„æ’ä»¶è®¾ç½®æœç´¢gitee">é€‰æ‹©æœ€åº•ä¸‹çš„æ’ä»¶è®¾ç½®ï¼Œæœç´¢gitee</h3>
<center><img src="https://gitee.com/dogleft/blogsrc/raw/master/img/picgo3.jpg"/></center>
<h3 id="ç‚¹å‡»gitee-uploaderå¼€å§‹å®‰è£…">ç‚¹å‡»gitee-uploaderå¼€å§‹å®‰è£…</h3>
<blockquote>
<p>è¿™é‡Œæ³¨æ„ä¸€ä¸‹ï¼Œå¿…é¡»è¦å…ˆå®‰è£…<a href="https://nodejs.org"><code>node.js</code></a>æ‰èƒ½å®‰è£…æ’ä»¶ï¼Œæ²¡è£…çš„è‡ªå·±è£…ä¸€ä¸‹ï¼Œç„¶åé‡å¯å°±è¡Œã€‚</p>
</blockquote>
<p>è¿™ä¸ªåœ°æ–¹æœ‰ä¸¤ä¸ªæ’ä»¶ï¼Œæˆ‘è¯•äº†ä¸€éï¼Œä¸¤ä¸ªéƒ½èƒ½ç”¨ï¼Œå¤§å®¶çœ‹å¿ƒæƒ…é€‰æ‹©ï¼Œå…ˆè¯´ä¸€ä¸‹è¿™ä¸ª<code>gitee-uploader</code>ï¼Œç”¨ä¸äº†çš„åŒå­¦å°±é€‰å¦å¤–é‚£ä¸ªï¼Œæˆ‘éƒ½ä¼šè®²ä¸€éé…ç½®ã€‚</p>
<h2 id="2-å»ºç«‹giteeç äº‘å›¾åºŠåº“">2. å»ºç«‹Giteeï¼ˆç äº‘ï¼‰å›¾åºŠåº“</h2>
<p>æ³¨å†Œç äº‘çš„æ–¹æ³•å¾ˆç®€å•ï¼Œç½‘ç«™å¼•å¯¼éƒ½æ˜¯ä¸­æ–‡ï¼Œä¸å¤šè¯´äº†ï¼Œæˆ‘ä»¬ç›´æ¥å»ºç«‹è‡ªå·±çš„å›¾åºŠåº“ã€‚</p>
<h3 id="ç‚¹å‡»å³ä¸Šè§’çš„å·æ–°å»ºä»“åº“">ç‚¹å‡»å³ä¸Šè§’çš„+å·ï¼Œæ–°å»ºä»“åº“</h3>
<center><img src="https://gitee.com/dogleft/blogsrc/raw/master/img/picgo4.jpg"/></center>
<p>æ–°å»ºä»“åº“çš„è¦ç‚¹å¦‚ä¸‹ï¼š</p>
<pre><code>1. è¾“å…¥ä¸€ä¸ªä»“åº“åç§°
2. å…¶æ¬¡å°†ä»“åº“è®¾ä¸ºå…¬å¼€
3. å‹¾é€‰ä½¿ç”¨Readmeæ–‡ä»¶åˆå§‹åŒ–è¿™ä¸ªä»“åº“
   è¿™ä¸ªé€‰é¡¹å‹¾ä¸Šï¼Œè¿™æ ·ç äº‘ä¼šè‡ªåŠ¨ç»™ä½ çš„ä»“åº“å»ºç«‹masteråˆ†æ”¯ï¼Œè¿™ç‚¹å¾ˆé‡è¦!!! æˆ‘ï¼ˆåŸä½œè€…ï¼‰å› ä¸ºè¿™ç‚¹æŠ˜è…¾äº†å¾ˆä¹…ï¼Œå› ä¸ºä½¿ç”¨githubåšå›¾åºŠpicgoå¥½åƒä¼šè‡ªåŠ¨å¸®ä½ ç”Ÿæˆmasteråˆ†æ”¯ï¼Œè€Œpicgoé‡Œçš„giteeæ’ä»¶ä¸ä¼šå¸®ä½ è‡ªåŠ¨ç”Ÿæˆåˆ†æ”¯ã€‚
</code></pre>
<center><img src="https://gitee.com/dogleft/blogsrc/raw/master/img/picgo5.jpg"/></center>
<p>ç‚¹å‡»åˆ›å»ºè¿›å…¥ä¸‹ä¸€æ­¥ã€‚</p>
<h2 id="3-é…ç½®picgo">3. é…ç½®PicGo</h2>
<p>å®‰è£…äº†gitee-uploaderæ’ä»¶ä¹‹åï¼Œæˆ‘ä»¬å¼€å§‹é…ç½®æ’ä»¶</p>
<p>é…ç½®æ’ä»¶çš„è¦ç‚¹å¦‚ä¸‹ï¼š</p>
<center><img src="https://gitee.com/dogleft/blogsrc/raw/master/img/picgo6.jpg"/></center>
<ul>
<li>repoï¼šç”¨æˆ·å/ä»“åº“åç§°ï¼Œæ¯”å¦‚æˆ‘è‡ªå·±çš„ä»“åº“leonG7/blogImageï¼Œä¹Ÿå¯ä»¥ç›´æ¥å¤åˆ¶ä»“åº“çš„url</li>
</ul>
<center><img src="https://gitee.com/dogleft/blogsrc/raw/master/img/picgo7.jpg"/></center>
<ul>
<li>branchï¼šåˆ†æ”¯ï¼Œè¿™é‡Œå†™ä¸Šmaster</li>
<li>tokenï¼šå¡«å…¥ç äº‘çš„ç§äººä»¤ç‰Œ</li>
<li>pathï¼šè·¯å¾„ï¼Œä¸€èˆ¬å†™ä¸Šimg</li>
<li>customPathï¼šæäº¤æ¶ˆæ¯ï¼Œè¿™ä¸€é¡¹å’Œä¸‹ä¸€é¡¹customURLéƒ½ä¸ç”¨å¡«ã€‚åœ¨æäº¤åˆ°ç äº‘åï¼Œä¼šæ˜¾ç¤ºæäº¤æ¶ˆæ¯ï¼Œæ’ä»¶é»˜è®¤æäº¤çš„æ˜¯ Upload å›¾ç‰‡å by picGo - æ—¶é—´</li>
</ul>
<h3 id="è¿™ä¸ªtokenæ€ä¹ˆè·å–ä¸‹é¢ç™»å½•è¿›è‡ªå·±çš„ç äº‘">è¿™ä¸ªtokenæ€ä¹ˆè·å–ï¼Ÿä¸‹é¢ç™»å½•è¿›è‡ªå·±çš„ç äº‘</h3>
<ol>
<li>ç‚¹å‡»å¤´åƒï¼Œè¿›å…¥è®¾ç½®</li>
</ol>
<center><img src="https://gitee.com/dogleft/blogsrc/raw/master/img/picgo8.jpg"/></center>
<ol start="2">
<li>æ‰¾åˆ°å·¦è¾¹å®‰å…¨è®¾ç½®é‡Œé¢çš„ç§äººä»¤ç‰Œ</li>
</ol>
<center><img src="https://gitee.com/dogleft/blogsrc/raw/master/img/picgo9.jpg"/></center>
<ol start="3">
<li>ç‚¹å‡»ç”Ÿæˆæ–°ä»¤ç‰Œï¼ŒæŠŠprojectsè¿™ä¸€é¡¹å‹¾ä¸Šï¼Œå…¶ä»–çš„ä¸ç”¨å‹¾ï¼Œç„¶åæäº¤</li>
</ol>
<center><img src="https://gitee.com/dogleft/blogsrc/raw/master/img/picgo10.jpg"/></center>
<p>è¿™é‡Œéœ€è¦éªŒè¯ä¸€ä¸‹å¯†ç ï¼ŒéªŒè¯å¯†ç ä¹‹åä¼šå‡ºæ¥ä¸€ä¸²æ•°å­—ï¼Œè¿™ä¸€ä¸²æ•°å­—å°±æ˜¯ä½ çš„tokenï¼Œå°†è¿™ä¸²æ•°å­—å¤åˆ¶åˆ°åˆšæ‰çš„é…ç½®é‡Œé¢å»ã€‚</p>
<center><img src="https://gitee.com/dogleft/blogsrc/raw/master/img/picgo11.jpg"/></center>
<blockquote>
<p>æ³¨æ„ï¼šè¿™ä¸ªä»¤ç‰Œåªä¼šæ˜æ–‡æ˜¾ç¤ºä¸€æ¬¡ï¼Œå»ºè®®åœ¨é…ç½®æ’ä»¶çš„æ—¶å€™å†æ¥ç”Ÿæˆä»¤ç‰Œï¼Œç›´æ¥å¤åˆ¶è¿›å»ï¼Œæä¸¢äº†åˆè¦é‡æ–°ç”Ÿæˆä¸€ä¸ªã€‚</p>
</blockquote>
<h2 id="ç°åœ¨ä¿å­˜ä½ åˆšæ‰çš„é…ç½®ç„¶åå°†å®ƒè®¾ç½®ä¸ºé»˜è®¤å›¾åºŠå¤§åŠŸå‘Šæˆ">ç°åœ¨ä¿å­˜ä½ åˆšæ‰çš„é…ç½®ï¼Œç„¶åå°†å®ƒè®¾ç½®ä¸ºé»˜è®¤å›¾åºŠï¼Œå¤§åŠŸå‘Šæˆã€‚</h2>
<p>è¿˜æœ‰ä¸€ä¸ªæ’ä»¶<code>gitee x.x.x-beta</code>ï¼ŒåŠŸèƒ½å·®ä¸å¤šï¼Œ<code>åˆšæ‰é‚£ä¸ªèƒ½ç”¨çš„è¯å°±ä¸éœ€è¦ç”¨è¿™ä¸ª</code>ï¼Œé…ç½®çš„å†…å®¹æœ‰ç‚¹å·®åˆ«ï¼Œç®€å•è¯´ä¸€ä¸‹ï¼š</p>
<center><img src="https://gitee.com/dogleft/blogsrc/raw/master/img/picgo12.jpg"/></center>
<ul>
<li>urlï¼šå›¾åºŠç½‘ç«™ï¼Œè¿™é‡Œå†™ç äº‘çš„ä¸»é¡µ <a href="https://gitee.com">https://gitee.com</a></li>
<li>ownerï¼šæ‰€æœ‰è€…ï¼Œå†™ä¸Šä½ çš„ç äº‘è´¦å·åï¼Œå¦‚æœä½ ä¸çŸ¥é“ä½ çš„è´¦å·åï¼Œè¿›å…¥ä½ åˆšæ‰çš„ä»“åº“ï¼Œæµè§ˆå™¨urlé‡Œé¢æœ‰</li>
</ul>
<center><img src="https://gitee.com/dogleft/blogsrc/raw/master/img/picgo13.jpg"/></center>
<ul>
<li>
<p>repoï¼šä»“åº“åç§°ï¼Œåªè¦å†™ä¸Šä»“åº“åç§°å°±è¡Œï¼Œæ¯”å¦‚æˆ‘è‡ªå·±çš„ä»“åº“blogImage</p>
</li>
<li>
<p>pathï¼šå†™ä¸Šè·¯å¾„ï¼Œä¸€èˆ¬æ˜¯imgï¼Œ<strong>è¿™å‡ ä¸ªé¡¹éƒ½ä¸ç”¨åŠ â€œ / â€œç¬¦å·</strong></p>
</li>
<li>
<p>tokenï¼šåˆšæ‰ä½ è·å–çš„ä¸ªäººä»¤ç‰Œï¼Œä¸¤ä¸ªæ’ä»¶æ˜¯é€šç”¨çš„ï¼Œå¦‚æœä½ ç”¨äº†å¦ä¸€ä¸ªå†æ¥ç”¨è¿™ä¸ªï¼Œå®ƒä¼šè‡ªåŠ¨è¯»å–å¦ä¸€ä¸ªæ’ä»¶çš„éƒ¨åˆ†é…ç½®ï¼Œä¸ç”¨é‡æ–°ç”³è¯·</p>
</li>
<li>
<p>messageï¼šä¸ç”¨å¡«</p>
</li>
</ul>
<h2 id="4-æµ‹è¯•">4. æµ‹è¯•</h2>
<p>éšä¾¿é€‰ä¸€å¼ å›¾ç‰‡ä¸Šä¼ ï¼ˆpicgoä¹Ÿæ”¯æŒå‰ªè´´æ¿ä¸Šä¼ ï¼Œæˆªå›¾å·¥å…·æ¨èwin10çš„Snipasteç¥å™¨ï¼ï¼‰ï¼Œè¯•è¯•çœ‹</p>
<h2 id="è¶…çº§å¿«æœ‰æœ¨æœ‰æ¯”githubå¿«å¾ˆå¤š01ç§’ä¸Šä¼ è€Œä¸”å¯¼å…¥åˆ°ä½ çš„markdownç¼–è¾‘å™¨é‡Œé¢ä¹Ÿæ˜¯ç§’è¯†åˆ«ä½ çš„å›¾ç‰‡å†…å®¹è€Œå¦‚æœæ˜¯githubå›¾åºŠä¸Šä¼ å¤ªæ…¢ä¸è¯´å¯èƒ½è¿˜ä¼šå‡ºç°ä¸‹é¢è¿™æ ·è¯†åˆ«ä¸å‡ºæ¥çš„é—®é¢˜"><strong><code>è¶…çº§å¿«æœ‰æœ¨æœ‰ï¼æ¯”githubå¿«å¾ˆå¤šï¼Œ0.1ç§’ä¸Šä¼ ï¼Œè€Œä¸”å¯¼å…¥åˆ°ä½ çš„markdownç¼–è¾‘å™¨é‡Œé¢ä¹Ÿæ˜¯ç§’è¯†åˆ«ä½ çš„å›¾ç‰‡å†…å®¹ï¼Œè€Œå¦‚æœæ˜¯githubå›¾åºŠä¸Šä¼ å¤ªæ…¢ä¸è¯´å¯èƒ½è¿˜ä¼šå‡ºç°ä¸‹é¢è¿™æ ·è¯†åˆ«ä¸å‡ºæ¥çš„é—®é¢˜ï¼</code></strong></h2>
<h3 id="ä¸Šä¼ ä¹‹åé»˜è®¤å¤åˆ¶é“¾æ¥ç›´æ¥ç²˜è´´åˆ°ä½ çš„markdownç¼–è¾‘å™¨é‡Œå°±å¯ä»¥æ„‰å¿«çš„è¿›è¡Œå†™ä½œäº†">ä¸Šä¼ ä¹‹åé»˜è®¤å¤åˆ¶é“¾æ¥ï¼Œç›´æ¥ç²˜è´´åˆ°ä½ çš„markdownç¼–è¾‘å™¨é‡Œï¼Œå°±å¯ä»¥æ„‰å¿«çš„è¿›è¡Œå†™ä½œäº†ï¼</h3>
<p>åŸæ–‡ï¼š<a href="https://www.jianshu.com/p/b69950a49ae2">https://www.jianshu.com/p/b69950a49ae2</a>
<del>ï¼ˆåšä¸»ï¼šæˆ‘å·²ç»ç”¨ä¸Šäº†ï¼ï¼‰</del></p>
]]></content><category scheme="https://raycoder.me/categories/picgo/" term="Picgo" label="Picgo"/><category scheme="https://raycoder.me/categories/%E5%9B%BE%E5%BA%8A/" term="å›¾åºŠ" label="å›¾åºŠ"/><category scheme="https://raycoder.me/tags/picgo/" term="Picgo" label="Picgo"/><category scheme="https://raycoder.me/tags/gitee/" term="Gitee" label="Gitee"/><category scheme="https://raycoder.me/tags/%E5%B7%A5%E5%85%B7/" term="å·¥å…·" label="å·¥å…·"/></entry></feed>